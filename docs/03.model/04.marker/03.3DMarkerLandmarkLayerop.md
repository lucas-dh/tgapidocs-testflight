# 特效地标图操作

## 目录

- [1.添加特效地标图](#1添加特效地标图)
- [2.更新特效地标图数据](#2更新特效地标图数据)
- [3.更新特效地标图样式](#3更新特效地标图样式)
- [4.删除特效地标图](#4删除特效地标图)

## 1.添加特效地标图

### 功能描述

在三维场景中添加特效地标图

### 调用方法

```js
let jsonData = {
  id: '3DMarkerLayerId', 
  coordType: 0, 
  coordTypeZ: 0, 
  snapSurface: 0, 
  alpha: 1, 
  markerMaxDistance: 7500, 
  iconMaxDistance: 10000, 
  markerLandmarkDataId: 'id3DMarkerLandmarkData1', 
  visible: true, 
  legends: [
    {
      name: 'legendName1', 
      markerType: 'Revolve02', 
      scale: 150, 
      iconName: 'icon1', 
      titleColor: '#ffffff', 
      titleBackgroundColor: '#333333', 
    },
    {
      name: 'legendName2',
      markerType: 'Revolve04',
      scale: 150,
      iconName: 'icon1',
      titleColor: '#ffffff',
      titleBackgroundColor: '#333333',
    },
    {
      name: 'legendName3',
      markerType: 'Revolve06',
      scale: 150,
      iconName: 'icon1',
      titleColor: '#ffffff',
      titleBackgroundColor: '#333333',
    },
  ],
  data: [
    {
      id: 'objId1', 
      titleText: '标题', 
      coord: [114.079516146565,22.5571223225079],
      coordZ: -0.5, 
      rotation: [0, 0, 0], 
      type: 'legendName1', 
    },
    {
      id: 'objId2',
      titleText: '标题',
      coord: [114.084516146565,22.5571223225079],
      coordZ: -0.5,
      rotation: [0, 0, 0],
      type: 'legendName2',
    },
    {
      id: 'objId3',
      titleText: '标题',
      coord: [114.089516146565,22.5571223225079],
      coordZ: -0.5,
      rotation: [0, 0, 0],
      type: 'legendName3',
    },
  ],
};

appInstance.uniCall(
  'clearOverlayType',
  {
    overlayType: '3DMarkerLandmarkLayer', 
  },
  result => {
    console.log(result);
  }
);
appInstance.uniCall('add3DMarkerLandmarkLayer', jsonData, result => {
  console.log(result);
  if (result.result === 1) {
    appInstance.uniCall(
      'focusById',
      {
        id: '3DMarkerLayerId',
        overlayType: '3DMarkerLandmarkLayer',
        distance: 2000,
      },
      focusResult => {
        console.log(focusResult);
      }
    );
  }
});
```

#### 参数描述

| 属性                 | 类型     | 说明                                                                                                                          |
| -------------------- | -------- | ----------------------------------------------------------------------------------------------------------------------------- |
| id                   | String   | 模型对象 id，新建时调用者自己传入的唯一标识，用于各种操作的对象识别                                                                                                         |
| coordType            | Number   | XY 轴坐标类别，0：X 经度，Y 纬度；1：X 米，Y米，相对世界00点                               |
| coordTypeZ           | Number   | Z 轴坐标类别，0：相对 3D 世界 0 海拔；1：相对 3D 世界地表；2：相对 3D 模型表面（单位：米） |
| snapSurface           | Number   | 启用自动贴地 |
| alpha                | Number   | 透明度，0：完全透明；1：完全不透明                                                                                                                        |
| markerMaxDistance                | Number   | 特效最大可见距离（单位：米），不可见后显示icon                                                                                                                        |
| iconMaxDistance                | Number   | icon最大可见距离（单位：米），不可见后隐藏                                                                                                                        |
| markerLandmarkDataId                | String   | 对应本服务器上3DMarkerLandmark数据Id，如果找到id，则下方的data不起作用                                                                                                                        |
| visible                | Boolean   | 添加当前图层时默认显示还是隐藏                                                                                                                        |
| name                | String   | 图层内图例名称，新建时调用者自己传入的唯一名称，用于各种操作的图例识别                                                                                                                        |
| markerType                | String   | 特效样式类别 Radar01 Revolve01 Revolve02 Revolve03 Revolve04 Spread01 Spread02 Spread03 Spread04 Spread05 Spread06 Spread07 Spread08 Spread09 Square01                                                                                                                        |
| scale                | Number   | 整体放缩倍数（单位：倍）                                                                                                                 |
| iconName                | String   | 内置图标名称，或根据项目，在场景中预置好的图标对象的名称，包含文字样式定义，具体图标名称参考下表和下图册                                                                                                                 |
| titleColor                | String   | 特效标签文本颜色，可选值，默认白色                                                                                                                 |
| titleBackgroundColor                | String   | 特效标签文本背景颜色，可选值，默认灰色                                                                                                                 |
| id                | String   | 特效对象 id，新建时调用者自己传入的唯一标识，用于各种操作的对象识别                                                                                                                 |
| titleText            | String   | 特效标签文本                                                                                                       |
| coord                | Array    | XY 轴坐标，X：经度；Y：纬度                                                                                                                |
| coordZ               | Number   | Z 轴高度（单位：米）                                                                                                                    |
| rotation               | Array   | XYZ 三轴旋转度数 [偏航角（单位：角度，0正北, -360 ~ 360），俯仰角（单位：角度，0水平, -360 ~ 360），翻滚角（单位：角度，0水平, -360 ~ 360）]                                                                                                                    |
| type               | String   | 特效图例类别                                                                                                                    |
| overlayType               | String   | 覆盖物类型，支持 all                                                                                                                    |

#### 回调数据

```json
{
  "result": 1,
  "message": "成功。"
}
```

#### 回调数据参数描述

| 属性    | 类型   | 说明                     |
| ------- | ------ | ------------------------ |
| result  | Number | 1：代表成功；0：代表失败 |
| message | String | 成功或者失败原因         |

<!-- #### type 枚举值

<video id="spotSrc" class='zoom' src="./contents/mediaFiles/video/spot/Spot-Radar-01.mp4"  autoplay loop></video>

<div class="video-wrap ">
  <ul class="video-cont spot-width" >
    <li class="video-item" onclick="switchPath('spotSrc','spot-width','./contents/mediaFiles/video/spot/Spot-Radar-01.mp4',0)">
      <video src="./contents/mediaFiles/video/spot/Spot-Radar-01.mp4" preload='none' preload='none' poster='./contents/mediaFiles/images/special/Radar01.png'></video>
      <strong>Radar01</strong>
    </li>
    <li class="video-item" onclick="switchPath('spotSrc','spot-width','./contents/mediaFiles/video/spot/Spot-Revolve-01.mp4',1)">
      <video src="./contents/mediaFiles/video/spot/Spot-Revolve-01.mp4" preload='none' preload='none' poster='./contents/mediaFiles/images/special/Revolve01.png'></video>
      <strong>Revolve01</strong>
    </li>
    <li class="video-item" onclick="switchPath('spotSrc','spot-width','./contents/mediaFiles/video/spot/Spot-Revolve-02.mp4',2)">
      <video src="./contents/mediaFiles/video/spot/Spot-Revolve-02.mp4" preload='none' preload='none' poster='./contents/mediaFiles/images/special/Revolve02.png'></video>
      <strong>Revolve02</strong>
    </li>
    <li class="video-item" onclick="switchPath('spotSrc','spot-width','./contents/mediaFiles/video/spot/Spot-Revolve-03.mp4',3)">
      <video src="./contents/mediaFiles/video/spot/Spot-Revolve-03.mp4" preload='none' preload='none' poster='./contents/mediaFiles/images/special/Revolve03.png'></video>
      <strong>Revolve03</strong>
    </li>
    <li class="video-item" onclick="switchPath('spotSrc','spot-width','./contents/mediaFiles/video/spot/Spot-Revolve-04.mp4',4)">
      <video src="./contents/mediaFiles/video/spot/Spot-Revolve-04.mp4" preload='none' preload='none' poster='./contents/mediaFiles/images/special/Revolve04.png'></video>
      <strong>Revolve04</strong>
    </li>
    <li class="video-item" onclick="switchPath('spotSrc','spot-width','./contents/mediaFiles/video/spot/Spot-Spread-01.mp4',5)">
      <video src="./contents/mediaFiles/video/spot/Spot-Spread-01.mp4" preload='none' preload='none' poster='./contents/mediaFiles/images/special/Spread01.png'></video>
      <strong>Spread01</strong>
    </li>
    <li class="video-item" onclick="switchPath('spotSrc','spot-width','./contents/mediaFiles/video/spot/Spot-Spread-02.mp4',6)">
      <video src="./contents/mediaFiles/video/spot/Spot-Spread-02.mp4" preload='none' preload='none' poster='./contents/mediaFiles/images/special/Spread02.png'></video>
      <strong>Spread02</strong>
    </li>
    <li class="video-item" onclick="switchPath('spotSrc','spot-width','./contents/mediaFiles/video/spot/Spot-Spread-03.mp4',7)">
      <video src="./contents/mediaFiles/video/spot/Spot-Spread-03.mp4" preload='none' preload='none' poster='./contents/mediaFiles/images/special/Spread03.png'></video>
      <strong>Spread03</strong>
    </li>
    <li class="video-item" onclick="switchPath('spotSrc','spot-width','./contents/mediaFiles/video/spot/Spot-Spread-04.mp4',8)">
      <video src="./contents/mediaFiles/video/spot/Spot-Spread-04.mp4" preload='none' preload='none' poster='./contents/mediaFiles/images/special/Spread04.png'></video>
      <strong>Spread04</strong>
    </li>
    <li class="video-item" onclick="switchPath('spotSrc','spot-width','./contents/mediaFiles/video/spot/Spot-Spread-05.mp4',9)">
      <video src="./contents/mediaFiles/video/spot/Spot-Spread-05.mp4" preload='none' preload='none' poster='./contents/mediaFiles/images/special/Spread05.png'></video>
      <strong>Spread05</strong>
    </li>
    <li class="video-item" onclick="switchPath('spotSrc','spot-width','./contents/mediaFiles/video/spot/Spot-Spread-06.mp4',10)">
      <video src="./contents/mediaFiles/video/spot/Spot-Spread-06.mp4" preload='none' preload='none' poster='./contents/mediaFiles/images/special/Spread06.png'></video>
      <strong>Spread06</strong>
    </li>
    <li class="video-item" onclick="switchPath('spotSrc','spot-width','./contents/mediaFiles/video/spot/Spot-Spread-07.mp4',11)">
      <video src="./contents/mediaFiles/video/spot/Spot-Spread-07.mp4" preload='none' preload='none' poster='./contents/mediaFiles/images/special/Spread07.png'></video>
      <strong>Spread07</strong>
    </li>
    <li class="video-item" onclick="switchPath('spotSrc','spot-width','./contents/mediaFiles/video/spot/Spot-Spread-08.mp4',12)">
      <video src="./contents/mediaFiles/video/spot/Spot-Spread-08.mp4" preload='none' preload='none' poster='./contents/mediaFiles/images/special/Spread08.png'></video>
      <strong>Spread08</strong>
    </li>
    <li class="video-item" onclick="switchPath('spotSrc','spot-width','./contents/mediaFiles/video/spot/Spot-Spread-09.mp4',13)">
      <video src="./contents/mediaFiles/video/spot/Spot-Spread-09.mp4" preload='none' preload='none' poster='./contents/mediaFiles/images/special/Spread09.png'></video>
      <strong>Spread09</strong>
    </li>
    <li class="video-item" onclick="switchPath('spotSrc','spot-width','./contents/mediaFiles/video/spot/Spot-Spread-10.mp4',14)">
      <video src="./contents/mediaFiles/video/spot/Spot-Spread-10.mp4" preload='none' preload='none' poster='./contents/mediaFiles/images/special/Square01.png'></video>
      <strong>Square01</strong>
    </li>
  </ul>
</div> -->

### 具体内置图标名称（iconName）详情

<table>
    <tr>
      <th>图标类型</th>
      <th>图标名称</th>
    </tr>
    <tr>
      <td rowspan="15" style="text-align:left;">市政设施</td>
      <td>camera</td>
    </tr>
    <tr>
      <td>streetlamp</td>
    </tr>
    <tr>
      <td>manholecover</td>
    </tr>
    <tr>
      <td>sensor</td>
    </tr>
    <tr>
      <td>utilitypole</td>
    </tr>
    <tr>
      <td>transmission</td>
    </tr>
    <tr>
      <td>broadcast</td>
    </tr>
    <tr>
      <td>wifi</td>
    </tr>
    <tr>
      <td>firehydrant</td>
    </tr>
    <tr>
      <td>equipmentbox</td>
    </tr>
    <tr>
      <td>trafficlight</td>
    </tr>
    <tr>
      <td>charge</td>
    </tr>
    <tr>
      <td>gasstation</td>
    </tr>
    <tr>
      <td>wc</td>
    </tr>
    <tr>
      <td>dustbin</td>
    </tr>
    <tr>
      <td rowspan="20" style="text-align:left;">地点建筑</td>
      <td>trainstation</td>
    </tr>
    <tr>
      <td>airport</td>
    </tr>
    <tr>
      <td>anchor</td>
    </tr>
    <tr>
      <td>government</td>
    </tr>
    <tr>
      <td>netpoint</td>
    </tr>
    <tr>
      <td>metro</td>
    </tr>
    <tr>
      <td>finance</td>
    </tr>
    <tr>
      <td>school</td>
    </tr>
    <tr>
      <td>hospital</td>
    </tr>
    <tr>
      <td>factory</td>
    </tr>
    <tr>
      <td>constructionsite</td>
    </tr>
    <tr>
      <td>residence</td>
    </tr>
    <tr>
      <td>mergencyshelter</td>
    </tr>
    <tr>
      <td>park</td>
    </tr>
    <tr>
      <td>diningroom</td>
    </tr>
    <tr>
      <td>warehouse</td>
    </tr>
    <tr>
      <td>store</td>
    </tr>
    <tr>
      <td>tollgate</td>
    </tr>
    <tr>
      <td>officebuilding</td>
    </tr>
    <tr>
      <td>busstation</td>
    </tr>
    <tr>
      <td rowspan="5" style="text-align:left;">人员</td>
      <td>people</td>
    </tr>
    <tr>
      <td>policeman</td>
    </tr>
    <tr>
      <td>doctor</td>
    </tr>
    <tr>
      <td>specialpeople</td>
    </tr>
    <tr>
      <td>criminal</td>
    </tr>
    <tr>
      <td rowspan="15" style="text-align:left;">交通</td>
      <td>car</td>
    </tr>
    <tr>
      <td>policecar</td>
    </tr>
    <tr>
      <td>fireengine</td>
    </tr>
    <tr>
      <td>ambulance</td>
    </tr>
    <tr>
      <td>taxi</td>
    </tr>
    <tr>
      <td>truck</td>
    </tr>
    <tr>
      <td>bus</td>
    </tr>
    <tr>
      <td>newscar</td>
    </tr>
    <tr>
      <td>militarycar</td>
    </tr>
    <tr>
      <td>municipal</td>
    </tr>
    <tr>
      <td>electriccar</td>
    </tr>
    <tr>
      <td>watercar</td>
    </tr>
    <tr>
      <td>train</td>
    </tr>
    <tr>
      <td>ship</td>
    </tr>
    <tr>
      <td>cargoship</td>
    </tr>
    <tr>
      <td rowspan="5" style="text-align:left;">飞行器</td>
      <td>airplane</td>
    </tr>
    <tr>
      <td>helicopter</td>
    </tr>
    <tr>
      <td>uav</td>
    </tr>
    <tr>
      <td>satellite</td>
    </tr>
    <tr>
      <td>rocket</td>
    </tr>
    <tr>
      <td rowspan="3" style="text-align:left;">事件</td>
      <td>event_01</td>
    </tr>
    <tr>
      <td>event_03</td>
    </tr>
    <tr>
      <td>event_03</td>
    </tr>
    <tr>
      <td rowspan="4" style="text-align:left;">通用</td>
      <td>icon_01</td>
    </tr>
    <tr>
      <td>icon_02</td>
    </tr>
    <tr>
      <td>icon_03</td>
    </tr>
    <tr>
      <td>icon_04</td>
    </tr>
    <tr>
      <td rowspan="3" style="text-align:left;">地名</td>
      <td>site_01</td>
    </tr>
    <tr>
      <td>site_02</td>
    </tr>
    <tr>
      <td>site_03</td>
    </tr>
</table>

### 具体内置图标名称（iconName）效果

<img src="./contents/mediaFiles/images/iconName.jpg" width = "1344" height = "765" alt="图标效果" />

[返回本章目录](#目录)

## 2.更新特效地标图数据

### 功能描述

更新三维场景中添加特效地标图的数据

### 调用方法

```js
let jsonData = {
  id: '3DMarkerLayerId', 
  coordType: 0, 
  coordTypeZ: 0, 
  data: [
    {
      id: 'objId1', 
      titleText: '标题1', 
      coord: [114.083816146565,22.5571223225079], 
      coordZ: -0.5, 
      rotation: [0, 0, 0], 
      type: 'legendName1', 
    },
    {
      id: 'objId2',
      titleText: '标题2',
      coord: [114.088816146565,22.5571223225079],
      coordZ: -0.5,
      rotation: [0, 45, 0],
      type: 'legendName2',
    },
    {
      id: 'objId3',
      titleText: '标题3',
      coord: [114.09381614656499,22.5571223225079],
      coordZ: -0.5,
      rotation: [0, 0, 0],
      type: 'legendName3',
    },
  ],
};

appInstance.uniCall('update3DMarkerLandmarkLayerCoord', jsonData, result => {
  console.log(result);
});

```

#### 参数描述

| 属性       | 类型     | 说明                                                                                                                          |
| ---------- | -------- | ----------------------------------------------------------------------------------------------------------------------------- |
| id         | String   | 模特效对象图层 id，新建时调用者自己传入的唯一标识，用于各种操作的对象识别                                                                                                         |
| coordType  | Number   | XY 轴坐标类别，0：X 经度，Y 纬度；1：X 米，Y米，相对世界00点                               |
| coordTypeZ | Number   | Z 轴坐标类别，0：相对 3D 世界 0 海拔；1：相对 3D 世界地表；2：相对 3D 模型表面（单位：米） |
| id        | String | 特效对象 id，新建时调用者自己传入的唯一标识，用于各种操作的对象识别                                                                                          |
| titleText        | String | 特效标签文本                                                                                          |
| coord      | Array    | XY 轴坐标，X：经度；Y：纬度                                                                                                                |
| coordZ     | Number   | Z 轴高度（单位：米）                                                                                                                    |
| rotation     | Array   | XYZ 三轴旋转度数  [偏航角（单位：角度，0正北, -360 ~ 360），俯仰角（单位：角度，0水平, -360 ~ 360），翻滚角（单位：角度，0水平, -360 ~ 360）]                                                                                                                    |
| type     | String   | 特效图例类别                                                                                                                    |

#### 回调数据

```json
{
  "result": 1,
  "message": "成功。"
}
```

#### 回调数据参数描述

| 属性    | 类型   | 说明                     |
| ------- | ------ | ------------------------ |
| result  | Number | 1：代表成功；0：代表失败 |
| message | String | 成功或者失败原因         |

[返回本章目录](#目录)

## 3.更新特效地标图样式

### 功能描述

更新三维场景中添加特效地标图的样式

### 调用方法

```js
let jsonData = {
  id: '3DMarkerLayerId', 
  alpha: 1, 
  markerMaxDistance: 7500, 
  iconMaxDistance: 10000, 
  legends: [
    {
      name: 'legendName1', 
      markerType: 'Spread04', 
      scale: 125, 
      iconName: '摄像头', 
      titleColor: '#ffffff', 
      titleBackgroundColor: '#333333', 
    },
    {
      name: 'legendName2',
      markerType: 'Spread05',
      scale: 125,
      iconName: '摄像头',
      titleColor: '#ffffff',
      titleBackgroundColor: '#333333',
    },
    {
      name: 'legendName3',
      markerType: 'Spread06',
      scale: 125,
      iconName: '摄像头',
      titleColor: '#ffffff',
      titleBackgroundColor: '#333333',
    },
  ],
};

appInstance.uniCall('update3DMarkerLandmarkLayerStyle', jsonData, result => {
  console.log(result);
});
```

#### 参数描述

| 属性                 | 类型   | 说明                                      |
| -------------------- | ------ | ----------------------------------------- |
| id                   | String | 特效对象图层 id，新建时调用者自己传入的唯一标识，用于各种操作的对象识别                     |
| alpha                | Number | 透明度，0：完全透明；1：完全不透明                                    |
| markerMaxDistance                | Number   | 特效最大可见距离（单位：米），不可见后显示icon                                                                                                                        |
| iconMaxDistance                | Number   | icon最大可见距离（单位：米），不可见后隐藏                                                                                                                        |
| name                | String   | 图层内图例名称，新建时调用者自己传入的唯一名称，用于各种操作的图例识别                                                                                                                        |
| markerType                | String   | 特效样式类别 Radar01 Revolve01 Revolve02 Revolve03 Revolve04 Spread01 Spread02 Spread03 Spread04 Spread05 Spread06 Spread07 Spread08 Spread09 Square01                                                                                                                        |
| scale                | Number   | 整体放缩倍数（单位：倍）                                                                                                                 |
| iconName                | String   | 内置图标名称，见图观官网统一API开发手册                                                                                                                 |
| titleColor                | String   | 特效标签文本颜色，可选值，默认白色                                                                                                                 |
| titleBackgroundColor                | String   | 特效标签文本背景颜色，可选值，默认灰色                                                                                                                 |

#### 回调数据

```json
{
  "result": 1,
  "message": "成功。"
}
```

#### 回调数据参数描述

| 属性    | 类型   | 说明                     |
| ------- | ------ | ------------------------ |
| result  | Number | 1：代表成功；0：代表失败 |
| message | String | 成功或者失败原因         |

[返回本章目录](#目录)

## 4.删除特效地标图

### 功能描述

删除特效地标图

### 调用方法

```js
let jsonData = {
  id: '3DMarkerLayerId', 
  overlayType: '3DMarkerLandmarkLayer', 
};

appInstance.uniCall('removeOverlay', jsonData, (result) => {
  console.log(result);
});
```

#### 参数描述

| 属性        | 类型   | 说明                                                                |
| ----------- | ------ | ------------------------------------------------------------------- |
| id          | String | 图层对象 id，新建时调用者自己传入的唯一标识，用于各种操作的对象识别 |
| overlayType | String | 图层对象类别                                                        |

#### 回调数据

```json
{
  "result": 1,
  "message": "成功。"
}
```

#### 回调数据参数描述

| 属性    | 类型   | 说明                     |
| ------- | ------ | ------------------------ |
| result  | Number | 1：代表成功；0：代表失败 |
| message | String | 成功或者失败原因         |

[返回本章目录](#目录)
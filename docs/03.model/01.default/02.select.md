# 模型选择操作

## 目录

- [1.开始框选模型](#1开始框选模型)
- [2.结束框选模型](#2结束框选模型)
- [3.开始单选模型](#3开始单选模型)
- [4.结束单选模型](#4结束单选模型)
- [5.点击模型](#5点击模型)
- [6.点击模型类别](#6点击模型类别)
- [7.清除模型选择状态](#7清除模型选择状态)

## 1.开始框选模型

### 功能描述

开始框选模型

### 调用方法

```js
let jsonData = {
  modelType: 'building',
  type: 'rect',
};
appInstance.uniCall('selectModel', jsonData, (result) => {
  console.log(result);
});
```

#### 参数描述

| 属性      | 类型   | 说明                                                                           |
| --------- | ------ | ------------------------------------------------------------------------------ |
| modelType | String | model（模型），building（建筑物），connection（关系线），iconModel（模型型号） |
| type      | String | 框选模式，rect：屏幕矩形；circle：地表圆形；polygon：地表多边形                |

#### 回调数据

```json
{
  "result": 1,
  "message": "成功。"
}
```

#### 回调数据参数描述

| 属性    | 类型   | 说明                     |
| ------- | ------ | ------------------------ |
| result  | Number | 1：代表成功；0：代表失败 |
| message | String | 成功或者失败原因         |

[返回本章目录](#目录)

## 2.结束框选模型

### 功能描述

结束框选模型

### 调用方法

```js
appInstance.uniCall('endSelectModel', {}, (result) => {
  console.log(result);
});
```

#### 回调数据

```json
{
  "result": 1,
  "message": "成功。"
}
```

#### 回调数据参数描述

| 属性    | 类型   | 说明                     |
| ------- | ------ | ------------------------ |
| result  | Number | 1：代表成功；0：代表失败 |
| message | String | 成功或者失败原因         |

[返回本章目录](#目录)

## 3.开始单选模型

### 功能描述

开始单选模型

### 调用方法

```js
let jsonData = {
  modelType: 'model',
  modelId: 'modelId',
  type: 'click',
  allowMultiple: false,
  isShowDecorator: true,
  includeIds: ['1', '2', '3'],
  excludeIds: ['4'],
};

appInstance.uniCall('pickModel', jsonData, (result) => {
  console.log(result);
});
```

#### 参数描述

| 属性            | 类型    | 说明                                                                                                                                                                                                                           | 端渲染                               | 流渲染 |
| --------------- | ------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ------------------------------------ | ------ |
| modelType       | String  | model（模型），building（建筑物），connection（关系线），iconModel（模型型号），node（新增节点类型，与 modelId 配合使用，modelType 为 model 时，modelId 属性不起作用） ，graphic（图形），analysis（分析）                     | 不支持 connection、graphic、analysis | 支持   |
| modelId         | String  | 模型 Id，模型类型为节点时指定的模型 Id，如果未指定该属性或者该属性值为空，模型类型又是节点，表示场景中所有模型的所有节点                                                                                                       | 支持                                 | 支持   |
| type            | String  | 单选模式，click：点击选中，事件会通过 onModelClick、onBuildingClick、onFloorClick、onRoomClick 回调；dblClick：双击选中，事件会通过 onModelDblClick、onBuildingDblClick、onFloorDblClick、onRoomDlbClick 回调；hover：悬停选中 | 支持                                 | 支持   |
| allowMultiple   | Boolean | 多选模式，false：单击单选当前对象并且取消其他全部选中对象，按住 ctrl+单击可多选，按住 ctrl+单击同一对象取消选中，true：单击添加当前到多选，再次单击同一对象取消选中，点击场景取消全部选中                                      | 支持                                 | 支持   |
| isShowDecorator | Boolean | 表示是否显示选中的高亮装饰符，true：显示，false：不显示，默认：true                                                                                                                                                            | 支持                                 | 支持   |
| includeIds      | Array   | 允许选择的 Id 的集合，受 modelType 影响，必须是 特定的模型类型的特定对象，允许被选择，与 excludeIds 不能同时有值，如果同时有值，该属性不起作用                                                                                 | 支持                                 | 不支持 |
| excludeIds      | Array   | 不允许选择的 Id 的集合，受 modelType 影响，必须是 特定的模型类型的特定对象，不允许被选择，与 includeIds 不能同时有值，如果同时有值，includeIds 不起作用                                                                        | 支持                                 | 不支持 |

#### 回调数据

```json
{
  "result": 1,
  "message": "成功。"
}
```

#### 回调数据参数描述

| 属性    | 类型   | 说明                     |
| ------- | ------ | ------------------------ |
| result  | Number | 1：代表成功；0：代表失败 |
| message | String | 成功或者失败原因         |

[返回本章目录](#目录)

## 4.结束单选模型

### 功能描述

结束单选模型

### 调用方法

```js
appInstance.uniCall('endPickModel', {}, (result) => {
  console.log(result);
});
```

#### 回调数据

```json
{
  "result": 1,
  "message": "成功。"
}
```

#### 回调数据参数描述

| 属性    | 类型   | 说明                     |
| ------- | ------ | ------------------------ |
| result  | Number | 1：代表成功；0：代表失败 |
| message | String | 成功或者失败原因         |

[返回本章目录](#目录)

## 5.点击模型

### 功能描述

点击模型

### 调用方法

```js
let jsonData = {
  id: 'modeljId',
  modelType: 'model',
  selected: true,
};
appInstance.uniCall('clickModel', jsonData, (result) => {
  console.log(result);
});
```

#### 参数描述

| 属性      | 类型    | 说明                                                                                                                                | 端渲染                           | 流渲染 |
| --------- | ------- | ----------------------------------------------------------------------------------------------------------------------------------- | -------------------------------- | ------ |
| id        | String  | 模型 id（唯一标识）                                                                                                                 | 支持                             | 支持   |
| modelType | String  | model（模型），building（建筑物），connection（关系线），iconModel（模型型号），node（节点类型），graphic（图形），analysis（分析） | 不支持 node、graphic 和 analysis | 支持   |
| selected  | Boolean | 选中状态，true：对象被高亮选中；false：对象被取消高亮选中                                                                           | 支持                             | 支持   |

#### 回调数据

```json
{
  "result": 1,
  "message": "成功。"
}
```

#### 回调数据参数描述

| 属性    | 类型   | 说明                     |
| ------- | ------ | ------------------------ |
| result  | Number | 1：代表成功；0：代表失败 |
| message | String | 成功或者失败原因         |

[返回本章目录](#目录)

## 6.点击模型类别

### 功能描述

点击模型类别

### 调用方法

```js
let jsonData = {
  modelType: 'model',
  selected: true,
};
appInstance.uniCall('clickModelType', jsonData, (result) => {
  console.log(result);
});
```

#### 参数描述

| 属性      | 类型    | 说明                                                                           |
| --------- | ------- | ------------------------------------------------------------------------------ |
| modelType | String  | model（模型），building（建筑物），connection（关系线），iconModel（模型型号） |
| selected  | Boolean | 选中状态，true：对象被高亮选中；flase：对象被取消高亮选中                      |

#### 回调数据

```json
{
  "result": 1,
  "message": "成功。"
}
```

#### 回调数据参数描述

| 属性    | 类型   | 说明                     |
| ------- | ------ | ------------------------ |
| result  | Number | 1：代表成功；0：代表失败 |
| message | String | 成功或者失败原因         |

[返回本章目录](#目录)

## 7.清除模型选择状态

### 功能描述

清除模型选择状态

### 调用方法

```js
appInstance.uniCall('clearModelSelected', {}, (result) => {
  console.log(result);
});
```

#### 回调数据

```json
{
  "result": 1,
  "message": "成功。"
}
```

#### 回调数据参数描述

| 属性    | 类型   | 说明                     |
| ------- | ------ | ------------------------ |
| result  | Number | 1：代表成功；0：代表失败 |
| message | String | 成功或者失败原因         |

[返回本章目录](#目录)

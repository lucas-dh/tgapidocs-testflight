# 圆锥体操作

## 目录

- [1.添加圆锥体](#1添加圆锥体-流)
- [2.更新圆锥体](#2更新圆锥体-流)
- [3.更新圆锥体样式](#3更新圆锥体样式-流)
- [4.删除圆锥体](#4删除圆锥体-流)

## 1.添加圆锥体 <span style="width: 40px;height: 21px;display:inline-block;background: #0fcccc;margin-left: 5px;line-height: 19px;"><span style="width: 100%;height: 100%;background: url(./img/stream.png) no-repeat 4px 5px;background-size: 12px 10px;text-indent: 22px;font-size: 12px;color: #ffffff;line-height: 20px;display:inline-block;vertical-align: top;">流</span></span>

### 功能描述

在三维场景中添加圆锥体

### 调用方法

```js
let jsonData = {  
  id: 'coneSensor',
  coordType: 0,
  coordTypeZ: 0, 
  coord: [116.34599081794,40.08430867971],	
  coordZ: 30,	
  visible: true,
  angle: 10,
  length: 50, 
  rotation: [20,80,90],	
  alpha: 0.5,
  color: '#ffffff',
  outline: true,
  outlineColor: '#ffff00',
  topSurface: true,	
  topOutline: true,	
  topCircleSteps: 5,
  topLineSteps: 5,
  topStyle: 'flat',
  showScanner: true,
  scannerColor: '#00ffff',
  scannerAlpha: 0.9,
  scannerMode: 'circular',
  scannerDuration: 3,	
  scannerRepeatMode: 'backward',
  lookAtObj: '03_FACS_Billboard_L_179',
};

appInstance.uniCall('addConeSensor', jsonData, (result) => {
  console.log(result);
});
```

#### 参数描述

| 属性             | 类型     | 说明                                                                                                                                      
| ---------------- | -------- | ----------------------------------------------------------------------------------------------------------------------------------------- 
| id               | String   | 图层对象 id，新建时调用者自己传入的唯一标识，用于各种操作的对象识别                                                                         
| coordType        | Number   | XY 轴坐标类别，0：X 经度，Y 纬度；1：X 米，Y米，相对世界00点                                                                         
| coordTypeZ       | Number   | Z 轴坐标类别，0：相对 3D 世界 0 海拔；1：相对 3D 世界地表；2：相对 3D 模型表面（单位：米）                                             
| coord            | Array    | XY 轴坐标，X：经度；Y：纬度                                                                                                          
| coordZ           | Number   | Z 轴高度（单位：米）                                                                                                                 
| visible          | Boolean  | 初始化添加时的默认值，true：显示，false：隐藏                                                                                       
| angle            | Number   | 圆锥体夹角，（单位：角度，0.1 - 120）                                                                                     
| length           | Number   | 圆锥体半径长度，（单位：米）
| rotation         | Array    | XYZ 三轴旋转度数 [偏航角（单位：角度，0正北, -360 ~ 360）, 俯仰角（单位：角度，0水平, -360 ~ 360）,翻滚角（单位：角度，0水平, -360 ~ 360）]       
| alpha            | Number   | 透明度，0：完全透明；1：完全不透明                                                                                         
| color            | String   | 圆锥体颜色                                                                                        
| outline          | Boolean  | 是否显示描边                                                                                              
| outlineColor     | String   | 描边颜色                                                                                                       
| topSurface       | Boolean  | 是否显示顶面                                                                                                     
| topOutline       | Boolean  | 是否显示顶面网格线                                                                                                     
| topCircleSteps   | Number   | 顶面网格线圆圈数量  
| topLineSteps     | Number   | 顶面网格线等分直径线数量  
| topStyle         | String   | 顶面的样式，flat：平面，curved：曲面                                                                                                     
| showScanner      | Boolean  | 是否显示扫描面                                                                                                 
| scannerColor     | String   | 扫描面颜色                                                                                                 
| scannerAlpha     | Number   | 扫描面透明度，0：完全透明；1：完全不透明                                                                                                 
| scannerMode      | String   | 扫描模式，circular：从源到目标的圆环波，subCycle：子锥体循环，subRandom：子锥体随机                                                            
| scannerDuration  | Number   | 扫描周期，一个周期所需的时间，（单位：秒）                                                                                                
| scannerRepeatMode  | String   | 扫描重复模式，backward：反向开始，startover：从头开始                                                                                               
| lookAtObj  | String   | 凝视目标的 对象Id。当前锥体rotation和半径会跟随目标坐标变化，自身位置不变。对象可以是model、building或者landmarker                                                                                                      

#### 回调数据

```json
{
  "result": 1,
  "message": "成功。"
}
```

#### 回调数据参数描述

| 属性    | 类型   | 说明                     |
| ------- | ------ | ------------------------ |
| result  | Number | 1：代表成功；0：代表失败 |
| message | String | 成功或者失败原因         |

[返回本章目录](#目录)

## 2.更新圆锥体 <span style="width: 40px;height: 21px;display:inline-block;background: #0fcccc;margin-left: 5px;line-height: 19px;"><span style="width: 100%;height: 100%;background: url(./img/stream.png) no-repeat 4px 5px;background-size: 12px 10px;text-indent: 22px;font-size: 12px;color: #ffffff;line-height: 20px;display:inline-block;vertical-align: top;">流</span></span>

### 功能描述

更新三维场景中添加圆锥体的数据

### 调用方法

```js
let jsonData = {   
  id: 'coneSensor',	
  coordType: 0,	
  coordTypeZ: 0,
  coord: [116.34599081794,40.08430867971],
  coordZ: 30,	
  angle: 20,
  length: 30,
  rotation: [20,80,90],
  lookAtObj: '11_SM_Residence_3',
};

appInstance.uniCall('updateConeSensorCoord', jsonData, (result) => {
  console.log(result);
});
```

#### 参数描述

| 属性             | 类型     | 说明                                                                                                                  
| ---------------- | -------- | --------------------------------------------------------------------------------------------------------------------- 
| id               | String   | 图层对象 id，更新时调用者自己传入的唯一标识                                                   
| coordType        | Number   | XY 轴坐标类别，0：X 经度，Y 纬度；1：X 米，Y米，相对世界00点                                                     
| coordTypeZ       | Number   | Z 轴坐标类别，0：相对 3D 世界 0 海拔；1：相对 3D 世界地表；2：相对 3D 模型表面（单位：米）                             
| coord            | Array    | XY 轴坐标，X：经度；Y：纬度                                                                                    
| coordZ           | Number   | Z 轴高度（单位：米）                                                                                           
| angle            | Number   | 圆锥体夹角，（单位：角度，0.1 - 120）                                                                        
| length           | Number   | 圆锥体半径长度，（单位：米）                                                                      
| rotation         | Array    | XYZ 三轴旋转度数 [偏航角（单位：角度，0正北, -360 ~ 360）, 俯仰角（单位：角度，0水平, -360 ~ 360）,翻滚角（单位：角度，0水平, -360 ~ 360）]    
| lookAtObj        | String   | 凝视目标的 对象Id。当前锥体rotation和半径会跟随目标坐标变化，自身位置不变。对象可以是model、building或者landmarker                                                                                   

#### 回调数据

```json
{
  "result": 1,
  "message": "成功。"
}
```

#### 回调数据参数描述

| 属性    | 类型   | 说明                     |
| ------- | ------ | ------------------------ |
| result  | Number | 1：代表成功；0：代表失败 |
| message | String | 成功或者失败原因         |

[返回本章目录](#目录)

## 3.更新圆锥体样式 <span style="width: 40px;height: 21px;display:inline-block;background: #0fcccc;margin-left: 5px;line-height: 19px;"><span style="width: 100%;height: 100%;background: url(./img/stream.png) no-repeat 4px 5px;background-size: 12px 10px;text-indent: 22px;font-size: 12px;color: #ffffff;line-height: 20px;display:inline-block;vertical-align: top;">流</span></span>

### 功能描述

更新三维场景中添加圆锥体的样式

### 调用方法

```js
let jsonData = {   
  id: 'coneSensor',
  alpha: 0.5,
  color: '#ffff00',
  outline: true,
  outlineColor: '#0000ff',
  topSurface: true,	
  topOutline: true,	
  topCircleSteps: 5,
  topLineSteps: 5,	
  topStyle: 'flat',	
  showScanner: true,
  scannerColor: '#00ffff',
  scannerAlpha: 0.9,
  scannerMode: 'circular',
  scannerDuration: 3,
  scannerRepeatMode: 'backward',
  lookAt: [116.34938119817, 40.08386868199, 20],
};

appInstance.uniCall('updateConeSensorStyle', jsonData, (result) => {
  console.log(result);
});
```

#### 参数描述

| 属性         | 类型   | 说明                                                                                                                                      
| ------------ | ------ | ----------------------------------------------------------------------------------------------------------------------------------------- 
| id           | String  | 图层对象 id，更新时调用者自己传入的唯一标识                                                  
| alpha        | Number  | 透明度，0：完全透明；1：完全不透明   
| color        | String   | 圆锥体颜色    
| outline          | Boolean  | 是否显示描边                                                                                              
| outlineColor     | String   | 描边颜色                                                                                                       
| topSurface       | Boolean  | 是否显示顶面                                                                                                     
| topOutline       | Boolean  | 是否显示顶面网格线 
| topCircleSteps   | Number   | 顶面网格线圆圈数量  
| topLineSteps     | Number   | 顶面网格线等分直径线数量  
| topStyle         | String   | 顶面的样式，flat：平面，curved：曲面                                                                                                     
| showScanner      | Boolean  | 是否显示扫描面                                                                                                
| scannerColor     | String   | 扫描面颜色                                                                                                 
| scannerAlpha     | Number   | 扫描面透明度，0：完全透明；1：完全不透明 
| scannerMode      | String   | 扫描模式，circular：从源到目标的圆环波，subCycle：子锥体循环，subRandom：子锥体随机             
| scannerDuration  | Number   | 扫描周期，一个周期所需的时间，（单位：秒）                                                                                                
| scannerRepeatMode  | String   | 扫描重复模式，backward：反向开始，startover：从头开始                                                                              
| lookAt  | Array   | 凝视目标的 XYZ 轴坐标，X：经度；Y：纬度，Z：海拔高度（单位：米）。当前锥体rotation会跟随目标坐标变化，自身位置不变                       

#### 回调数据

```json
{
  "result": 1,
  "message": "成功。"
}
```

#### 回调数据参数描述

| 属性    | 类型   | 说明                     |
| ------- | ------ | ------------------------ |
| result  | Number | 1：代表成功；0：代表失败 |
| message | String | 成功或者失败原因         |

[返回本章目录](#目录)

## 4.删除圆锥体 <span style="width: 40px;height: 21px;display:inline-block;background: #0fcccc;margin-left: 5px;line-height: 19px;"><span style="width: 100%;height: 100%;background: url(./img/stream.png) no-repeat 4px 5px;background-size: 12px 10px;text-indent: 22px;font-size: 12px;color: #ffffff;line-height: 20px;display:inline-block;vertical-align: top;">流</span></span>

### 功能描述

删除三维场景中的圆锥体

### 调用方法

```js
let jsonData = {
  id: 'coneSensor',
};

appInstance.uniCall('removeModel', jsonData, (result) => {
  console.log(result);
});
```

#### 参数描述

| 属性         | 类型   | 说明                                                                                                                                      
| ------------ | ------ | ----------------------------------------------------------------------------------------------------------------------------------------- 
| id           | String  | 模型对象 id，新建时调用者自己传入的唯一标识，用于各种操作的对象识别                                                                                  

#### 回调数据

```json
{
  "result": 1,
  "message": "成功。"
}
```

#### 回调数据参数描述

| 属性    | 类型   | 说明                     |
| ------- | ------ | ------------------------ |
| result  | Number | 1：代表成功；0：代表失败 |
| message | String | 成功或者失败原因         |

[返回本章目录](#目录)
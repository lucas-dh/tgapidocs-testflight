# 等高线分析操作

## 目录

- [1.添加等高线分析](#1添加等高线分析-流)
- [2.更新等高线分析](#2更新等高线分析-流)
- [3.更新等高线分析样式](#3更新等高线分析样式-流)
- [4.获取等高线海拔](#4获取等高线海拔-流)
- [5.删除等高线分析](#5删除等高线分析-流)

## 1.添加等高线分析 <span style="width: 40px;height: 21px;display:inline-block;background: #0fcccc;margin-left: 5px;line-height: 19px;"><span style="width: 100%;height: 100%;background: url(./img/stream.png) no-repeat 4px 5px;background-size: 12px 10px;text-indent: 22px;font-size: 12px;color: #ffffff;line-height: 20px;display:inline-block;vertical-align: top;">流</span></span>

### 功能描述

在三维场景中添加等高线分析

### 调用方法

```js
let jsonData = {
  id: 'contourline',
  areaId: 'areaId',
  lineSpacing: 100,
  lineWidth: 1,
  lineColor: '#ff0000',
  lineAlpha: 0.5,
  surfaceType: 'none',
  surfaceStep: [0, 0.05, 0.1, 0.4, 0.5, 1.0],
  surfaceColor: [
    '#FF0000',
    '#990000',
    '#993300',
    '#336600',
    '#009900',
    '#00FF00',
  ],
};

appInstance.uniCall('addContourLine', jsonData, (result) => {
  console.log(result);
});
```

#### 参数描述

| 属性         | 类型   | 说明                                                                                                             |
| ------------ | ------ | ---------------------------------------------------------------------------------------------------------------- |
| id           | String | 对象 id，新建时调用者自己传入的唯一标识，用于各种操作的对象识别                                                  |
| areaId       | String | 分析对应的区域，添加分析完成后，原 Area 对象可以删除或者隐藏                                                     |
| lineSpacing  | Number | 等高线高度间距（单位：米）                                                                                       |
| lineWidth    | Number | 等高线宽度（单位：像素 px），如果是 0 则不显示线                                                                 |
| lineColor    | String | 等高线的颜色（HEX 颜色值）                                                                                       |
| lineAlpha    | Number | 等高线的透明度，0：完全透明；1：完全不透明                                                                       |
| surfaceType  | String | 地表渲染类型，"none"：无，"elevation"：高程，"slope"：坡度，"aspect"：坡向                                       |
| surfaceStep  | Array  | 地表渲染颜色渐变分段，当前范围高程或坡度最小值对应 0，当前范围最大值为 1.0，坡向正南为 0，顺时针越大，最大为 1.0 |
| surfaceColor | Array  | 地表渲染颜色渐变分段，根据 surfaceStep 分段后的颜色                                                              |

#### 回调数据

```json
{
  "result": 1,
  "message": "成功。"
}
```

#### 回调数据参数描述

| 属性    | 类型   | 说明                     |
| ------- | ------ | ------------------------ |
| result  | Number | 1：代表成功；0：代表失败 |
| message | String | 成功或者失败原因         |

[返回本章目录](#目录)

## 2.更新等高线分析 <span style="width: 40px;height: 21px;display:inline-block;background: #0fcccc;margin-left: 5px;line-height: 19px;"><span style="width: 100%;height: 100%;background: url(./img/stream.png) no-repeat 4px 5px;background-size: 12px 10px;text-indent: 22px;font-size: 12px;color: #ffffff;line-height: 20px;display:inline-block;vertical-align: top;">流</span></span>

### 功能描述

更新三维场景中添加等高线分析的数据

### 调用方法

```js
let jsonData = {
  id: 'contourline',
  areaId: 'areaId',
};
appInstance.uniCall('updateContourLine', jsonData, (result) => {
  console.log(result);
});
```

#### 参数描述

| 属性   | 类型   | 说明                                                             |
| ------ | ------ | ---------------------------------------------------------------- |
| id     | String | 对象 id，新建时调用者自己传入的唯一标识，用于各种操作的对象识别  |
| areaId | String | 淹没分析对应的区域，添加分析完成后，原 Area 对象可以删除或者隐藏 |

#### 回调数据

```json
{
  "result": 1,
  "message": "成功。"
}
```

#### 回调数据参数描述

| 属性    | 类型   | 说明                     |
| ------- | ------ | ------------------------ |
| result  | Number | 1：代表成功；0：代表失败 |
| message | String | 成功或者失败原因         |

[返回本章目录](#目录)

## 3.更新等高线分析样式 <span style="width: 40px;height: 21px;display:inline-block;background: #0fcccc;margin-left: 5px;line-height: 19px;"><span style="width: 100%;height: 100%;background: url(./img/stream.png) no-repeat 4px 5px;background-size: 12px 10px;text-indent: 22px;font-size: 12px;color: #ffffff;line-height: 20px;display:inline-block;vertical-align: top;">流</span></span>

### 功能描述

更新三维场景中添加等高线分析的样式

### 调用方法

```js
let jsonData = {
  id: 'contourline',
  lineSpacing: 100,
  lineWidth: 1,
  lineColor: '#ff0000',
  lineAlpha: 0.5,
  surfaceType: 'none',
  surfaceStep: [0, 0.05, 0.1, 0.4, 0.5, 1.0],
  surfaceColor: [
    '#FF0000',
    '#990000',
    '#993300',
    '#336600',
    '#009900',
    '#00FF00',
  ],
};

appInstance.uniCall('updateContourLineStyle', jsonData, (result) => {
  console.log(result);
});
```

#### 参数描述

| 属性         | 类型   | 说明                                                                                                             |
| ------------ | ------ | ---------------------------------------------------------------------------------------------------------------- |
| id           | String | 对象 id，新建时调用者自己传入的唯一标识，用于各种操作的对象识别                                                  |
| lineSpacing  | Number | 等高线间距（单位：米）                                                                                           |
| lineWidth    | Number | 等高线宽度（单位：像素 px），如果是 0 则不显示线                                                                 |
| lineColor    | String | 等高线的颜色（HEX 颜色值）                                                                                       |
| lineAlpha    | Number | 等高线的透明度，0：完全透明；1：完全不透明                                                                       |
| surfaceType  | String | 地表渲染类型，"none"：无，"elevation"：高程，"slope"：坡度，"aspect"：坡向                                       |
| surfaceStep  | Array  | 地表渲染颜色渐变分段，当前范围高程或坡度最小值对应 0，当前范围最大值为 1.0，坡向正南为 0，顺时针越大，最大为 1.0 |
| surfaceColor | Array  | 地表渲染颜色渐变分段，根据 surfaceStep 分段后的颜色                                                              |

#### 回调数据

```json
{
  "result": 1,
  "message": "成功。"
}
```

#### 回调数据参数描述

| 属性    | 类型   | 说明                     |
| ------- | ------ | ------------------------ |
| result  | Number | 1：代表成功；0：代表失败 |
| message | String | 成功或者失败原因         |

[返回本章目录](#目录)

## 4.获取等高线海拔 <span style="width: 40px;height: 21px;display:inline-block;background: #0fcccc;margin-left: 5px;line-height: 19px;"><span style="width: 100%;height: 100%;background: url(./img/stream.png) no-repeat 4px 5px;background-size: 12px 10px;text-indent: 22px;font-size: 12px;color: #ffffff;line-height: 20px;display:inline-block;vertical-align: top;">流</span></span>

### 功能描述

获取三维场景中的等高线海拔

### 调用方法

```js
let jsonData = {
  id: 'contourline',
  startCoord: [-119.996727949506, 49.20291396513011],
  startCoordZ: 128,
  targetCoord: [-119.997924949506, 49.21058496513011],
  targetCoordZ: 204,
  lineSpacing: 100,
};

appInstance.uniCall('getContourLineAltitude', jsonData, (result) => {
  console.log(result);
});
```

#### 参数描述

| 属性         | 类型   | 说明                                                            |
| ------------ | ------ | --------------------------------------------------------------- |
| id           | String | 对象 id，新建时调用者自己传入的唯一标识，用于各种操作的对象识别 |
| startCoord   | Array  | 起点 XY 轴坐标，X：经度；Y：纬度                                |
| startCoordZ  | Number | 起点 Z 轴高度（单位：米）                                       |
| targetCoord  | Array  | 终点 XY 轴坐标，X：经度；Y：纬度                                |
| targetCoordZ | Number | 终点 Z 轴高度（单位：米）                                       |
| lineSpacing  | Number | 需要获取的等高线间距（单位：米）                                |

#### 回调数据

```json
{
  "result": 1,
  "message": "成功。",
  "data": [
    {
      "coord": [114.560257, 37.19079],
      "coordZ": 150
    },
    {
      "coord": [114.540247, 37.23079],
      "coordZ": 200
    }
  ]
}
```

#### 回调数据参数描述

| 属性           | 类型   | 说明                        |
| -------------- | ------ | --------------------------- |
| result         | Number | 1：代表成功；0：代表失败    |
| message        | String | 成功或者失败原因            |
| data           | Array  | 数据点位基本信息集合        |
| data[0].coord  | Array  | XY 轴坐标，X：经度；Y：纬度 |
| data[1].coordZ | Number | Z 轴高度（单位：米）        |

[返回本章目录](#目录)

## 5.删除等高线分析 <span style="width: 40px;height: 21px;display:inline-block;background: #0fcccc;margin-left: 5px;line-height: 19px;"><span style="width: 100%;height: 100%;background: url(./img/stream.png) no-repeat 4px 5px;background-size: 12px 10px;text-indent: 22px;font-size: 12px;color: #ffffff;line-height: 20px;display:inline-block;vertical-align: top;">流</span></span>

### 功能描述

删除三维场景中的等高线分析

### 调用方法

```js
let jsonData = {
  id: 'contourline',
};

appInstance.uniCall('removeModel', jsonData, (result) => {
  console.log(result);
});
```

#### 参数描述

| 属性 | 类型   | 说明                                        |
| ---- | ------ | ------------------------------------------- |
| id   | String | 图层对象 id，更新时调用者自己传入的唯一标识 |

#### 回调数据

```json
{
  "result": 1,
  "message": "成功。"
}
```

#### 回调数据参数描述

| 属性    | 类型   | 说明                     |
| ------- | ------ | ------------------------ |
| result  | Number | 1：代表成功；0：代表失败 |
| message | String | 成功或者失败原因         |

[返回本章目录](#目录)

# 视线分析操作

## 目录

- [1.添加视线分析](#1添加视线分析-流)
- [2.更新视线分析](#2更新视线分析-流)
- [3.更新视线分析样式](#3更新视线分析样式-流)
- [4.删除视线分析](#4删除视线分析-流)

## 1.添加视线分析 <span style="width: 40px;height: 21px;display:inline-block;background: #0fcccc;margin-left: 5px;line-height: 19px;"><span style="width: 100%;height: 100%;background: url(./img/stream.png) no-repeat 4px 5px;background-size: 12px 10px;text-indent: 22px;font-size: 12px;color: #ffffff;line-height: 20px;display:inline-block;vertical-align: top;">流</span></span>

### 功能描述

在三维场景中添加视线分析

### 调用方法

```js
let jsonData = {
  id: 'sightline',
  coordType: 0,
  coordTypeZ: 0,
  coord: [103.995697, 1.399239],
  coordZ: 150,
  coordTarget: [103.995697, 1.399239],
  coordZTarget: 150,
  visible: true,
  lineAlpha: 0.5,
  lineWidth: 2,
  invisibleColor: '#ff0000',
  visibleColor: '#00ff00',
};

appInstance.uniCall('addSightLine', jsonData, (result) => {
  console.log(result);
});
```

#### 参数描述

| 属性           | 类型    | 说明                                                                                       |
| -------------- | ------- | ------------------------------------------------------------------------------------------ |
| id             | String  | 对象 id，新建时调用者自己传入的唯一标识，用于各种操作的对象识别                            |
| coordType      | Number  | XY 轴坐标类别，0：X 经度，Y 纬度；1：X 米，Y 米，相对世界 00 点                            |
| coordTypeZ     | Number  | Z 轴坐标类别，0：相对 3D 世界 0 海拔；1：相对 3D 世界地表；2：相对 3D 模型表面（单位：米） |
| coord          | Array   | 观察点 XY 轴坐标，X：经度；Y：纬度                                                         |
| coordZ         | Number  | 观察点 Z 轴高度（单位：米）                                                                |
| coordTarget    | Array   | 目标点 XY 轴坐标，X：经度；Y：纬度                                                         |
| coordZTarget   | Number  | 目标点 Z 轴高度（单位：米）                                                                |
| visible        | Boolean | 初始化添加时的默认值，true：显示，false：隐藏                                              |
| lineAlpha      | Number  | 视线透明度，0：完全透明；1：完全不透明                                                     |
| lineWidth      | Number  | 视线宽度（矢量线，单位：像素）                                                             |
| invisibleColor | String  | 不可见区域颜色                                                                             |
| visibleColor   | String  | 可见区域颜色                                                                               |

#### 回调数据

```json
{
  "result": 1,
  "message": "成功。"
}
```

#### 回调数据参数描述

| 属性    | 类型   | 说明                     |
| ------- | ------ | ------------------------ |
| result  | Number | 1：代表成功；0：代表失败 |
| message | String | 成功或者失败原因         |

[返回本章目录](#目录)

## 2.更新视线分析 <span style="width: 40px;height: 21px;display:inline-block;background: #0fcccc;margin-left: 5px;line-height: 19px;"><span style="width: 100%;height: 100%;background: url(./img/stream.png) no-repeat 4px 5px;background-size: 12px 10px;text-indent: 22px;font-size: 12px;color: #ffffff;line-height: 20px;display:inline-block;vertical-align: top;">流</span></span>

### 功能描述

更新三维场景中添加视线分析的数据

### 调用方法

```js
let jsonData = {
  id: 'sightline',
  coordType: 0,
  coordTypeZ: 0,
  coord: [103.995697, 1.399239],
  coordZ: 150,
  coordTarget: [103.995697, 1.399239],
  coordZTarget: 150,
};
appInstance.uniCall('updateSightLine', jsonData, (result) => {
  console.log(result);
});
```

#### 参数描述

| 属性         | 类型   | 说明                                                                                       |
| ------------ | ------ | ------------------------------------------------------------------------------------------ |
| id           | String | 对象 id，新建时调用者自己传入的唯一标识，用于各种操作的对象识别                            |
| coordType    | Number | XY 轴坐标类别，0：X 经度，Y 纬度；1：X 米，Y 米，相对世界 00 点                            |
| coordTypeZ   | Number | Z 轴坐标类别，0：相对 3D 世界 0 海拔；1：相对 3D 世界地表；2：相对 3D 模型表面（单位：米） |
| coord        | Array  | 观察点 XY 轴坐标，X：经度；Y：纬度                                                         |
| coordZ       | Number | 观察点 Z 轴高度（单位：米）                                                                |
| coordTarget  | Array  | 目标点 XY 轴坐标，X：经度；Y：纬度                                                         |
| coordZTarget | Number | 目标点 Z 轴高度（单位：米）                                                                |

#### 回调数据

```json
{
  "result": 1,
  "message": "成功。"
}
```

#### 回调数据参数描述

| 属性    | 类型   | 说明                     |
| ------- | ------ | ------------------------ |
| result  | Number | 1：代表成功；0：代表失败 |
| message | String | 成功或者失败原因         |

[返回本章目录](#目录)

## 3.更新视线分析样式 <span style="width: 40px;height: 21px;display:inline-block;background: #0fcccc;margin-left: 5px;line-height: 19px;"><span style="width: 100%;height: 100%;background: url(./img/stream.png) no-repeat 4px 5px;background-size: 12px 10px;text-indent: 22px;font-size: 12px;color: #ffffff;line-height: 20px;display:inline-block;vertical-align: top;">流</span></span>

### 功能描述

更新三维场景中添加视线分析的样式

### 调用方法

```js
let jsonData = {
  id: 'sightline', 
  visible: true, 
  lineAlpha: 0.5, 
  lineWidth: 2, 
  invisibleColor: '#ff0000', 
  visibleColor: '#00ff00', 
};

appInstance.uniCall('updateSightLineStyle', jsonData, (result) => {
  console.log(result);
});
```

#### 参数描述

| 属性           | 类型    | 说明                                          |
| -------------- | ------- | --------------------------------------------- |
| id             | String  | 图层对象 id，更新时调用者自己传入的唯一标识   |
| visible        | Boolean | 初始化添加时的默认值，true：显示，false：隐藏 |
| lineAlpha      | Number  | 视线透明度，0：完全透明；1：完全不透明        |
| lineWidth      | Number  | 视线宽度（矢量线，单位：像素）                |
| invisibleColor | String  | 不可见区域颜色                                |
| visibleColor   | String  | 可见区域颜色                                  |

#### 回调数据

```json
{
  "result": 1,
  "message": "成功。"
}
```

#### 回调数据参数描述

| 属性    | 类型   | 说明                     |
| ------- | ------ | ------------------------ |
| result  | Number | 1：代表成功；0：代表失败 |
| message | String | 成功或者失败原因         |

[返回本章目录](#目录)

## 4.删除视线分析 <span style="width: 40px;height: 21px;display:inline-block;background: #0fcccc;margin-left: 5px;line-height: 19px;"><span style="width: 100%;height: 100%;background: url(./img/stream.png) no-repeat 4px 5px;background-size: 12px 10px;text-indent: 22px;font-size: 12px;color: #ffffff;line-height: 20px;display:inline-block;vertical-align: top;">流</span></span>

### 功能描述

删除三维场景中的视线分析

### 调用方法

```js
let jsonData = {
  id: 'sightline',
};

appInstance.uniCall('removeModel', jsonData, (result) => {
  console.log(result);
});
```

#### 参数描述

| 属性 | 类型   | 说明                                        |
| ---- | ------ | ------------------------------------------- |
| id   | String | 图层对象 id，更新时调用者自己传入的唯一标识 |

#### 回调数据

```json
{
  "result": 1,
  "message": "成功。"
}
```

#### 回调数据参数描述

| 属性    | 类型   | 说明                     |
| ------- | ------ | ------------------------ |
| result  | Number | 1：代表成功；0：代表失败 |
| message | String | 成功或者失败原因         |

[返回本章目录](#目录)

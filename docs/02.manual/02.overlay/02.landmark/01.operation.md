# 地标点操作

## 目录

- [1.添加地标点](#1添加地标点)
- [2.更新地标点数据](#2更新地标点数据)
- [3.更新地标点样式](#3更新地标点样式)
- [4.查询地标点屏幕位置](#4查询地标点屏幕位置)
- [5.删除地标点](#5删除地标点)

## 1.添加地标点

### 功能描述

在三维场景中添加地标点

### 调用方法

```js
let jsonData = {
  id: 'landmark',
  coordType: 0,
  coordTypeZ: 0,
  iconName: 'utilitypole',
  autoScale: false,
  visible: true,
  label: '电线杆',
  iconScale: 1,
  labelScale: 1,
  tags: ['tag1', 'tag2', 'tag3'],
  coord: [113.94171988006201, 22.5162698894782], //以深圳湾经纬度为例
  coordZ: 64,
};

appInstance.uniCall('addLandmark', jsonData, (result) => {
  console.log(result);
});
```

#### 参数描述

| 属性       | 类型     | 说明                                                                                                                  | 端渲染 | 流渲染 |
| ---------- | -------- | --------------------------------------------------------------------------------------------------------------------- | ------ | ------ |
| id         | String   | 图层 ID （唯一标识）                                                                                                  | 支持   | 支持   |
| coordType  | Number   | XY 轴坐标类别，0：X 经度，Y 纬度；1：X 米，Y 米，相对世界 00 点                                                       | 支持   | 支持   |
| coordTypeZ | Number   | Z 轴坐标类别，0：相对 3D 世界 0 海拔；1：相对 3D 世界地表；2：相对 3D 模型表面（单位：米） 目前该属性仅支持属性值为 0 | 支持   | 支持   |
| iconName   | String   | 内置图标名称，或根据项目，在场景中预置好的图标对象的名称，包含文字样式定义，具体图标名称参考下表和下图                | 支持   | 支持   |
| autoScale  | Boolean  | 如果开启后，图标会按照摄像机远近自动缩放大小                                                                          | 支持   | 支持   |
| visible    | Boolean  | 添加当前图层时默认显示还是隐藏                                                                                        | 支持   | 支持   |
| label      | String   | 图标标签文本                                                                                                          | 支持   | 支持   |
| iconScale  | Number   | 默认值是 1 表示原大，0 - 1：表示缩小倍率，大于 1：表示放大倍率                                                        | 支持   | 支持   |
| labelScale | Number   | 默认值是 1 表示原大，0 - 1：表示缩小倍率，大于 1：表示放大倍率                                                        | 支持   | 支持   |
| tags       | Anything | 用户自定标签数组，用于保存用户的扩展数据，或者可以控制显隐                                                            | 不支持 | 支持   |
| coord      | Array    | XY 轴坐标，X：经度；Y：纬度                                                                                           | 支持   | 支持   |
| coordZ     | Number   | Z 轴高度（单位：米）                                                                                                  | 支持   | 支持   |

#### 回调数据

```json
{
  "result": 1,
  "message": "成功。"
}
```

#### 回调数据参数描述

| 属性    | 类型   | 说明                     |
| ------- | ------ | ------------------------ |
| result  | Number | 1：代表成功；0：代表失败 |
| message | String | 成功或者失败原因         |

### 具体内置图标名称（iconName）详情

<table>
    <tr>
      <th>图标类型</th>
      <th>图标名称</th>
    </tr>
    <tr>
      <td rowspan="15" style="text-align:left;">市政设施</td>
      <td>camera</td>
    </tr>
    <tr>
      <td>streetlamp</td>
    </tr>
    <tr>
      <td>manholecover</td>
    </tr>
    <tr>
      <td>sensor</td>
    </tr>
    <tr>
      <td>utilitypole</td>
    </tr>
    <tr>
      <td>transmission</td>
    </tr>
    <tr>
      <td>broadcast</td>
    </tr>
    <tr>
      <td>wifi</td>
    </tr>
    <tr>
      <td>firehydrant</td>
    </tr>
    <tr>
      <td>equipmentbox</td>
    </tr>
    <tr>
      <td>trafficlight</td>
    </tr>
    <tr>
      <td>charge</td>
    </tr>
    <tr>
      <td>gasstation</td>
    </tr>
    <tr>
      <td>wc</td>
    </tr>
    <tr>
      <td>dustbin</td>
    </tr>
    <tr>
      <td rowspan="20" style="text-align:left;">地点建筑</td>
      <td>trainstation</td>
    </tr>
    <tr>
      <td>airport</td>
    </tr>
    <tr>
      <td>anchor</td>
    </tr>
    <tr>
      <td>government</td>
    </tr>
    <tr>
      <td>netpoint</td>
    </tr>
    <tr>
      <td>metro</td>
    </tr>
    <tr>
      <td>finance</td>
    </tr>
    <tr>
      <td>school</td>
    </tr>
    <tr>
      <td>hospital</td>
    </tr>
    <tr>
      <td>factory</td>
    </tr>
    <tr>
      <td>constructionsite</td>
    </tr>
    <tr>
      <td>residence</td>
    </tr>
    <tr>
      <td>mergencyshelter</td>
    </tr>
    <tr>
      <td>park</td>
    </tr>
    <tr>
      <td>diningroom</td>
    </tr>
    <tr>
      <td>warehouse</td>
    </tr>
    <tr>
      <td>store</td>
    </tr>
    <tr>
      <td>tollgate</td>
    </tr>
    <tr>
      <td>officebuilding</td>
    </tr>
    <tr>
      <td>busstation</td>
    </tr>
    <tr>
      <td rowspan="5" style="text-align:left;">人员</td>
      <td>people</td>
    </tr>
    <tr>
      <td>policeman</td>
    </tr>
    <tr>
      <td>doctor</td>
    </tr>
    <tr>
      <td>specialpeople</td>
    </tr>
    <tr>
      <td>criminal</td>
    </tr>
    <tr>
      <td rowspan="15" style="text-align:left;">交通</td>
      <td>car</td>
    </tr>
    <tr>
      <td>policecar</td>
    </tr>
    <tr>
      <td>fireengine</td>
    </tr>
    <tr>
      <td>ambulance</td>
    </tr>
    <tr>
      <td>taxi</td>
    </tr>
    <tr>
      <td>truck</td>
    </tr>
    <tr>
      <td>bus</td>
    </tr>
    <tr>
      <td>newscar</td>
    </tr>
    <tr>
      <td>militarycar</td>
    </tr>
    <tr>
      <td>municipal</td>
    </tr>
    <tr>
      <td>electriccar</td>
    </tr>
    <tr>
      <td>watercar</td>
    </tr>
    <tr>
      <td>train</td>
    </tr>
    <tr>
      <td>ship</td>
    </tr>
    <tr>
      <td>cargoship</td>
    </tr>
    <tr>
      <td rowspan="5" style="text-align:left;">飞行器</td>
      <td>airplane</td>
    </tr>
    <tr>
      <td>helicopter</td>
    </tr>
    <tr>
      <td>uav</td>
    </tr>
    <tr>
      <td>satellite</td>
    </tr>
    <tr>
      <td>rocket</td>
    </tr>
    <tr>
      <td rowspan="3" style="text-align:left;">事件</td>
      <td>event_01</td>
    </tr>
    <tr>
      <td>event_02</td>
    </tr>
    <tr>
      <td>event_03</td>
    </tr>
    <tr>
      <td rowspan="4" style="text-align:left;">通用</td>
      <td>icon_01</td>
    </tr>
    <tr>
      <td>icon_02</td>
    </tr>
    <tr>
      <td>icon_03</td>
    </tr>
    <tr>
      <td>icon_04</td>
    </tr>
    <tr>
      <td rowspan="3" style="text-align:left;">地名</td>
      <td>site_01</td>
    </tr>
    <tr>
      <td>site_02</td>
    </tr>
    <tr>
      <td>site_03</td>
    </tr>
</table>

### 具体内置图标名称（iconName）效果

<img src="./contents/mediaFiles/images/iconName.jpg" width = "1344" height = "765" alt="图标效果" />

[返回本章目录](#目录)

## 2.更新地标点数据

### 功能描述

更新三维场景中地标点数据

### 调用方法

```js
let jsonData = {
  id: 'landmark',
  coordType: 0,
  coordTypeZ: 0,
  tags: ['tag1', 'tag2', 'tag3'], // 用户自定标签数组，用于保存用户的扩展数据，或者可以控制显隐
  coord: [113.934336750075, 22.510934971088503], //以深圳湾经纬度为例
  coordZ: 100,
};

appInstance.uniCall('updateLandmarkCoord', jsonData, (result) => {
  console.log(result);
});
```

#### 参数描述

| 属性       | 类型     | 说明                                                                                                                  | 端渲染 | 流渲染 |
| ---------- | -------- | --------------------------------------------------------------------------------------------------------------------- | ------ | ------ |
| id         | String   | 图层对象 id，新建时调用者自己传入的唯一标识，用于各种操作的对象识别                                                   | 支持   | 支持   |
| coordType  | Number   | XY 轴坐标类别，0：X 经度，Y 纬度；1：X 米，Y 米，相对世界 00 点                                                       | 支持   | 支持   |
| coordTypeZ | Number   | Z 轴坐标类别，0：相对 3D 世界 0 海拔；1：相对 3D 世界地表；2：相对 3D 模型表面（单位：米） 目前该属性仅支持属性值为 0 | 支持   | 支持   |
| tags       | Anything | 用户自定标签数组，用于保存用户的扩展数据，或者可以控制显隐                                                            | 不支持 | 支持   |
| coord      | Array    | XY 轴坐标，X：经度；Y：纬度                                                                                           | 支持   | 支持   |
| coordZ     | Number   | Z 轴高度（单位：米）                                                                                                  | 支持   | 支持   |

#### 回调数据

```json
{
  "result": 1,
  "message": "成功。"
}
```

#### 回调数据参数描述

| 属性    | 类型   | 说明                     |
| ------- | ------ | ------------------------ |
| result  | Number | 1：代表成功；0：代表失败 |
| message | String | 成功或者失败原因         |

[返回本章目录](#目录)

## 3.更新地标点样式

### 功能描述

更新三维场景中地标点样式

### 调用方法

```js
let jsonData = {
  id: 'landmark',
  iconName: 'firehydrant',
  iconScale: 1,
  labelScale: 1,
  label: '消防栓',
};

appInstance.uniCall('updateLandmarkStyle', jsonData, (result) => {
  console.log(result);
});
```

#### 参数描述

| 属性       | 类型   | 说明                                                                                                   |
| ---------- | ------ | ------------------------------------------------------------------------------------------------------ |
| id         | String | 图层对象 id，新建时调用者自己传入的唯一标识，用于各种操作的对象识别                                    |
| iconName   | String | 内置图标名称，或根据项目，在场景中预置好的图标对象的名称，包含文字样式定义，具体图标名称参考上表和上图 |
| iconScale  | Number | 默认值是 1 表示原大，0 - 1：表示缩小倍率，大于 1：表示放大倍率                                         |
| labelScale | Number | 默认值是 1 表示原大，0 - 1：表示缩小倍率，大于 1：表示放大倍率                                         |
| label      | String | 图标标签文本                                                                                           |

#### 回调数据

```json
{
  "result": 1,
  "message": "成功。"
}
```

#### 回调数据参数描述

| 属性    | 类型   | 说明                     |
| ------- | ------ | ------------------------ |
| result  | Number | 1：代表成功；0：代表失败 |
| message | String | 成功或者失败原因         |

[返回本章目录](#目录)

## 4.查询地标点屏幕位置

### 功能描述

查询地标点在屏幕上位置

### 调用方法

```js
let jsonData = { id: 'addLandmark1' };

appInstance.uniCall('getLandmarkScreenPosition', jsonData, (result) => {
  console.log(result);
});
```

#### 参数描述

| 属性 | 类型   | 说明                                                                |
| ---- | ------ | ------------------------------------------------------------------- |
| id   | String | 图层对象 id，新建时调用者自己传入的唯一标识，用于各种操作的对象识别 |

查询地标点 基于控件矩形区域的 左上角，右上角的位置<br>
基于 3D 世界渲染窗口左上角比值<br>
基于 3D 世界渲染窗口右下角比值

#### 回调数据

```json
{
  "result": 1,
  "message": "成功。",
  "id": "addLandmark1",
  "ndc": [0.6691358024691358, 0.5272952853598015],
  "screenPosition": [271, 425]
}
```

#### 回调数据参数描述

| 属性           | 类型   | 说明                                                                |
| -------------- | ------ | ------------------------------------------------------------------- |
| result         | Number | 1：代表成功；0：代表失败                                            |
| message        | String | 成功或者失败原因                                                    |
| id             | String | 图层对象 id，新建时调用者自己传入的唯一标识，用于各种操作的对象识别 |
| ndc            | Array  | Native Device Coordinate：左上角为 -1, -1，右下角为 1, 1            |
| screenPosition | Array  | 屏幕像素坐标，左上角为 0, 0                                         |

[返回本章目录](#目录)

## 5.删除地标点

### 功能描述

删除地标点

### 调用方法

```js
let jsonData = {
  id: 'landmark',
  overlayType: 'landmark',
};

appInstance.uniCall('removeOverlay', jsonData, (result) => {
  console.log(result);
});
```

#### 参数描述

| 属性        | 类型   | 说明                                                                |
| ----------- | ------ | ------------------------------------------------------------------- |
| id          | String | 图层对象 id，新建时调用者自己传入的唯一标识，用于各种操作的对象识别 |
| overlayType | String | 图层对象类别                                                        |

#### 回调数据

```json
{
  "result": 1,
  "message": "成功。"
}
```

#### 回调数据参数描述

| 属性    | 类型   | 说明                     |
| ------- | ------ | ------------------------ |
| result  | Number | 1：代表成功；0：代表失败 |
| message | String | 成功或者失败原因         |

### 流渲染效果图

<img src="./contents/mediaFiles/images/landmark/landmark-Streaming.jpg" width = "544" height="405" alt="系统架构图" />

### 端渲染效果图

<img src="./contents/mediaFiles/images/landmark/landmark.png" width = "544" height="405" alt="系统架构图" />

[返回本章目录](#目录)

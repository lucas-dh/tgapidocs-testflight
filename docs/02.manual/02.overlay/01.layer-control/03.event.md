# 图层控制事件

## 目录

- [1.矩形框选覆盖物结果](#1矩形框选覆盖物结果)
- [2.圆形框选覆盖物结果](#2圆形框选覆盖物结果)
- [3.多边形框选覆盖物结果](#3多边形框选覆盖物结果)
- [4.点击覆盖物结果](#4点击覆盖物结果)
- [5.点击类别覆盖物结果](#5点击类别覆盖物结果)
- [6.根据区域点击图层结果](#6根据区域点击图层结果)

## 1.矩形框选覆盖物结果

### 功能描述

矩形框选覆盖物结果

### 调用方法

```js
appInstance.uniCall(
  'addEventListener',
  {
    eventName: 'onRectOverlaySelectionResult',
    callback: function (event) {
      console.log(event);
    },
  },
  (result) => {
    console.log(result);
  }
);
```

#### 回调数据

```json
{
  "type": "landmark",
  "data": [
    {
      "id": "objId1"
    },
    {
      "id": "objId2"
    }
  ],
  "layers": [ 
    {
      "layerId": "layer1",
      "type": "landmark",
      "objIds": ["obj1", "obj2", "obj3"]
      }, {
      "layerId": "layer2",
      "type": "traillayer",
      "objIds": ["obj4", "obj5", "obj6"]
      }
    ],
    "coordZ": 150,
    "points": [
        {
           "coord":  [113.320381,23.108027]
        },
        {
           "coord":  [113.320122,23.104624]
        },
        {
           "coord":  [113.320222,23.104224]
        },
        {
           "coord":  [113.322266,23.104511]
        }
    ]


}
```

#### 回调数据参数描述

| 属性       | 类型   | 说明               |
| ---------- | ------ | ------------------ |
| type       | String | 图层类型           |
| data       | Array  | 数据点位基本信息集 |
| data[0].id | String | 图层 id            |
| layers | Array |  新的返回接口格式，如果有多个type的图层选择，通过数组的结果返回，如果只有一个类型图层的一个目标选中，也会返回。            |
| layers[0].layerId | String |  图层名称            |
| layers[0].type | String |  图层类型           |
| layers[0].objIds | Array |  图层中选中对象的id           |
| coordZ | Number |  框选范围的最低点海拔高度，单位：米            |
| points | Array |  框选范围的区域边界点，固定为4个            |
| points[0].coord | Array |  XY 轴坐标，X：经度；Y：纬度            |

[返回本章目录](#目录)

## 2.圆形框选覆盖物结果

### 功能描述

圆形框选覆盖物结果

### 调用方法

```js
appInstance.uniCall(
  'addEventListener',
  {
    eventName: 'onCircleOverlaySelectionResult',
    callback: function (event) {
      console.log(event);
    },
  },
  (result) => {
    console.log(result);
  }
);
```

#### 回调数据

```json
{
  "type": "landmark",
  "data": [
    {
      "id": "objId1"
    },
    {
      "id": "objId2"
    }
  ],
  "layers": [ 
    {
      "layerId": "layer1",
      "type": "landmark",
      "objIds": ["obj1", "obj2", "obj3"]
      }, {
      "layerId": "layer2",
      "type": "traillayer",
      "objIds": ["obj4", "obj5", "obj6"]
      }
    ],
    "coordZ": 150,
    "center": [114.564452,37.099861],
    "radius": 100
}
```

#### 回调数据参数描述

| 属性       | 类型   | 说明               |
| ---------- | ------ | ------------------ |
| type       | String | 图层类型           |
| data       | Array  | 数据点位基本信息集 |
| data[0].id | String | 图层 id            |
| layers | Array |  新的返回接口格式，如果有多个type的图层选择，通过数组的结果返回，如果只有一个类型图层的一个目标选中，也会返回。            |
| layers[0].layerId | String |  图层名称            |
| layers[0].type | String |  图层类型           |
| layers[0].objIds | Array |  图层中选中对象的id           |
| coordZ | Number |  框选范围的最低点海拔高度，单位：米            |
| center | Array | 圆形框选范围圆心 XY 轴坐标，X：经度；Y：纬度            |
| radius | Number |   圆形框选范围半径（单位：米）            |


[返回本章目录](#目录)

## 3.多边形框选覆盖物结果

### 功能描述

多边形框选覆盖物结果

### 调用方法

```js
appInstance.uniCall(
  'addEventListener',
  {
    eventName: 'onPolygonOverlaySelectionResult',
    callback: function (event) {
      console.log(event);
    },
  },
  (result) => {
    console.log(result);
  }
);
```

#### 回调数据

```json
{
  "type": "landmark",
  "data": [
    {
      "id": "objId1"
    },
    {
      "id": "objId2"
    }
  ],
  "layers": [ 
    {
      "layerId": "layer1",
      "type": "landmark",
      "objIds": ["obj1", "obj2", "obj3"]
      }, {
      "layerId": "layer2",
      "type": "traillayer",
      "objIds": ["obj4", "obj5", "obj6"]
      }
    ],
    "coordZ": 150,
    "points": [
        {
           "coord":  [113.320381,23.108027]
        },
        {
           "coord":  [113.320122,23.104624]
        },
        {
           "coord":  [113.320222,23.104224]
        }
    ]
}
```

#### 回调数据参数描述

| 属性       | 类型   | 说明               |
| ---------- | ------ | ------------------ |
| type       | String | 图层类型           |
| data       | Array  | 数据点位基本信息集 |
| data[0].id | String | 图层 id            |
| layers | Array |  新的返回接口格式，如果有多个type的图层选择，通过数组的结果返回，如果只有一个类型图层的一个目标选中，也会返回。            |
| layers[0].layerId | String |  图层名称            |
| layers[0].type | String |  图层类型           |
| layers[0].objIds | Array |  图层中选中对象的id           |
| coordZ | Number |  多边形框选范围的最低点海拔高度，单位：米            |
| points | Array |   多边形框选范围的区域边界点，最少3个            |
| points[0].coord | Array |  XY 轴坐标，X：经度；Y：纬度            |

[返回本章目录](#目录)

## 4.点击覆盖物结果

### 功能描述

点击覆盖物结果

### 调用方法

```js
appInstance.uniCall(
  'addEventListener',
  {
    eventName: 'onClickOverlayResult',
    callback: function (event) {
      console.log(event);
    },
  },
  (result) => {
    console.log(result);
  }
);
```

#### 回调数据

```json
{
  "type": "landmark",
  "id": "objId1",
  "ids": ["objId1", "objId2", "objId3"],
  "selected": true
}
```

#### 回调数据参数描述

| 属性     | 类型    | 说明                                                                                        |
| -------- | ------- | ------------------------------------------------------------------------------------------- |
| type     | String  | 图层类型                                                                                    |
| id       | String  | 图层对象 id                                                                                 |
| ids      | String  | 多选对象列表（当点击多个图层时，会有多个数据对象选中，此属性用于返回所有选中数据对象的 id） |
| selected | Boolean | 选中状态                                                                                    |

[返回本章目录](#目录)

## 5.点击类别覆盖物结果

### 功能描述

点击类别覆盖物结果

### 调用方法

```js
appInstance.uniCall(
  'addEventListener',
  {
    eventName: 'onClickOverlayTypeResult',
    callback: function (event) {
      console.log(event);
    },
  },
  (result) => {
    console.log(result);
  }
);
```

#### 回调数据

```json
{
  "type": "landmark",
  "selected": true,
  "data": [
    {
      "id": "objId1"
    },
    {
      "id": "objId2"
    }
  ]
}
```

#### 回调数据参数描述

| 属性       | 类型    | 说明               |
| ---------- | ------- | ------------------ |
| type       | String  | 图层类型           |
| selected   | Boolean | 选中状态           |
| data       | Array   | 数据点位基本信息集 |
| data[0].id | String  | 图层 id            |

[返回本章目录](#目录)

## 6.根据区域点击图层结果

### 功能描述

根据区域点击图层结果

### 调用方法

```js
appInstance.uniCall(
  'addEventListener',
  {
    eventName: 'onClickOverlayByAreaResult',
    callback: function (event) {
      console.log(event);
    },
  },
  (result) => {
    console.log(result);
  }
);
```

#### 回调数据

```json
{
  "type": "landmark",
  "selected": true,
  "data": [
    {
      "id": "objId1"
    },
    {
      "id": "objId2"
    }
  ]
}
```

#### 回调数据参数描述

| 属性       | 类型    | 说明               |
| ---------- | ------- | ------------------ |
| type       | String  | 图层类型           |
| selected   | Boolean | 选中状态           |
| data       | Array   | 数据点位基本信息集 |
| data[0].id | String  | 图层 id            |

[返回本章目录](#目录)

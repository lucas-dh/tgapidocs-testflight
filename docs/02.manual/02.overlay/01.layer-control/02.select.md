# 图层选择操作

## 目录

- [1.开始框选图层](#1开始框选图层)
- [2.停止框选图层](#2停止框选图层)
- [3.开始单选图层](#3开始单选图层)
- [4.停止单选图层](#4停止单选图层)
- [5.点击图层](#5点击图层)
- [6.点击图层类别](#6点击图层类别)
- [7.根据区域点击图层](#7根据区域点击图层)
- [8.清除图层选择状态](#8清除图层选择状态)

## 1.开始框选图层

### 功能描述

开始框选图层

### 调用方法

```js
let jsonData = {
  overlayType: 'landmark',
  idLayer: 'layerId',
  type: 'rect',
  showDecorator: true,
};

appInstance.uniCall('selectOverlay', jsonData, (result) => {
  console.log(result);
});
```

#### 参数描述

| 属性          | 类型    | 说明                                                                  | 端渲染 | 流渲染 |
| ------------- | ------- | --------------------------------------------------------------------- | ------ | ------ |
| overlayType   | String  | 图层对象类别，参考下面选中图层对象类别枚举表格                        | 支持   | 支持   |
| idLayer       | String  | 如果具体想限定图层对象，则填写图层对象 id，如不限制，可不填           | 支持   | 支持   |
| type          | String  | 框选模式，rect：屏幕矩形；circle：地表圆形；polygon：地表多边形       | 支持   | 支持   |
| showDecorator | Boolean | 选中后是否显示选中边框的效果，true：显示，false：不显示。默认是显示。 | 支持   | 不支持 |

#### 可选中图层对象类别枚举

| 值               | 类型   | 备注         |
| ---------------- | ------ | ------------ |
| landmarkLayer    | String | 地标图       |
| bubbleLayer      | String | 气泡图       |
| eventLayer       | String | 事件图       |
| trailObj         | String | 轨迹图       |
| trackPoint       | String | 点迹图       |
| typeAreaLayer    | String | 类型区域图   |
| colorAreaLayer   | String | 数值区域图   |
| roadSegmentLayer | String | 路径段热力图 |
| 3DColumnLayer    | String | 三维柱状图   |
| 3DGridLayer      | String | 栅格图       |
| 3DMarker         | String | 特效对象     |

#### 回调数据

```json
{
  "result": 1,
  "message": "成功。"
}
```

#### 回调数据参数描述

| 属性    | 类型   | 说明                                        |
| ------- | ------ | ------------------------------------------- |
| result  | Number | result 为执行结果，1 代表成功，0 代表失败。 |
| message | String | 为成功或失败消息                            |

[返回本章目录](#目录)

## 2.停止框选图层

### 功能描述

停止框选图层

### 调用方法

```js
appInstance.uniCall('endSelectOverlay', {}, (result) => {
  console.log(result);
});
```

#### 回调数据

```json
{
  "result": 1,
  "message": "成功。"
}
```

#### 回调数据参数描述

| 属性    | 类型   | 说明                     |
| ------- | ------ | ------------------------ |
| result  | Number | 1：代表成功；0：代表失败 |
| message | String | 成功或者失败原因         |

[返回本章目录](#目录)

## 3.开始单选图层

### 功能描述

开始单选图层

### 调用方法

```js
let jsonData = {
  overlayType: 'landmarkLayer',
  idLayer: 'landmarkLayer',
  type: 'click',
  allowMultiple: false,
  isShowDecorator: true,
};
appInstance.uniCall('pickOverlay', jsonData, (result) => {
  console.log(result);
});
```

#### 参数描述

| 属性            | 类型    | 说明                                                                                                                                                                                      | 端渲染        | 流渲染                  |
| --------------- | ------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------- | ----------------------- |
| overlayType     | String  | 图层对象类别 ，参考上面图层对象类别枚举表格                                                                                                                                               | 不支持 3DTile | 不支持 3DTile 和 gisMap |
| idLayer         | String  | 如果具体想限定图层对象，则填写图层对象 id，如不限制，可不填                                                                                                                               | 支持          | 支持                    |
| type            | String  | 单选模式，click：点击选中；hover：悬停选中                                                                                                                                                | 支持          | 支持                    |
| allowMultiple   | Boolean | 多选模式，false：单击单选当前对象并且取消其他全部选中对象，按住 ctrl+单击可多选，按住 ctrl+单击统一对象取消选中，true：单击添加当前到多选，再次单击同一对象取消选中，点击场景取消全部选中 | 支持          | 支持                    |
| isShowDecorator | Boolean | 选中后是否显示选中边框的效果，true：显示，false：不显示。默认是显示。                                                                                                                     | 支持          | 不支持                  |

#### 回调数据

```json
{
  "result": 1,
  "message": "成功。"
}
```

#### 回调数据参数描述

| 属性    | 类型   | 说明                     |
| ------- | ------ | ------------------------ |
| result  | Number | 1：代表成功；0：代表失败 |
| message | String | 成功或者失败原因         |

[返回本章目录](#目录)

## 4.停止单选图层

### 功能描述

停止单选图层

### 调用方法

```js
let jsonData = {
  overlayType: 'landmarkLayer',
  type: 'click',
  idLayer: 'landmarkLayer',
};
appInstance.uniCall('endPickOverlay', jsonData, (result) => {
  console.log(result);
});
```

#### 参数描述

| 属性        | 类型   | 说明                                                                                                                           |
| ----------- | ------ | ------------------------------------------------------------------------------------------------------------------------------ |
| overlayType | String | 停止单选覆盖物的类型，可选参数，如果不提供本参数，则不限定，参考上面图层对象类别枚举表格                                       |
| type        | String | 可选参数，如果想停止特定交互行为（click/hover）的单选操作，则填写此参数；如果不填，则停止一切交互行为（click/hover）的单选操作 |
| idLayer     | String | 可选参数，如果具体想限定图层，则填写图层 id，如不限制具体图层，可不填                                                          |

#### 回调数据

```json
{
  "result": 1,
  "message": "成功。"
}
```

#### 回调数据参数描述

| 属性    | 类型   | 说明                     |
| ------- | ------ | ------------------------ |
| result  | Number | 1：代表成功；0：代表失败 |
| message | String | 成功或者失败原因         |

[返回本章目录](#目录)

## 5.点击图层

### 功能描述

点击图层

### 调用方法

```js
let jsonData = {
  id: '1',
  ids: ['objId1', 'objId2', 'objId3'],
  overlayType: 'landmarkLayer',
  decoratorColor: '#ff0000',
  idLayer: 'landmarkLayer',
  selected: true,
};
appInstance.uniCall('clickOverlay', jsonData, (result) => {
  console.log(result);
});
```

#### 参数描述

| 属性           | 类型    | 说明                                                                        | 端渲染 | 流渲染 |
| -------------- | ------- | --------------------------------------------------------------------------- | ------ | ------ |
| id             | String  | 图层对象 id，新建时调用者自己传入的唯一标识，用于各种操作的对象识别         | 支持   | 支持   |
| ids            | String  | 同时选中多个对象，并且高亮/取消高亮，如果这个不为空，则会和 id 选中一起作用 | 支持   | 支持   |
| overlayType    | String  | 图层对象类别，参考上面图层对象类别枚举表格                                  | 支持   | 支持   |
| decoratorColor | String  | 选中框颜色，当与全局颜色冲突时，优先使用这个属性                            | 不支持 | 支持   |
| idLayer        | String  | 该对象归属图层对象 id，没有父对象的图层对象，可不填                         | 支持   | 支持   |
| selected       | Boolean | 选中状态，true：对象被高亮选中；false：对象被取消高亮选中                   | 支持   | 支持   |

#### 回调数据

```json
{
  "result": 1,
  "message": "成功。"
}
```

#### 回调数据参数描述

| 属性    | 类型   | 说明                     |
| ------- | ------ | ------------------------ |
| result  | Number | 1：代表成功；0：代表失败 |
| message | String | 成功或者失败原因         |

[返回本章目录](#目录)

## 6.点击图层类别

### 功能描述

点击图层类别

### 调用方法

```js
let jsonData = {
  overlayType: 'landmarkLayer',
  idLayer: 'landmarkLayer',
  decoratorColor: '#ff0000',
  selected: true,
};
appInstance.uniCall('clickOverlayType', jsonData, (result) => {
  console.log(result);
});
```

#### 参数描述

| 属性           | 类型    | 说明                                                      | 端渲染 | 流渲染 |
| -------------- | ------- | --------------------------------------------------------- | ------ | ------ |
| overlayType    | String  | 图层对象类别，参考上面图层对象类别枚举表格                | 支持   | 支持   |
| idLayer        | String  | 该对象归属图层对象 id，没有父对象的图层对象，可不填       | 支持   | 支持   |
| decoratorColor | String  | 选中框颜色，当与全局颜色冲突时，优先使用这个属性          | 不支持 | 支持   |
| selected       | Boolean | 选中状态，true：对象被高亮选中；false：对象被取消高亮选中 | 支持   | 支持   |

#### 回调数据

```json
{
  "result": 1,
  "message": "成功。"
}
```

#### 回调数据参数描述

| 属性    | 类型   | 说明                     |
| ------- | ------ | ------------------------ |
| result  | Number | 1：代表成功；0：代表失败 |
| message | String | 成功或者失败原因         |

[返回本章目录](#目录)

## 7.根据区域点击图层

### 功能描述

根据区域点击图层

### 调用方法

```js
let jsonData = {
  areaId: 'areaId',
  areaType: 'area',
  overlayType: 'landmark',
  idLayer: 'layerId',
  decoratorColor: '#ff0000',
  selected: true,
};

appInstance.uniCall('clickOverlayByArea', jsonData, (result) => {
  console.log(result);
});
```

#### 参数描述

| 属性           | 类型    | 说明                                                                                                                 | 端渲染 | 流渲染 |
| -------------- | ------- | -------------------------------------------------------------------------------------------------------------------- | ------ | ------ |
| areaId         | String  | 选择区域或者圆形区域的对象 id                                                                                        | 支持   | 支持   |
| areaType       | String  | 选择区域的类型，目前可以支持：area：区域图；circularArea：圆形区域图。只会应用区域的水平面范围，不会应用区域的高度。 | 支持   | 支持   |
| overlayType    | String  | 图层对象类别，参考上面图层对象类别枚举表格                                                                           | 支持   | 支持   |
| idLayer        | String  | 该对象归属图层对象 id，没有父对象的图层对象，可不填                                                                  | 支持   | 支持   |
| decoratorColor | String  | 选中框颜色，当与全局颜色冲突时，优先使用这个属性                                                                     | 不支持 | 支持   |
| selected       | Boolean | 选中状态，true：对象被高亮选中；false：对象被取消高亮选中                                                            | 支持   | 支持   |

#### 回调数据

```json
{
  "result": 1,
  "message": "成功。"
}
```

#### 回调数据参数描述

| 属性    | 类型   | 说明                     |
| ------- | ------ | ------------------------ |
| result  | Number | 1：代表成功；0：代表失败 |
| message | String | 成功或者失败原因         |

[返回本章目录](#目录)

## 8.清除图层选择状态

### 功能描述

清除图层选择状态

### 调用方法

```js
appInstance.uniCall('clearOverlaySelected', {}, (result) => {
  console.log(result); // 清除全部图层对象选中状态，并对其置 selected: false
});
```

#### 回调数据

```json
{
  "result": 1,
  "message": "成功。"
}
```

#### 回调数据参数描述

| 属性    | 类型   | 说明                     |
| ------- | ------ | ------------------------ |
| result  | Number | 1：代表成功；0：代表失败 |
| message | String | 成功或者失败原因         |

[返回本章目录](#目录)

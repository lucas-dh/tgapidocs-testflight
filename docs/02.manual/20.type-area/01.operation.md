# 类型区域图操作

## 目录

- [1.添加类型区域图](#1添加类型区域图)
- [2.更新类型区域图数据](#2更新类型区域图数据)
- [3.更新类型区域图样式](#3更新类型区域图样式)
- [4.更新类型区域图区域](#4更新类型区域图区域)
- [5.删除类型区域图](#5删除类型区域图)

## 1.添加类型区域图

### 功能描述

在三维场景中添加类型区域图

### 调用方法

```js
let jsonData = {
  id: 'typeArea',
  name: '类型区域图',
  coordType: 0,
  coordTypeZ: 0,
  coordZ: 60,
  alpha: 1,
  visible: true,
  lineDataId: 'lineDataId',
  tags: ['tag1', 'tag2', 'tag3'],
  areas: [
    {
      name: 'areaName01',
      points: [
        {
          coord: [113.86946869039616, 22.493958189189748], //以深圳湾经纬度为例
        },
        {
          coord: [113.86977272763804, 22.498154982221983],
        },
        {
          coord: [113.87844111550787, 22.497580739986624],
        },
        {
          coord: [113.87757662220088, 22.49175405194847],
        },
      ],
    },
    {
      name: 'areaName02',
      points: [
        {
          coord: [113.8697516678002, 22.498172735436164],
        },
        {
          coord: [113.86532055267648, 22.498534350194316],
        },
        {
          coord: [113.86426820258261, 22.495288614899888],
        },
        {
          coord: [113.86935283815114, 22.4939974211666],
        },
      ],
    },
    {
      name: 'areaName03',
      points: [
        {
          coord: [113.8768367853843, 22.494683728787688],
        },
        {
          coord: [113.87683894646098, 22.49372946263732],
        },
        {
          coord: [113.87294710038287, 22.49423183970084],
        },
        {
          coord: [113.87295882206737, 22.495073300382806],
        },
      ],
    },
  ],
  legends: [
    {
      name: 'legendName1',
      type: 'Segment03',
      color: '#EDFF00',
      areaHeight: 100,
      fillArea: 'Gradient01',
      fillPosition: 'top',
    },
    {
      name: 'legendName2',
      type: 'Segment03',
      color: '#BDFEFE',
      areaHeight: 10,
      fillArea: 'Gradient01',
      fillPosition: 'top',
    },
  ],
  data: [
    {
      areaName: 'areaName01',
      legendName: 'legendName1',
    },
    {
      areaName: 'areaName02',
      legendName: 'legendName1',
    },
    {
      areaName: 'areaName03',
      legendName: 'legendName2',
    },
  ],
};

appInstance.uniCall('addTypeAreaLayer', jsonData, (result) => {
  console.log(result);
});
```

#### 参数描述

| 属性                     | 类型    | 说明                                                                                                                  | 端渲染 | 流渲染 |
| ------------------------ | ------- | --------------------------------------------------------------------------------------------------------------------- | ------ | ------ |
| id                       | String  | 图层对象 id，新建时调用者自己传入的唯一标识，用于各种操作的对象识别                                                   | 支持   | 支持   |
| name                     | String  | 图层名称，支持为图层自定义名称                                                                                        | 支持   | 支持   |
| coordType                | Number  | XY 轴坐标类别，0：X 经度，Y 纬度；1：X 米，Y 米，相对世界 00 点 目前该属性仅支持属性值为 0                            | 支持   | 支持   |
| coordTypeZ               | Number  | Z 轴坐标类别，0：相对 3D 世界 0 海拔；1：相对 3D 世界地表；2：相对 3D 模型表面（单位：米） 目前该属性仅支持属性值为 0 | 支持   | 支持   |
| coordZ                   | Number  | Z 轴高度（单位：米）                                                                                                  | 支持   | 支持   |
| alpha                    | Number  | 透明度                                                                                                                | 支持   | 支持   |
| visible                  | Boolean | 添加当前图层时默认显示还是隐藏                                                                                        | 支持   | 支持   |
| lineDataId               | String  | 对应本服务器上线数据对象，如果找到 lineDataId，则下方的 areas 不起作用                                                | 不支持 | 支持   |
| tags                     | Array   | 用户自定标签数组，用于保存用户的扩展数据，或者可以控制显隐                                                            | 不支持 | 支持   |
| areas                    | Object  | 定义基础填充区域，支持为不同区域定义各自样式                                                                          | 支持   | 支持   |
| areas[0].name            | String  | 图层区域子对象 id，新建时调用者自己传入的唯一标识，用于各种操作的对象识别                                             | 支持   | 支持   |
| areas[0].points[0].coord | Array   | XY 轴坐标，X：经度；Y：纬度                                                                                           | 支持   | 支持   |
| legends                  | Array   | 定义图层包含图例，支持为不同图例定义各自样式                                                                          | 支持   | 支持   |
| legends[0].name          | String  | 图层内图例名称，新建时调用者自己传入的唯一名称，用于各种操作的图例识别                                                | 支持   | 支持   |
| legends[0].type          | String  | 区域边界样式类别（具体类型参考下图 type 枚举值，端渲染暂不支持 Gradient01）                                           | 支持   | 支持   |
| legends[0].color         | String  | 颜色(HEX 颜色值)                                                                                                      | 支持   | 支持   |
| legends[0].areaHeight    | Number  | 边界围栏高度(单位:米)                                                                                                 | 支持   | 支持   |
| legends[0].fillArea      | String  | 区域填充样式类别（具体类型参考下图 fillArea 枚举值）                                                                  | 支持   | 支持   |
| legends[0].fillPosition  | String  | 区域填充的位置，top/bottom，默认 top                                                                                  | 支持   | 支持   |
| data                     | Array   | 定义图层可视化数据                                                                                                    | 支持   | 支持   |
| data[0].areaName         | String  | 数据点区域名称                                                                                                        | 支持   | 支持   |
| data[0].legendName       | String  | 数据点图例类别                                                                                                        | 支持   | 支持   |

#### 回调数据

```json
{
  "result": 1,
  "message": "成功。"
}
```

#### 回调数据参数描述

| 属性    | 类型   | 说明                     |
| ------- | ------ | ------------------------ |
| result  | Number | 1：代表成功；0：代表失败 |
| message | String | 成功或者失败原因         |

### type 枚举值

<video id="circularSrc" class='zoom' src="./contents/mediaFiles/video/border/Border-Arrow-01.mp4"  autoplay loop></video>

<div class="video-wrap ">
  <ul class="video-cont circular-width" >
    <li class="video-item" onclick="switchPath('circularSrc','circular-width','./contents/mediaFiles/video/border/Border-Arrow-01.mp4',0)">
      <video src="./contents/mediaFiles/video/border/Border-Arrow-01.mp4" preload='none' poster='./contents/mediaFiles/images/area/Arrow01.png'></video>
      <strong>Arrow01</strong>
    </li>
    <li class="video-item" onclick="switchPath('circularSrc','circular-width','./contents/mediaFiles/video/border/Border-Gradient-01.mp4',1)">
      <video src="./contents/mediaFiles/video/border/Border-Gradient-01.mp4" preload='none' poster='./contents/mediaFiles/images/area/Gradient01.png'></video>
      <strong>Gradient01</strong>
    </li>
    <li class="video-item" onclick="switchPath('circularSrc','circular-width','./contents/mediaFiles/video/border/Border-Gradient-02.mp4',2)">
      <video src="./contents/mediaFiles/video/border/Border-Gradient-02.mp4" preload='none' poster='./contents/mediaFiles/images/area/Gradient02.png'></video>
      <strong>Gradient02</strong>
    </li>
    <li class="video-item" onclick="switchPath('circularSrc','circular-width','./contents/mediaFiles/video/border/Border-Gradient-03.mp4',3)">
      <video src="./contents/mediaFiles/video/border/Border-Gradient-03.mp4" preload='none' poster='./contents/mediaFiles/images/area/Gradient03.png'></video>
      <strong>Gradient03</strong>
    </li>
    <li class="video-item" onclick="switchPath('circularSrc','circular-width','./contents/mediaFiles/video/border/Border-Grid-01.mp4',4)">
      <video src="./contents/mediaFiles/video/border/Border-Grid-01.mp4" preload='none' poster='./contents/mediaFiles/images/area/Grid01.png'></video>
      <strong>Grid01</strong>
    </li>
    <li class="video-item" onclick="switchPath('circularSrc','circular-width','./contents/mediaFiles/video/border/Border-Grid-02.mp4',5)">
      <video src="./contents/mediaFiles/video/border/Border-Grid-02.mp4" preload='none' poster='./contents/mediaFiles/images/area/Grid02.png'></video>
      <strong>Grid02</strong>
    </li>
    <li class="video-item" onclick="switchPath('circularSrc','circular-width','./contents/mediaFiles/video/border/Border-Grid-03.mp4',6)">
      <video src="./contents/mediaFiles/video/border/Border-Grid-03.mp4" preload='none' poster='./contents/mediaFiles/images/area/Grid03.png'></video>
      <strong>Grid03</strong>
    </li>
    <li class="video-item" onclick="switchPath('circularSrc','circular-width','./contents/mediaFiles/video/border/Border-Grid-04.mp4',7)">
      <video src="./contents/mediaFiles/video/border/Border-Grid-04.mp4" preload='none' poster='./contents/mediaFiles/images/area/Grid04.png'></video>
      <strong>Grid04</strong>
    </li>
    <li class="video-item" onclick="switchPath('circularSrc','circular-width','./contents/mediaFiles/video/border/Border-Grid-05.mp4',8)">
      <video src="./contents/mediaFiles/video/border/Border-Grid-05.mp4" preload='none' poster='./contents/mediaFiles/images/area/Grid05.png'></video>
      <strong>Grid05</strong>
    </li>
    <li class="video-item" onclick="switchPath('circularSrc','circular-width','./contents/mediaFiles/video/border/Border-Segment-01.mp4',9)">
      <video src="./contents/mediaFiles/video/border/Border-Segment-01.mp4" preload='none' poster='./contents/mediaFiles/images/area/Segment01.png'></video>
      <strong>Segment01</strong>
    </li>
    <li class="video-item" onclick="switchPath('circularSrc','circular-width','./contents/mediaFiles/video/border/Border-Segment-02.mp4',10)">
      <video src="./contents/mediaFiles/video/border/Border-Segment-02.mp4" preload='none' poster='./contents/mediaFiles/images/area/Segment02.png'></video>
      <strong>Segment02</strong>
    </li>
    <li class="video-item" onclick="switchPath('circularSrc','circular-width','./contents/mediaFiles/video/border/Border-Segment-03.mp4',11)">
      <video src="./contents/mediaFiles/video/border/Border-Segment-03.mp4" preload='none' poster='./contents/mediaFiles/images/area/Segment03.png'></video>
      <strong>Segment03</strong>
    </li>
  </ul>
</div>

### fillArea 枚举值

<video class='zoom' id="areaSrc" src="./contents/mediaFiles/video/plane/Plane-Gradient-01.mp4"  autoplay loop></video>

<div class="video-wrap ">
  <ul class="video-cont area-width" >
    <li class="video-item" onclick="switchPath('areaSrc','area-width','./contents/mediaFiles/video/plane/Plane-Gradient-01.mp4',0)">
      <video src="./contents/mediaFiles/video/plane/Plane-Gradient-01.mp4" preload='none' poster='./contents/mediaFiles/images/roundArea/Gradient01.png'></video>
      <strong>Gradient01</strong>
    </li>
    <li class="video-item" onclick="switchPath('areaSrc','area-width','./contents/mediaFiles/video/plane/Plane-Gradient-02.mp4',1)">
      <video src="./contents/mediaFiles/video/plane/Plane-Gradient-02.mp4" preload='none' poster='./contents/mediaFiles/images/roundArea/Gradient02.png'></video>
      <strong>Gradient02</strong>
    </li>
    <li class="video-item" onclick="switchPath('areaSrc','area-width','./contents/mediaFiles/video/plane/Plane-Grid-01.mp4',2)">
      <video src="./contents/mediaFiles/video/plane/Plane-Grid-01.mp4" preload='none' poster='./contents/mediaFiles/images/roundArea/Grid01.png'></video>
      <strong>Grid01</strong>
    </li>
    <li class="video-item" onclick="switchPath('areaSrc','area-width','./contents/mediaFiles/video/plane/Plane-Grid-02.mp4',3)">
      <video src="./contents/mediaFiles/video/plane/Plane-Grid-02.mp4" preload='none' poster='./contents/mediaFiles/images/roundArea/Grid02.png'></video>
      <strong>Grid02</strong>
    </li>
    <li class="video-item" onclick="switchPath('areaSrc','area-width','./contents/mediaFiles/video/plane/Plane-Segment-01.mp4',4)">
      <video src="./contents/mediaFiles/video/plane/Plane-Segment-01.mp4" preload='none' poster='./contents/mediaFiles/images/roundArea/Segment01.png'></video>
      <strong>Segment01</strong>
    </li>
    <li class="video-item" onclick="switchPath('areaSrc','area-width','./contents/mediaFiles/video/plane/Plane-Segment-02.mp4',5)">
      <video src="./contents/mediaFiles/video/plane/Plane-Segment-02.mp4" preload='none' poster='./contents/mediaFiles/images/roundArea/Segment02.png'></video>
      <strong>Segment02</strong>
    </li>
        <li class="video-item" onclick="switchPath('areaSrc','area-width','./contents/mediaFiles/video/plane/Solid01.mp4',6)">
      <video src="./contents/mediaFiles/video/plane/Solid01.mp4" preload='none' poster='./contents/mediaFiles/images/roundArea/Solid01.png'></video>
      <strong>Solid01</strong>
    </li>
    <li class="video-item" onclick="switchPath('areaSrc','area-width','./contents/mediaFiles/video/plane/Solid02.mp4',7)">
      <video src="./contents/mediaFiles/video/plane/Solid02.mp4" preload='none' poster='./contents/mediaFiles/images/roundArea/Solid02.png'></video>
      <strong>Solid02</strong>
    </li>
    <li class="video-item" onclick="switchPath('areaSrc','area-width','./contents/mediaFiles/video/plane/Solid03.mp4',8)">
      <video src="./contents/mediaFiles/video/plane/Solid03.mp4" preload='none' poster='./contents/mediaFiles/images/roundArea/Solid03.png'></video>
      <strong>Solid03</strong>
    </li>
    <li class="video-item" onclick="switchPath('areaSrc','area-width','./contents/mediaFiles/video/plane/Solid04.mp4',9)">
      <video src="./contents/mediaFiles/video/plane/Solid04.mp4" preload='none' poster='./contents/mediaFiles/images/roundArea/Solid04.png'></video>
      <strong>Solid04</strong>
    </li>
    <li class="video-item" onclick="switchPath('areaSrc','area-width','./contents/mediaFiles/video/plane/Solid05.mp4',10)">
      <video src="./contents/mediaFiles/video/plane/Solid05.mp4" preload='none' poster='./contents/mediaFiles/images/roundArea/Solid05.png'></video>
      <strong>Solid05</strong>
    </li>
  </ul>
</div>

[返回本章目录](#目录)

## 2.更新类型区域图数据

### 功能描述

更新三维场景中添加类型区域图的数据

### 调用方法

```js
let jsonData = {
  id: 'typeArea',
  name: '类型区域图',
  isAppend: true,
  tags: ['tag1', 'tag2', 'tag3'],
  data: [
    {
      areaName: 'areaName01',
      legendName: 'legendName2',
    },
    {
      areaName: 'areaName02',
      legendName: 'legendName1',
    },
    {
      areaName: 'areaName03',
      legendName: 'legendName1',
    },
  ],
};

appInstance.uniCall('updateTypeAreaLayerCoord', jsonData, (result) => {
  console.log(result);
});
```

#### 参数描述

| 属性               | 类型    | 说明                                                                                                | 端渲染 | 流渲染 |
| ------------------ | ------- | --------------------------------------------------------------------------------------------------- | ------ | ------ |
| id                 | String  | 图层对象 id，新建时调用者自己传入的唯一标识，用于各种操作的对象识别                                 | 支持   | 支持   |
| name               | String  | 图层名称，支持为图层自定义名称                                                                      | 支持   | 支持   |
| isAppend           | Boolean | true: 追加数据，并不会清除现有其他数据，如果名称相同，则只更新该数据；false: 重建数据，数据全部清空 | 支持   | 支持   |
| tags               | Array   | 用户自定标签数组，用于保存用户的扩展数据，或者可以控制显隐                                          | 不支持 | 支持   |
| data               | Array   | 定义图层可视化数据                                                                                  | 支持   | 支持   |
| data[0].areaName   | String  | 数据点区域名称                                                                                      | 支持   | 支持   |
| data[0].legendName | String  | 数据点图例类别                                                                                      | 支持   | 支持   |

#### 回调数据

```json
{
  "result": 1,
  "message": "成功。"
}
```

#### 回调数据参数描述

| 属性    | 类型   | 说明                     |
| ------- | ------ | ------------------------ |
| result  | Number | 1：代表成功；0：代表失败 |
| message | String | 成功或者失败原因         |

[返回本章目录](#目录)

## 3.更新类型区域图样式

### 功能描述

更新三维场景中添加类型区域图的样式

### 调用方法

```js
let jsonData = {
  id: 'typeArea',
  alpha: 1,
  isAppend: true,
  legends: [
    {
      name: 'legendName1',
      type: 'Gradient02',
      color: '#ff0000',
      areaHeight: 800,
      fillArea: 'Segment02',
      fillPosition: 'top',
    },
    {
      name: 'legendName2',
      type: 'Gradient02',
      color: '#FFDE7B',
      areaHeight: 100,
      fillArea: 'Segment02',
      fillPosition: 'top',
    },
  ],
};
appInstance.uniCall('updateTypeAreaLayerStyle', jsonData, (result) => {
  console.log(result);
});
```

#### 参数描述

| 属性                    | 类型    | 说明                                                                                                       |
| ----------------------- | ------- | ---------------------------------------------------------------------------------------------------------- |
| id                      | String  | 图层对象 id，新建时调用者自己传入的唯一标识，用于各种操作的对象识别                                        |
| alpha                   | Number  | 透明度                                                                                                     |
| isAppend                | Boolean | 是否追加数据（按数据顺序），true：按新数据 更新原有重复数据 & 追加新数据；false：清除原有数据 & 重建新数据 |
| legends                 | Array   | 定义填充图例                                                                                               |
| legends[0].name         | String  | 图层内图例名称，新建时调用者自己传入的唯一名称，用于各种操作的图例识别                                     |
| legends[0].type         | String  | 区域边界样式类别（具体类型参考上图 type 枚举值，端渲染暂不支持 Gradient01）                                |
| legends[0].color        | String  | 颜色(HEX 颜色值)                                                                                           |
| legends[0].areaHeight   | Number  | 边界围栏高度（单位：米）                                                                                   |
| legends[0].fillArea     | String  | 区域填充样式类别（具体类型参考上图 fillArea 枚举值）                                                       |
| legends[0].fillPosition | String  | 区域填充的位置，top/bottom，默认 top                                                                       |

#### 回调数据

```json
{
  "result": 1,
  "message": "成功。"
}
```

#### 回调数据参数描述

| 属性    | 类型   | 说明                     |
| ------- | ------ | ------------------------ |
| result  | Number | 1：代表成功；0：代表失败 |
| message | String | 成功或者失败原因         |

[返回本章目录](#目录)

## 4.更新类型区域图区域

### 功能描述

更新三维场景中添加类型区域图的区域

### 调用方法

```js
let jsonData = {
  id: 'typeArea',
  isAppend: false,
  coordType: 0,
  coordTypeZ: 0,
  coordZ: 60,
  areas: [
    {
      name: 'areaName01',
      points: [
        {
          coord: [113.86936725145179, 22.493961406161986], //以深圳湾经纬度为例
        },
        {
          coord: [113.86686131708493, 22.492759585950132],
        },
        {
          coord: [113.86738877428596, 22.494513005942725],
        },
      ],
    },
    {
      name: 'areaName02',
      points: [
        {
          coord: [113.86828346563361, 22.48995549541383],
        },
        {
          coord: [113.86665223366745, 22.492078756018607],
        },
        {
          coord: [113.8662752188207, 22.49050134575487],
        },
      ],
    },
    {
      name: 'areaName03',
      points: [
        {
          coord: [113.86575162030968, 22.48874573896091],
        },
        {
          coord: [113.86783179032565, 22.487745809901714],
        },
        {
          coord: [113.86543840834135, 22.4858166435584],
        },
      ],
    },
  ],
};
appInstance.uniCall('updateTypeAreaLayerArea', jsonData, (result) => {
  console.log(result);
});
```

#### 参数描述

| 属性                     | 类型    | 说明                                                                                                                  |
| ------------------------ | ------- | --------------------------------------------------------------------------------------------------------------------- |
| id                       | String  | 图层对象 id，新建时调用者自己传入的唯一标识，用于各种操作的对象识别                                                   |
| isAppend                 | Boolean | 是否追加数据（按数据顺序），true：按新数据 更新原有重复数据 & 追加新数据；false：清除原有数据 & 重建新数据            |
| coordType                | Number  | XY 轴坐标类别，0：X 经度，Y 纬度；1：X 米，Y 米，相对世界 00 点 目前该属性仅支持属性值为 0                            |
| coordTypeZ               | Number  | Z 轴坐标类别，0：相对 3D 世界 0 海拔；1：相对 3D 世界地表；2：相对 3D 模型表面（单位：米） 目前该属性仅支持属性值为 0 |
| coordZ                   | Number  | Z 轴高度（单位：米）                                                                                                  |
| areas                    | Object  | 定义基础填充区域，支持为不同区域定义各自样式                                                                          |
| areas[0].name            | String  | 图层区域子对象 id，新建时调用者自己传入的唯一标识，用于各种操作的对象识别                                             |
| areas[0].points[0].coord | Array   | XY 轴坐标，X：经度；Y：纬度                                                                                           |

#### 回调数据

```json
{
  "result": 1,
  "message": "成功。"
}
```

#### 回调数据参数描述

| 属性    | 类型   | 说明                     |
| ------- | ------ | ------------------------ |
| result  | Number | 1：代表成功；0：代表失败 |
| message | String | 成功或者失败原因         |

[返回本章目录](#目录)

## 5.删除类型区域图

### 功能描述

删除类型区域图

### 调用方法

```js
let jsonData = {
  id: 'typeArea',
  overlayType: 'typeAreaLayer',
};

appInstance.uniCall('removeOverlay', jsonData, (result) => {
  console.log(result);
});
```

#### 参数描述

| 属性        | 类型   | 说明                                                                |
| ----------- | ------ | ------------------------------------------------------------------- |
| id          | String | 图层对象 id，新建时调用者自己传入的唯一标识，用于各种操作的对象识别 |
| overlayType | String | 图层对象类别                                                        |

#### 回调数据

```json
{
  "result": 1,
  "message": "成功。"
}
```

#### 回调数据参数描述

| 属性    | 类型   | 说明                     |
| ------- | ------ | ------------------------ |
| result  | Number | 1：代表成功；0：代表失败 |
| message | String | 成功或者失败原因         |

### 流渲染效果图

<img src="./contents/mediaFiles/images/overlay/type-streaming.png" width = "544" height="405" alt="系统架构图" />

### 端渲染效果图

<img src="./contents/mediaFiles/images/overlay/typeAreaLayer.png" width = "544" height="405" alt="系统架构图" />

[返回本章目录](#目录)

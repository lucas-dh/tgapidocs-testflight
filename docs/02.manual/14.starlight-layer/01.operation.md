# 星光图操作

## 目录

- [1.添加星光图](#1添加星光图)
- [2.更新星光图数据](#2更新星光图数据)
- [3.更新星光图样式](#3更新星光图样式)
- [4.删除星光图](#4删除星光图)

## 1.添加星光图

### 功能描述

在三维场景中添加星光图

### 调用方法

```js
let jsonData = {
  id: 'idObj',
  name: 'layerName',
  coordType: 0,
  coordTypeZ: 0,
  coordZ: 10,
  alpha: 0.3,
  color: '#ff0000',
  radius: 1,
  visible: true,
  pointDataId: 'pointDataId',
  tags: ['tag1', 'tag2', 'tag3'],
  data: [
    [113.326675, 23.124065],
    [113.327721, 23.127426],
    [113.326675, 23.124065],
    [113.327721, 23.127426],
  ],
};

appInstance.uniCall('addStarLightLayer', jsonData, (result) => {
  console.log(result);
});
```

#### 参数描述

| 属性        | 类型    | 说明                                                                                       | 端渲染 | 流渲染 |
| ----------- | ------- | ------------------------------------------------------------------------------------------ | ------ | ------ |
| id          | String  | 图层对象 id，新建时调用者自己传入的唯一标识，用于各种操作的对象识别                        | 支持   | 支持   |
| name        | String  | 图层名称，支持为图层自定义名称                                                             | 支持   | 支持   |
| coordType   | Number  | XY 轴坐标类别，0：X 经度，Y 纬度；1：X 米，Y 米，相对世界 00 点                            | 支持   | 支持   |
| coordTypeZ  | Number  | Z 轴坐标类别，0：相对 3D 世界 0 海拔；1：相对 3D 世界地表；2：相对 3D 模型表面（单位：米） | 支持   | 支持   |
| coordZ      | Number  | Z 轴高度（单位：米）                                                                       | 支持   | 支持   |
| alpha       | Number  | 透明度，0：完全透明；1：完全不透明                                                         | 支持   | 支持   |
| color       | String  | 颜色（HEX 颜色值）                                                                         | 支持   | 支持   |
| radius      | Number  | 每一个点的半径单位（米）                                                                   | 支持   | 支持   |
| visible     | Boolean | 添加当前图层时默认显示还是隐藏                                                             | 支持   | 支持   |
| pointDataId | String  | 对应本服务器上点数据对象，如果找到 pointDataId，则下方的 data 不起作用                     | 支持   | 支持   |
| tags        | Array   | 用户自定标签数组，用于保存用户的扩展数据，或者可以控制显隐                                 | 不支持 | 支持   |
| data        | Array   | 定义图层可视化数据                                                                         | 支持   | 支持   |
| data[0]     | Array   | XY 轴坐标                                                                                  | 支持   | 支持   |

#### 回调数据

```json
{
  "result": 1,
  "message": "成功。"
}
```

#### 回调数据参数描述

| 属性    | 类型   | 说明                     |
| ------- | ------ | ------------------------ |
| result  | Number | 1：代表成功；0：代表失败 |
| message | String | 成功或者失败原因         |

[返回本章目录](#目录)

## 2.更新星光图数据

### 功能描述

更新三维场景中添加星光图的数据

### 调用方法

```js
let jsonData = {
  id: 'idObj',
  name: 'layerName',
  coordType: 0,
  coordTypeZ: 0,
  coordZ: 10,
  isAppend: true,
  tags: ['tag1', 'tag2', 'tag3'],
  data: [
    [113.326675, 23.124065],
    [113.327721, 23.127426],
    [113.326675, 23.124065],
    [113.327721, 23.127426],
  ],
};

appInstance.uniCall('updateStarLightLayerCoord', jsonData, (result) => {
  console.log(result);
});
```

#### 参数描述

| 属性       | 类型    | 说明                                                                                       | 端渲染 | 流渲染 |
| ---------- | ------- | ------------------------------------------------------------------------------------------ | ------ | ------ |
| id         | String  | 图层对象 id，新建时调用者自己传入的唯一标识，用于各种操作的对象识别                        | 支持   | 支持   |
| name       | String  | 图层名称，支持为图层自定义名称                                                             | 支持   | 支持   |
| coordType  | String  | XY 轴坐标类别，0：X 经度，Y 纬度；1：X 米，Y 米，相对世界 00 点                            | 支持   | 支持   |
| coordTypeZ | Number  | Z 轴坐标类别，0：相对 3D 世界 0 海拔；1：相对 3D 世界地表；2：相对 3D 模型表面（单位：米） | 支持   | 支持   |
| coordZ     | Number  | 高度(单位:米)                                                                              | 支持   | 支持   |
| isAppend   | Boolean | 是否追加数据（按数据顺序），true：在原有数据后方追加数据；false：清除原有数据，更新数据    | 支持   | 支持   |
| tags       | Array   | 用户自定标签数组，用于保存用户的扩展数据，或者可以控制显隐                                 | 不支持 | 支持   |
| data       | Array   | 定义图层可视化数据                                                                         | 支持   | 支持   |
| data[0]    | Array   | XY 轴坐标                                                                                  | 支持   | 支持   |

#### 回调数据

```json
{
  "result": 1,
  "message": "成功。"
}
```

#### 回调数据参数描述

| 属性    | 类型   | 说明                     |
| ------- | ------ | ------------------------ |
| result  | Number | 1：代表成功；0：代表失败 |
| message | String | 成功或者失败原因         |

[返回本章目录](#目录)

## 3.更新星光图样式

### 功能描述

更新三维场景中添加星光图的样式

### 调用方法

```js
let jsonData = {
  id: 'idObj',
  alpha: 0.3,
  color: '#ff0000',
  radius: 1,
};

appInstance.uniCall('updateStarLightLayerStyle', jsonData, (result) => {
  console.log(result);
});
```

#### 参数描述

| 属性   | 类型   | 说明                                                                |
| ------ | ------ | ------------------------------------------------------------------- |
| id     | String | 图层对象 id，新建时调用者自己传入的唯一标识，用于各种操作的对象识别 |
| alpha  | Number | 透明度，0：完全透明；1：完全不透明                                  |
| color  | String | 颜色（HEX 颜色值）                                                  |
| radius | Number | 每一个点的半径单位（米）                                            |

#### 回调数据

```json
{
  "result": 1,
  "message": "成功。"
}
```

#### 回调数据参数描述

| 属性    | 类型   | 说明                     |
| ------- | ------ | ------------------------ |
| result  | Number | 1：代表成功；0：代表失败 |
| message | String | 成功或者失败原因         |

[返回本章目录](#目录)

## 4.删除星光图

### 功能描述

删除星光图

### 调用方法

```js
let jsonData = {
  id: 'starLightLayer',
  overlayType: 'starLightLayer',
};

appInstance.uniCall('removeOverlay', jsonData, (result) => {
  console.log(result);
});
```

#### 参数描述

| 属性        | 类型   | 说明                                                                |
| ----------- | ------ | ------------------------------------------------------------------- |
| id          | String | 图层对象 id，新建时调用者自己传入的唯一标识，用于各种操作的对象识别 |
| overlayType | String | 图层对象类别                                                        |

#### 回调数据

```json
{
  "result": 1,
  "message": "成功。"
}
```

#### 回调数据参数描述

| 属性    | 类型   | 说明                     |
| ------- | ------ | ------------------------ |
| result  | Number | 1：代表成功；0：代表失败 |
| message | String | 成功或者失败原因         |

[返回本章目录](#目录)

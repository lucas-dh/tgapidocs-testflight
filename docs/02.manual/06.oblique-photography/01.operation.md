# 倾斜摄影操作

## 目录

- [1.添加 3DTile 倾斜摄影](#1添加-3dtile-倾斜摄影)
- [2.更新 3DTile 倾斜摄影](#2更新-3dtile-倾斜摄影)
- [3.更新 3DTile 倾斜摄影样式](#3更新-3dtile-倾斜摄影样式)
- [4.删除 3DTile 倾斜摄影](#4删除-3dtile-倾斜摄影)

## 1.添加 3DTile 倾斜摄影

### 功能描述

在三维场景中添加 3DTile 倾斜摄影

### 调用方法

```js
let jsonData = {
  id: 'idObj',
  name: 'layerName',
  url: 'http://mapserver/beijing/tileset.json',
  type: 'b3dm',
  layerName: 'Building@CBD',
  token: 'ABCDEFG',
  LOD: 16,
  centerTranslate: [0, 0, 0],
  centerRotation: [90, 90, 90],
  visible: true,
  alpha: 0.5,
};
appInstance.uniCall('add3DTile', jsonData, (result) => {
  console.log(result);
});
```

#### 参数描述

| 属性            | 类型    | 说明                                                                                                                                                                                                                                           | 端渲染 | 流渲染 |
| --------------- | ------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------ | ------ |
| id              | String  | 图层对象 id，新建时调用者自己传入的唯一标识，用于各种操作的对象识别                                                                                                                                                                            | 支持   | 支持   |
| name            | String  | 图层名称，支持为图层自定义名称                                                                                                                                                                                                                 | 支持   | 支持   |
| url             | String  | 倾斜摄影地址，b3dm格式的用入口描述文件地址表示，例如http://mapserver/beijing/tileset.json； s3m格式的支持：文件格式填写.scp文件的磁盘路径，或者在线格式rest地址，例如：https://www.supermapol.com/realspace/services/3D-CBD/rest/realspace， 在线格式需要同时填写图层名称LayerName    | 支持   | 支持   |
| type            | String  | 倾斜摄影类别，b3dm（3dtile格式）或者s3m（超图格式）                                                                 | 不支持s3m   | 支持   |
| layerName       | String  | 图层名称，当type是s3m格式，并且url是在线地址格式时，使用这个传入rest服务的图层名称                                                                                                 | 不支持   | 支持   |
| token           | String  | 预留字段                                                                                                                                                                                                                                       | 支持   | 支持   |
| LOD             | Number  | 倾斜摄影数据的细节加载系数。表示在当前视野距离下，加载倾斜摄影数据的级别系数。流渲染默认值是16，如果想更加清晰，可以设置8或者4，一定是2的倍数。端渲染默认是6，如果想更加清晰，可以设置5或者4，最小值为1。加载越清晰的数据会越耗费渲染侧的性能。 | 支持   | 支持   |
| centerTranslate | Array   | 倾斜摄影数据中心点在 x, y, z 方向上的二次位移。数据默认值加偏移量是新位置，支持负数。（单位：米）                                                                                                                                              | 支持   | 支持   |
| centerRotation  | Array   | // 倾斜摄影数据中心点在 x, y, z 方向上的二次旋转。（单位：度）值域 -360 ~ 360                                                                                                                                                                    | 支持   | 支持   |
| visible         | Boolean | 显隐控制，true：显示；false：隐藏                                                                                                                                                                                                              | 支持   | 支持   |
| alpha           | Number  | 透明度，0：完全透明；1：完全不透明                                                                                                                                                                                                             | 支持   | 支持   |

#### 回调数据

```json
{
  "result": 1,
  "message": "成功。"
}
```

#### 回调数据参数描述

| 属性    | 类型   | 说明                     |
| ------- | ------ | ------------------------ |
| result  | Number | 1：代表成功；0：代表失败 |
| message | String | 成功或者失败原因         |

[返回本章目录](#目录)

## 2.更新 3DTile 倾斜摄影

### 功能描述

更新三维场景中添加 3DTile 倾斜摄影的数据

### 调用方法

```js
let jsonData = {
  id: 'idObj',
  name: 'layerName',
  url: 'http://mapserver/beijing/tileset.json',
  layerName: 'Building@CBD',
  type: 'b3dm',
  centerTranslate: [0, 0, 0],
  centerRotation: [90, 90, 90],
  visible: true,
  token: 'ABCDEFG',
};
appInstance.uniCall('update3DTile', jsonData, (result) => {
  console.log(result);
});
```

#### 参数描述

| 属性            | 类型    | 说明                                                                                              | 端渲染 | 流渲染 |
| --------------- | ------- | ------------------------------------------------------------------------------------------------- | ------ | ------ |
| id              | String  | 图层对象 id，新建时调用者自己传入的唯一标识，用于各种操作的对象识别                               | 支持   | 支持   |
| name            | String  | 图层名称，支持为图层自定义名称                                                                    | 支持   | 支持   |
| url             | String  | 倾斜摄影地址，b3dm格式的用入口描述文件地址表示，例如http://mapserver/beijing/tileset.json； s3m格式的支持：文件格式填写.scp文件的磁盘路径，或者在线格式rest地址，例如：https://www.supermapol.com/realspace/services/3D-CBD/rest/realspace， 在线格式需要同时填写图层名称LayerName    | 支持   | 支持   |
| type            | String  | 倾斜摄影类别，b3dm（3dtile格式）或者s3m（超图格式）                 | 不支持s3m   | 支持   |
| layerName       | String  | 图层名称，当type是s3m格式，并且url是在线地址格式时，使用这个传入rest服务的图层名称            | 不支持   | 支持   |
| centerTranslate | Array   | 倾斜摄影数据中心点在 x, y, z 方向上的二次位移。数据默认值加偏移量是新位置，支持负数。（单位：米） | 支持   | 支持   |
| centerRotation  | Array   | // 倾斜摄影数据中心点在 x, y, z 方向上的二次旋转。（单位：度）值域 -360 ~ 360                       | 支持   | 支持   |
| visible         | Boolean | 显隐控制，true：显示；false：隐藏                                                                 | 支持   | 支持   |
| token           | String  | 预留字段                                                                                          | 支持   | 支持   |

#### 回调数据

```json
{
  "result": 1,
  "message": "成功。"
}
```

#### 回调数据参数描述

| 属性    | 类型   | 说明                     |
| ------- | ------ | ------------------------ |
| result  | Number | 1：代表成功；0：代表失败 |
| message | String | 成功或者失败原因         |

[返回本章目录](#目录)

## 3.更新 3DTile 倾斜摄影样式

### 功能描述

更新三维场景中添加 3DTile 倾斜摄影的样式

### 调用方法

```js
let jsonData = {
  id: 'idObj',
  LOD: 16,
  visible: true,
  alpha: 0.1,
};

appInstance.uniCall('update3DTileStyle', jsonData, (result) => {
  console.log(result);
});
```

#### 参数描述

| 属性    | 类型    | 说明                                                                                                                                                                                                                                           |
| ------- | ------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| id      | String  | 图层对象 id，新建时调用者自己传入的唯一标识，用于各种操作的对象识别                                                                                                                                                                            |
| LOD     | Number  | 倾斜摄影数据的细节加载系数。表示在当前视野距离下，加载倾斜摄影数据的级别系数。流渲染默认值是16，如果想更加清晰，可以设置8或者4，一定是2的倍数。端渲染默认是6，如果想更加清晰，可以设置7或者8。加载越清晰的数据会越耗费渲染侧的性能。 |
| visible | Boolean | 显隐控制，true：显示；false：隐藏                                                                                                                                                                                                              |
| alpha   | Number  | 透明度，0：完全透明；1：完全不透明                                                                                                                                                                                                             |

#### 回调数据

```json
{
  "result": 1,
  "message": "成功。"
}
```

#### 回调数据参数描述

| 属性    | 类型   | 说明                     |
| ------- | ------ | ------------------------ |
| result  | Number | 1：代表成功；0：代表失败 |
| message | String | 成功或者失败原因         |

[返回本章目录](#目录)

## 4.删除 3DTile 倾斜摄影

### 功能描述

删除 3DTile 倾斜摄影

### 调用方法

```js
let jsonData = {
  id: 'idObj',
  overlayType: '3DTile',
};

appInstance.uniCall('removeOverlay', jsonData, (result) => {
  console.log(result);
});
```

#### 参数描述

| 属性        | 类型   | 说明                                                                |
| ----------- | ------ | ------------------------------------------------------------------- |
| id          | String | 图层对象 id，新建时调用者自己传入的唯一标识，用于各种操作的对象识别 |
| overlayType | String | 图层对象类别                                                        |

#### 回调数据

```json
{
  "result": 1,
  "message": "成功。"
}
```

#### 回调数据参数描述

| 属性    | 类型   | 说明                     |
| ------- | ------ | ------------------------ |
| result  | Number | 1：代表成功；0：代表失败 |
| message | String | 成功或者失败原因         |

[返回本章目录](#目录)

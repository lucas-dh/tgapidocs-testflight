# 路径点热力图操作

## 目录

- [1.添加路径点热力图](#1添加路径点热力图)
- [2.更新路径点热力图数据](#2更新路径点热力图数据)
- [3.更新路径点热力图样式](#3更新路径点热力图样式)
- [4.删除路径点热力图](#4删除路径点热力图)

## 1.添加路径点热力图

### 功能描述

在三维场景中添加路径点热力图

### 调用方法

```js
let jsonData = {
  id: 'roadPtHeatLayerId', // 图层对象 id，新建时调用者自己传入的唯一标识，用于各种操作的对象识别
  name: 'layerName', // 图层名称，支持为图层自定义名称
  coordType: 0, // XY 轴坐标类别，0：X 经度，Y 纬度；1：X 米，Y米，相对世界00点
  coordTypeZ: 0, // Z 轴坐标类别，0：相对 3D 世界 0 海拔；1：相对 3D 世界地表；2：相对 3D 模型表面（单位：米）
  alpha: 1, // 透明度，0：完全透明；1：完全不透明
  width: 30, // 路径宽度（单位：米）
  colorMax: '#FF0000', // 最大值上限颜色（HEX 颜色值）
  colorMin: '#0000FF', // 最小值下限颜色（HEX 颜色值）
  valueMax: 1000, // 最大值上限
  valueMin: 0, // 最小值下限
  visible: true, //添加当前图层时默认是显示还是隐藏
  tags: ['tag1', 'tag2', 'tag3'], // 用户自定标签数组，用于保存用户的扩展数据，或者可以控制显隐
  data: [
    // 定义图层可视化数据
    {
      coord: [113.94833671656151, 22.52696741299701], // XY 轴坐标，X：经度；Y：纬度
      coordZ: 64, // Z 轴高度（单位：米）
      value: Math.floor(Math.random() * 1000), // 数据点权值
    },
    {
      coord: [113.93433671656152, 22.52696741299701],
      coordZ: 64,
      value: Math.floor(Math.random() * 1000),
    },
    {
      coord: [113.93433671656152, 22.52696741299701],
      coordZ: 64,
      value: Math.floor(Math.random() * 1000),
    },
    {
      coord: [113.93433671656152, 22.51296741299701],
      coordZ: 64,
      value: Math.floor(Math.random() * 1000),
    },
    {
      coord: [113.93433671656152, 22.51296741299701],
      coordZ: 64,
      value: Math.floor(Math.random() * 1000),
    },
    {
      coord: [113.94833671656151, 22.51296741299701],
      coordZ: 64,
      value: Math.floor(Math.random() * 1000),
    },
    {
      coord: [113.94833671656151, 22.51296741299701],
      coordZ: 64,
      value: Math.floor(Math.random() * 1000),
    },
    {
      coord: [113.94833671656151, 22.52696741299701],
      coordZ: 64,
      value: Math.floor(Math.random() * 1000),
    },
  ],
};

appInstance.uniCall('addRoadPtHeatLayer', jsonData, (result) => {
  console.log(result);
});
```

#### 参数描述

| 属性           | 类型    | 说明                                                                                       | 端渲染 | 流渲染 |
| -------------- | ------- | ------------------------------------------------------------------------------------------ | ------ | ------ |
| id             | String  | 图层对象 id，新建时调用者自己传入的唯一标识，用于各种操作的对象识别                        | 支持   | 支持   |
| name           | String  | 图层名称，支持为图层自定义名称                                                             | 支持   | 支持   |
| coordType      | Number  | XY 轴坐标类别，0：X 经度，Y 纬度；1：X 米，Y 米，相对世界 00 点                            | 支持   | 支持   |
| coordTypeZ     | Number  | Z 轴坐标类别，0：相对 3D 世界 0 海拔；1：相对 3D 世界地表；2：相对 3D 模型表面（单位：米） | 支持   | 支持   |
| snapSurface    | Number  | 启用自动贴地。0：不贴地；1：贴地                                                           | 支持   | 支持   |
| alpha          | Number  | 透明度，0：完全透明；1：完全不透明                                                         | 支持   | 支持   |
| width          | Number  | 路径宽度（单位：米）                                                                       | 支持   | 支持   |
| colorMax       | String  | 最大值上限颜色（HEX 颜色值）                                                               | 支持   | 支持   |
| colorMin       | String  | 最小值下限颜色（HEX 颜色值）                                                               | 支持   | 支持   |
| valueMax       | Number  | 最大值上限                                                                                 | 支持   | 支持   |
| valueMin       | Number  | 最小值下限                                                                                 | 支持   | 支持   |
| visible        | Boolean | 添加当前图层时默认显示还是隐藏                                                             | 支持   | 支持   |
| tags           | Array   | 用户自定标签数组，用于保存用户的扩展数据，或者可以控制显隐                                 | 不支持 | 支持   |
| data           | Array   | 定义图层可视化数据                                                                         | 支持   | 支持   |
| data[0].coord  | Array   | XY 轴坐标，X：经度；Y：纬度                                                                | 支持   | 支持   |
| data[0].coordZ | Number  | Z 轴高度（单位：米）                                                                       | 支持   | 支持   |
| data[0].value  | Number  | 数据点权值                                                                                 | 支持   | 支持   |

#### 回调数据

```json
{
  "result": 1,
  "message": "成功。"
}
```

#### 回调数据参数描述

| 属性    | 类型   | 说明                     |
| ------- | ------ | ------------------------ |
| result  | Number | 1：代表成功；0：代表失败 |
| message | String | 成功或者失败原因         |

[返回本章目录](#目录)

## 2.更新路径点热力图数据

### 功能描述

更新三维场景中添加路径点热力图的数据

### 调用方法

```js
let jsonData = {
  id: 'roadPtHeatLayerId', // 图层对象 id，新建时调用者自己传入的唯一标识，用于各种操作的对象识别
  name: 'layerName', // 图层名称，支持为图层自定义名称
  coordType: 0, // XY 轴坐标类别，0：X 经度，Y 纬度；1：X 米，Y米，相对世界00点
  coordTypeZ: 0, // Z 轴坐标类别，0：相对 3D 世界 0 海拔；1：相对 3D 世界地表；2：相对 3D 模型表面（单位：米）
  isAppend: false, // 是否追加数据（按数据顺序），true：在原有数据后方追加数据；false：清除原有数据，更新数据
  tags: ['tag1', 'tag2', 'tag3'], // 用户自定标签数组，用于保存用户的扩展数据，或者可以控制显隐
  data: [
    // 定义图层可视化数据
    {
      coord: [113.93967447227938, 22.52532337801553], // XY 轴坐标，X：经度；Y：纬度
      coordZ: 64, // Z 轴高度（单位：米）
      value: Math.floor(Math.random() * 1000), // 数据点权值
    },
    {
      coord: [113.9327107675685, 22.51151051774577],
      coordZ: 64,
      value: Math.floor(Math.random() * 1000),
    },
    {
      coord: [113.94671076706415, 22.511521090984978],
      coordZ: 64,
      value: Math.floor(Math.random() * 1000),
    },
    {
      coord: [113.93967447227938, 22.52532337801553],
      coordZ: 64,
      value: Math.floor(Math.random() * 1000),
    },
  ],
};

appInstance.uniCall('updateRoadPtHeatLayerCoord', jsonData, (result) => {
  console.log(result);
});
```

#### 参数描述

| 属性           | 类型    | 说明                                                                                       | 端渲染 | 流渲染 |
| -------------- | ------- | ------------------------------------------------------------------------------------------ | ------ | ------ |
| id             | String  | 图层对象 id，新建时调用者自己传入的唯一标识，用于各种操作的对象识别                        | 支持   | 支持   |
| name           | String  | 图层名称，支持为图层自定义名称                                                             | 支持   | 支持   |
| coordType      | Number  | XY 轴坐标类别，0：X 经度，Y 纬度；1：X 米，Y 米，相对世界 00 点                            | 支持   | 支持   |
| coordTypeZ     | Number  | Z 轴坐标类别，0：相对 3D 世界 0 海拔；1：相对 3D 世界地表；2：相对 3D 模型表面（单位：米） | 支持   | 支持   |
| isAppend       | Boolean | 是否追加数据（按数据顺序），true：在原有数据后方追加数据；false：清除原有数据，更新数据    | 支持   | 支持   |
| tags           | Array   | 用户自定标签数组，用于保存用户的扩展数据，或者可以控制显隐                                 | 不支持 | 支持   |
| data           | Array   | 定义图层可视化数据                                                                         | 支持   | 支持   |
| data[0].coord  | Array   | XY 轴坐标，X：经度；Y：纬度                                                                | 支持   | 支持   |
| data[0].coordZ | Number  | Z 轴高度（单位：米）                                                                       | 支持   | 支持   |
| data[0].value  | Number  | 数据点权值                                                                                 | 支持   | 支持   |

#### 回调数据

```json
{
  "result": 1,
  "message": "成功。"
}
```

#### 回调数据参数描述

| 属性    | 类型   | 说明                     |
| ------- | ------ | ------------------------ |
| result  | Number | 1：代表成功；0：代表失败 |
| message | String | 成功或者失败原因         |

[返回本章目录](#目录)

## 3.更新路径点热力图样式

### 功能描述

更新三维场景中添加路径点热力图的样式

### 调用方法

```js
let jsonData = {
  id: 'roadPtHeatLayerId', // 图层对象 id，新建时调用者自己传入的唯一标识，用于各种操作的对象识别
  alpha: 0.5, // 透明度，0：完全透明；1：完全不透明
  width: 50, // 路径宽度（单位：米）
  colorMax: '#ff00ff', // 最大值上限颜色（HEX 颜色值）
  colorMin: '#00ffff', // 最小值下限颜色（HEX 颜色值）
  valueMax: 500, // 最大值上限
  valueMin: 100, // 最小值下限
};

appInstance.uniCall('updateRoadPtHeatLayerStyle', jsonData, (result) => {
  console.log(result);
});
```

#### 参数描述

| 属性     | 类型   | 说明                                                                |
| -------- | ------ | ------------------------------------------------------------------- |
| id       | String | 图层对象 id，新建时调用者自己传入的唯一标识，用于各种操作的对象识别 |
| alpha    | Number | 批号消批时间长度                                                    |
| width    | Number | 路径宽度（单位：米）                                                |
| colorMax | String | 最大值上限颜色（HEX 颜色值）                                        |
| colorMin | String | 最小值下限颜色（HEX 颜色值）                                        |
| valueMax | Number | 最大值上限                                                          |
| valueMin | Number | 最小值下限                                                          |

#### 回调数据

```json
{
  "result": 1,
  "message": "成功。"
}
```

#### 回调数据参数描述

| 属性    | 类型   | 说明                     |
| ------- | ------ | ------------------------ |
| result  | Number | 1：代表成功；0：代表失败 |
| message | String | 成功或者失败原因         |

[返回本章目录](#目录)

## 4.删除路径点热力图

### 功能描述

删除路径点热力图

### 调用方法

```js
let jsonData = {
  id: 'roadPtHeatLayerId', // 图层对象 id，新建时调用者自己传入的唯一标识，用于各种操作的对象识别
  overlayType: 'roadPtHeatLayer', // 图层对象类别
};

appInstance.uniCall('removeOverlay', jsonData, (result) => {
  console.log(result);
});
```

#### 参数描述

| 属性        | 类型   | 说明                                                                |
| ----------- | ------ | ------------------------------------------------------------------- |
| id          | String | 图层对象 id，新建时调用者自己传入的唯一标识，用于各种操作的对象识别 |
| overlayType | String | 图层对象类别                                                        |

#### 回调数据

```json
{
  "result": 1,
  "message": "成功。"
}
```

#### 回调数据参数描述

| 属性    | 类型   | 说明                     |
| ------- | ------ | ------------------------ |
| result  | Number | 1：代表成功；0：代表失败 |
| message | String | 成功或者失败原因         |

### 流渲染效果图

<img src="./contents/mediaFiles/images/overlay/roadPtHeatLayer-streaming.png" width = "544" height="405" alt="系统架构图" />

### 端渲染效果图

<img src="./contents/mediaFiles/images/overlay/roadPtHeatLayer.png" width = "544" height="405" alt="系统架构图" />

[返回本章目录](#目录)

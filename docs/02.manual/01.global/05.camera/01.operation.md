# 镜头控制操作

## 目录

- [1.设置场景镜头视界](#1设置场景镜头视界)
- [2.获取场景镜头视界](#2获取场景镜头视界)
- [3.设置场景镜头模式](#3设置场景镜头模式)
- [4.限制镜头视界](#4限制镜头视界)
- [5.设置镜头视界限制状态](#5设置镜头视界限制状态)
- [6.漫游镜头](#6漫游镜头)
- [7.设置漫游镜头状态](#7设置漫游镜头状态)
- [8.环绕旋转镜头](#8环绕旋转镜头)
- [9.路径移动镜头](#9路径移动镜头)
- [10.设置路径移动镜头状态](#10设置路径移动镜头状态)
- [11.模型跟随镜头](#11模型跟随镜头)
- [12.设置模型跟随镜头状态](#12设置模型跟随镜头状态)
- [13.聚焦图层](#13聚焦图层)
- [14.聚焦类别图层](#14聚焦类别图层)
- [15.聚焦图层子对象](#15聚焦图层子对象)
- [16.聚焦图例子图层](#16聚焦图例子图层)
- [17.聚焦模型](#17聚焦模型)
- [18.聚焦类别模型](#18聚焦类别模型)
- [19.聚焦建筑](#19聚焦建筑)
- [20.聚焦楼层](#20聚焦楼层)
- [21.聚焦房间](#21聚焦房间)
- [22.聚焦世界地图](#22聚焦世界地图-流)
- [23.聚焦世界国家](#23聚焦世界国家-流)
- [24.聚焦中国地图](#24聚焦中国地图-流)
- [25.聚焦中国省份](#25聚焦中国省份-流)

## 1.设置场景镜头视界

### 功能描述

设置三维场景中镜头视界

### 调用方法

```js
let jsonData = {
  coordType: 0,
  coordTypeZ: 0,
  centerCoord: [113.93989639458, 22.5110484727475], //以深圳湾经纬度为例
  coordZ: 500,
  distance: 1500,
  pitch: 35,
  heading: 0,
  fly: true,
  duration: 0.5,
};

appInstance.uniCall('setCamera', jsonData, (result) => {
  console.log(result);
});
```

#### 参数描述

| 属性        | 类型    | 说明                                                                                                                                                                       |
| ----------- | ------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| coordType   | Number  | XY 轴坐标模式 坐标类型(0:X 经度 Y 纬度；1:X 米 Y 米，相对世界 00 点) 目前该属性仅支持属性值为 0                                                                            |
| coordTypeZ  | Number  | Z 轴坐标模式 坐标高度类型，单位：米(0:相对 3D 世界 0 海拔；1:相对 3D 世界地表；2:相对 3D 模型表面) 目前该属性仅支持属性值为 0                                              |
| centerCoord | Array   | 中心点的坐标 lng,lat                                                                                                                                                       |
| coordZ      | Number  | Z 轴高度（单位：米）                                                                                                                                                       |
| distance    | Number  | 镜头距中心点距离(单位:米)                                                                                                                                                  |
| pitch       | Number  | 镜头俯仰角，摄像机和观察点同一水平面为 0 度，摄像机高于观察点为正方向，单位：度，值域范围：-89~89                                                                          |
| heading     | Number  | 镜头偏航角，摄像机在观察点正南为 0 度，摄像机绕观察点顺时针旋转为正，单位：度，值域范围：-360~360                                                                          |
| fly         | Boolean | true: 飞行动画(飞行时间根据当前点与目标点计算,则 pitch 及 heading 不生效, 会自行计算);<br>false: 立刻跳转过去(有一个短暂飞行动画,并按照 distance, pitch, heading 设置镜头) |
| duration    | Number  | 飞行时间，秒                                                                                                                                                               |

#### 回调数据

```json
{
  "result": 1,
  "message": "成功。"
}
```

#### 回调数据参数描述

| 属性    | 类型   | 说明                     |
| ------- | ------ | ------------------------ |
| result  | Number | 1：代表成功；0：代表失败 |
| message | String | 成功或者失败原因         |

### 设置场景镜头视界流渲染效果

<video 
    width=544  
    src='./contents/mediaFiles/video/setLens-streaming.mp4' 
    frameborder=0 
    controls
    allowfullscreen>
</video>

### 设置场景镜头视界端渲染效果

<video 
    width=544 
    src='./contents/mediaFiles/video/setLens.mp4' 
    frameborder=0 
    controls
    allowfullscreen>
</video>

[返回本章目录](#目录)

## 2.获取场景镜头视界

### 功能描述

获取三维场景中镜头视界

### 调用方法

```js
appInstance.uniCall('getCameraInfo', {}, (result) => {
  console.log(result);
});
```

#### 回调数据

```json
{
  "result": 1,
  "message": "成功。",
  "coordType": 0,
  "coordTypeZ": 0,
  "centerCoord": [113.92489539458, 22.5120589227475], //以深圳湾经纬度为例
  "coordZ": 6000,
  "distance": 20000,
  "pitch": 73,
  "heading": 127,
  "fov": 30,
  "status": "free"
}
```

#### 回调数据参数描述

| 属性        | 类型   | 说明                                                                                                                          |
| ----------- | ------ | ----------------------------------------------------------------------------------------------------------------------------- |
| result      | Number | 1：代表成功；0：代表失败                                                                                                      |
| message     | String | 成功或者失败原因                                                                                                              |
| coordType   | Number | XY 轴坐标模式 坐标类型(0:X 经度 Y 纬度；1:X 米 Y 米，相对世界 00 点) 目前该属性仅支持属性值为 0                               |
| coordTypeZ  | Number | Z 轴坐标模式 坐标高度类型，单位：米(0:相对 3D 世界 0 海拔；1:相对 3D 世界地表；2:相对 3D 模型表面) 目前该属性仅支持属性值为 0 |
| centerCoord | Array  | XY 轴坐标，X：经度；Y：纬度                                                                                                   |
| coordZ      | Number | Z 轴高度（单位：米）                                                                                                          |
| distance    | Number | 镜头与坐标点距离(单位:米)                                                                                                     |
| pitch       | Number | 镜头俯仰角(-89~+89)                                                                                                           |
| heading     | Number | 镜头偏航角(0 正北, 0~359)                                                                                                     |
| fov         | Number | 当前摄像机视角当前摄像机视角                                                                                                  |
| status      | String | 相机状态，free：自由；flying：正在飞行；orbiting：正在自动旋转；roaming：正在漫游；                                           |

[返回本章目录](#目录)

## 3.设置场景镜头模式

### 功能描述

设置三维场景中镜头模式

### 调用方法

```js
let jsonData = {
  mode: 'default',
  speed: 10,
  turnSpeed: 0.1,
  eyesHeight: 1.8,
  collision: false,
  gravity: false,
  thirdPersonType: 0,
};

appInstance.uniCall('setCameraMode', jsonData, (result) => {
  console.log(result);
});
```

#### 参数描述

| 属性            | 类型    | 说明                                                                                                                                                                                           | 端渲染 | 流渲染 |
| --------------- | ------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------ | ------ |
| mode            | String  | 摄像机模式，"default": 默认交互行为，"walk", 第一人称或者第三人称行走，WSAD 移动，鼠标左键或右键按下旋转，"fly"，第一人称飞行，WSAD 移动，Q 降 E 升，鼠标左键或右键按下旋转，"topView"，顶视图 | 支持   | 支持   |
| speed           | Number  | 当 mode 为"walk"或者"fly“的时候，摄像机移动速度                                                                                                                                                | 支持   | 支持   |
| turnSpeed       | Number  | 当 mode 为"walk"的时候，鼠标按下旋转时的速度，0 为最慢，1 为最快                                                                                                                               | 支持   | 支持   |
| eyesHeight      | Number  | 当 mode 为"walk"的时候，摄像机的高度                                                                                                                                                           | 支持   | 支持   |
| collision       | Boolean | 是否启用碰撞检测                                                                                                                                                                               | 不支持 | 支持   |
| gravity         | Boolean | 当 mode 为"walk"的时候是否启用重力，启用后，可以按空格键跳跃                                                                                                                                   | 不支持 | 支持   |
| thirdPersonType | Number  | 当 mode 为"walk"的时候，可以选择不同的第三人称模型，0：表示关闭第三人称，1：表示 1 号人物模型，2：表示 2 号人物模型                                                                            | 不支持 | 支持   |

[返回本章目录](#目录)

## 4.限制镜头视界

### 功能描述

限制三维场景中镜头视界

```js
let jsonData = {
  coordType: 0,
  coordTypeZ: 0,
  limitPitch: [5, 30],
  limitYaw: [30, 300],
  limitDistance: [160, 1000],
  limitCoordZ: [10, 300], // 端渲染暂不支持此属性
  center: [113.319824, 23.107891], // 端渲染暂不支持此属性
  radius: 1000, // 端渲染暂不支持此属性
};
appInstance.uniCall('restrictCamera', jsonData, (result) => {
  console.log(result);
});
```

#### 参数描述

| 属性          | 类型   | 说明                                                                                                                          | 端渲染 | 流渲染 |
| ------------- | ------ | ----------------------------------------------------------------------------------------------------------------------------- | ------ | ------ |
| coordType     | Number | XY 轴坐标模式 坐标类型(0:X 经度 Y 纬度；1:X 米 Y 米，相对世界 00 点) 目前该属性仅支持属性值为 0                               | 支持   | 支持   |
| coordTypeZ    | Number | Z 轴坐标模式 坐标高度类型，单位：米(0:相对 3D 世界 0 海拔；1:相对 3D 世界地表；2:相对 3D 模型表面) 目前该属性仅支持属性值为 0 | 支持   | 支持   |
| limitPitch    | Array  | 镜头俯仰角限制，摄像机和观察点同一水平面为 0 度，摄像机高于观察点为正方向，单位：度，值域范围：-89~89                         | 支持   | 支持   |
| limitYaw      | Array  | 镜头偏航角限制，摄像机在观察点正南为 0 度，摄像机绕观察点顺时针旋转为正，单位：度，值域范围：-360~360                         | 支持   | 支持   |
| limitDistance | Array  | 摄像机 镜头距离限制 (单位:米)                                                                                                 | 支持   | 支持   |
| limitCoordZ   | Array  | 摄像机 坐标高度限制 (单位:米)。                                                                                               | 不支持 | 支持   |
| center        | Array  | 视点 限制区中心坐标。                                                                                                         | 不支持 | 支持   |
| radius        | Number | 视点 限制区半径，会形成一个球体，并在所有条件中取交集。                                                                       | 不支持 | 支持   |

#### 回调数据

```json
{
  "result": 1,
  "message": "成功。"
}
```

#### 回调数据参数描述

| 属性    | 类型   | 说明                     |
| ------- | ------ | ------------------------ |
| result  | Number | 1：代表成功；0：代表失败 |
| message | String | 成功或者失败原因         |

### 限制镜头视界流渲染效果

<video 
    width=544 
    src='./contents/mediaFiles/video/camera/restrictCamera.mp4' 
    frameborder=0 
    controls
    allowfullscreen>
</video>

### 限制镜头视界端渲染效果

<video 
    width=544 
    src='./contents/mediaFiles/video/camera/restrictCameraDuan.mp4' 
    frameborder=0 
    controls
    allowfullscreen>
</video>

[返回本章目录](#目录)

## 5.设置镜头视界限制状态

### 功能描述

设置三维场景中镜头视界限制状态

### 调用方法

```js
let jsonData = {
  state: 'restricted',
};
appInstance.uniCall('setCameraRestrictionState', jsonData, (result) => {
  console.log(result);
});
```

#### 参数描述

| 属性  | 类型   | 说明                             |
| ----- | ------ | -------------------------------- |
| state | String | restricted：受限；free：不受限制 |

#### 回调数据

```json
{
  "result": 1,
  "message": "成功。"
}
```

#### 回调数据参数描述

| 属性    | 类型   | 说明                     |
| ------- | ------ | ------------------------ |
| result  | Number | 1：代表成功；0：代表失败 |
| message | String | 成功或者失败原因         |

[返回本章目录](#目录)

## 6.漫游镜头

### 功能描述

调整镜头到指定视野

### 调用方法

```js
let jsonData = {
  coordType: 0,
  coordTypeZ: 0,
  loopMode: 'none',
  points: [
    {
      coord: [114.0091198976084, 22.54002276469996], //以深圳湾经纬度为例
      coordZ: 100,
      distance: 1000,
      pitch: 30,
      yaw: 20,
      speed: 600,
    },
    {
      coord: [113.94033481501867, 22.552220518959626],
      coordZ: 100,
      distance: 1000,
      pitch: 30,
      yaw: 20,
      speed: 600,
    },
    {
      coord: [113.93203721147756, 22.514991783112677],
      coordZ: 100,
      distance: 1000,
      pitch: 30,
      yaw: 20,
      speed: 600,
    },
    {
      coord: [113.91325238327491, 22.47417072925387],
      coordZ: 100,
      distance: 1000,
      pitch: 30,
      yaw: 20,
      speed: 600,
    },
    {
      coord: [113.89786284605646, 22.48010945895795],
      coordZ: 100,
      distance: 1000,
      pitch: 30,
      yaw: 20,
      speed: 600,
    },
  ],
};
appInstance.uniCall('roamingCamera', jsonData, (result) => {
  console.log(result);
});
```

#### 参数描述

| 属性               | 类型   | 说明                                                                                                                          |
| ------------------ | ------ | ----------------------------------------------------------------------------------------------------------------------------- |
| coordType          | Number | XY 轴坐标模式 坐标类型(0:X 经度 Y 纬度；1:X 米 Y 米，相对世界 00 点) 目前该属性仅支持属性值为 0                               |
| coordTypeZ         | Number | Z 轴坐标模式 坐标高度类型，单位：米(0:相对 3D 世界 0 海拔；1:相对 3D 世界地表；2:相对 3D 模型表面) 目前该属性仅支持属性值为 0 |
| loopMode           | String | 循环模式，none：不循环；round：往返循环；repeat：从头循环                                                                     |
| points             | Array  | 相机漫游数据集合                                                                                                              |
| points[0].coord    | Array  | XY 轴坐标，X：经度；Y：纬度                                                                                                   |
| points[0].coordZ   | Number | Z 轴高度（单位：米）                                                                                                          |
| points[0].distance | Number | 镜头与坐标点距离(单位:米)                                                                                                     |
| points[0].pitch    | Number | 镜头俯仰角，摄像机和观察点同一水平面为 0 度，摄像机高于观察点为正方向，单位：度，值域范围：-89~89                             |
| points[0].yaw      | Number | 镜头偏航角，摄像机在观察点正南为 0 度，摄像机绕观察点顺时针旋转为正，单位：度，值域范围：-360~360                             |
| points[0].speed    | Number | 镜头速度 (单位:米/秒)                                                                                                         |

### 漫游镜头流渲染效果

<video 
    width=544  
    src='./contents/mediaFiles/video/roveLens-streaming.mp4' 
    frameborder=0 
    controls
    allowfullscreen>
</video>

### 漫游镜头端渲染效果

<video 
    width=544 
    src='./contents/mediaFiles/video/roveLens.mp4' 
    frameborder=0 
    controls
    allowfullscreen>
</video>

#### 回调数据

```json
{
  "result": 1,
  "message": "成功。"
}
```

#### 回调数据参数描述

| 属性    | 类型   | 说明                     |
| ------- | ------ | ------------------------ |
| result  | Number | 1：代表成功；0：代表失败 |
| message | String | 成功或者失败原因         |

[返回本章目录](#目录)

## 7.设置漫游镜头状态

### 功能描述

设置漫游镜头状态

### 调用方法

```js
appInstance.uniCall('setCameraRoamingState', { state: 'stop' }, (result) => {
  console.log(result);
});
```

#### 参数描述

| 属性  | 类型   | 说明                                                       |
| ----- | ------ | ---------------------------------------------------------- |
| state | String | pause:暂停移动; continue:继续移动; stop:停止移动, 释放焦点 |

#### 回调数据

```json
{
  "result": 1,
  "message": "成功。"
}
```

#### 回调数据参数描述

| 属性    | 类型   | 说明                     |
| ------- | ------ | ------------------------ |
| result  | Number | 1：代表成功；0：代表失败 |
| message | String | 成功或者失败原因         |

[返回本章目录](#目录)

## 8.环绕旋转镜头

### 功能描述

环绕旋转镜头视野

### 调用方法

```js
let jsonData = {
  enabled: true,
  duration: 60,
  direction: 'clockwise',
  interruptable: true,
};

appInstance.uniCall('rotateCamera', jsonData, (result) => {
  console.log(result);
});
```

#### 参数描述

| 属性          | 类型    | 说明                                                    |
| ------------- | ------- | ------------------------------------------------------- |
| enabled       | Boolean | 是否启用相机围绕目标飞行                                |
| duration      | Number  | 飞行一周所需要的秒数，数值越大飞行越慢                  |
| direction     | String  | 飞行方向，clockwise 为顺时针，counterclockwise 为逆时针 |
| interruptable | Boolean | 是否可以被打断，默认为 true                             |

#### 回调数据

```json
{
  "result": 1,
  "message": "成功。"
}
```

#### 回调数据参数描述

| 属性    | 类型   | 说明                     |
| ------- | ------ | ------------------------ |
| result  | Number | 1：代表成功；0：代表失败 |
| message | String | 成功或者失败原因         |

[返回本章目录](#目录)

## 9.路径移动镜头

### 功能描述

镜头跟随路径移动

### 调用方法

```js
let jsonData = {
  pathId: 'pathId',
  loopMode: 'round',
  reverse: false,
  distance: 300,
  pitch: 35,
  speed: 2,
};
appInstance.uniCall('pathingCamera', jsonData, (result) => {
  console.log(result);
});
```

#### 参数描述

| 属性     | 类型    | 说明                                                                                              |
| -------- | ------- | ------------------------------------------------------------------------------------------------- |
| pathId   | String  | 路径 ID (唯一标识)                                                                                |
| loopMode | String  | 循环模式：none，不循环；round，往返；repeat，从头循环                                             |
| reverse  | Boolean | 是否反向移动                                                                                      |
| distance | Number  | 镜头距离覆盖物距离(单位:米)                                                                       |
| pitch    | Number  | 镜头俯仰角，摄像机和观察点同一水平面为 0 度，摄像机高于观察点为正方向，单位：度，值域范围：-89~89 |
| speed    | Number  | 镜头速度 (单位:米/秒)                                                                             |

### 路径移动镜头流渲染效果

<video 
    width=544 
    src='./contents/mediaFiles/video/camera/pathingCamera.mp4' 
    frameborder=0 
    controls
    allowfullscreen>
</video>

### 路径移动镜头端渲染效果

<video 
    width=544 
    src='./contents/mediaFiles/video/camera/pathingCameraDuan.mp4' 
    frameborder=0 
    controls
    allowfullscreen>
</video>

#### 回调数据

```json
{
  "result": 1,
  "message": "成功。"
}
```

#### 回调数据参数描述

| 属性    | 类型   | 说明                     |
| ------- | ------ | ------------------------ |
| result  | Number | 1：代表成功；0：代表失败 |
| message | String | 成功或者失败原因         |

[返回本章目录](#目录)

## 10.设置路径移动镜头状态

### 功能描述

设置镜头跟随路径移动的状态

### 调用方法

```js
appInstance.uniCall('setCameraPathingState', { state: 'stop' }, (result) => {
  console.log(result);
});
```

#### 参数描述

| 属性  | 类型   | 说明                                                       |
| ----- | ------ | ---------------------------------------------------------- |
| state | String | pause:暂停移动; continue:继续移动; stop:停止移动, 释放焦点 |

#### 回调数据

```json
{
  "result": 1,
  "message": "成功。"
}
```

#### 回调数据参数描述

| 属性    | 类型   | 说明                     |
| ------- | ------ | ------------------------ |
| result  | Number | 1：代表成功；0：代表失败 |
| message | String | 成功或者失败原因         |

## 11.模型跟随镜头

### 功能描述

模型跟随镜头

### 调用方法

```js
let jsonData = {
  modelId: 'modelId',
  distance: 1000,
  distanceMin: 10,
  distanceMax: 20000,
  pitch: 30,
  heading: 0,
  focusType: 'auto',
  viewPoint: 'center',
  pointOffset: [0, 0, 2],
  relative: 'self',
};

appInstance.uniCall('followingCamera', jsonData, (result) => {
  console.log(result);
});
```

#### 参数描述

| 属性        | 类型   | 说明                                                                                                                                                                                                            |
| ----------- | ------ | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| modelId     | String | 镜头跟踪的模型 Id，镜头和模型之前保持相对静止关系，支持运动的模型                                                                                                                                               |
| distance    | Number | 镜头与被跟踪物体的距离(单位:米)                                                                                                                                                                                 |
| distanceMin | Number | 镜头与被跟踪物体的最近距离(单位:米)                                                                                                                                                                             |
| distanceMax | Number | 镜头与被跟踪物体的最远距离(单位:米)                                                                                                                                                                             |
| pitch       | Number | 镜头俯仰角，摄像机和观察点同一水平面为 0 度，摄像机高于观察点为正方向，单位：度，值域范围：-89~89                                                                                                               |
| heading     | Number | 镜头偏航角，摄像机在模型前进方向正南为 0 度，摄像机绕被观察模型顺时针旋转为正，单位：度，值域范围：-360~360                                                                                                     |
| focusType   | String | 聚焦模式，"auto": 根据模型大小，自动计算 distance，"custom": 使用用户传入的 distance，默认:"auto"                                                                                                               |
| viewPoint   | String | 视点位置，"pivot"：轴点；"center"，对象中心。默认值："center"                                                                                                                                                   |
| pointOffset | Array  | 视点的位置偏移，默认值是[0, 0, 0]，表示相对于对象中心或者轴点的相对自身坐标系的 x、y、z 偏移位置（单位：米）                                                                                                    |
| relative    | String | 视角的相对位置，"self"，视角相对模型固定，"world"，视角相对世界固定。鼠标可以支持环绕模型旋转和缩放。如果在 self 模式下，鼠标旋转了，会自动变为 world 模式，直到用户重新调用 followingCamera 设置为 self 模式。 |

#### 回调数据

```json
{
  "result": 1,
  "message": "成功。"
}
```

#### 回调数据参数描述

| 属性    | 类型   | 说明                     |
| ------- | ------ | ------------------------ |
| result  | Number | 1：代表成功；0：代表失败 |
| message | String | 成功或者失败原因         |

[返回本章目录](#目录)

## 12.设置模型跟随镜头状态

### 功能描述

设置模型跟随镜头状态

### 调用方法

```js
let jsonData = {
  state: 'stop',
};

appInstance.uniCall('setCameraFollowingState', jsonData, (result) => {
  console.log(result);
});
```

#### 参数描述

| 属性  | 类型   | 说明                                                       |
| ----- | ------ | ---------------------------------------------------------- |
| state | String | pause:暂停跟随; continue:继续跟随; stop:停止跟随, 释放焦点 |

#### 回调数据

```json
{
  "result": 1,
  "message": "成功。"
}
```

#### 回调数据参数描述

| 属性    | 类型   | 说明                     |
| ------- | ------ | ------------------------ |
| result  | Number | 1：代表成功；0：代表失败 |
| message | String | 成功或者失败原因         |

[返回本章目录](#目录)

## 13.聚焦图层

### 功能描述

聚焦图层

### 调用方法

```js
let jsonData = {
  id: 'layerId',
  overlayType: 'landmark',
  pitch: 30,
  heading: 0,
  ratio: 1,
  pointOffset: [0, 0, 2],
  distance: 100,
};
appInstance.uniCall('focusById', jsonData, (result) => {
  console.log(result);
});
```

#### 参数描述

| 属性        | 类型   | 说明                                                                                                                                          | 端渲染 | 流渲染                  |
| ----------- | ------ | --------------------------------------------------------------------------------------------------------------------------------------------- | ------ | ----------------------- |
| id          | String | 图层 ID （唯一标识）                                                                                                                          | 支持   | 支持                    |
| overlayType | String | 图层类别 overlayType，详见 内置枚举                                                                                                           | 支持   | 不支持 3DTile 和 gisMap |
| pitch       | Number | 聚焦后镜头俯仰角，摄像机和聚焦点同一水平面为 0 度，摄像机高于观察点为正方向，单位：度，值域范围：-89~89，如果无则是默认角度                   | 支持   | 支持                    |
| heading     | Number | 聚焦后镜头偏航角，摄像机在观察点正南为 0 度，摄像机绕观察点顺时针旋转为正，单位：度，值域范围：-360~360                                       | 支持   | 支持                    |
| ratio       | Number | 聚焦镜头中所有元素占屏幕比例的系数，默认值为 1，值域范围 0-2，小于 1 为对象占屏幕的比例小，大于 1 为比例大，设置 distance 后 ratio 参数不生效 | 支持   | 支持                    |
| pointOffset | Array  | 视点的位置偏移，默认值是[0, 0, 0]，表示相对自身坐标系的 x、y、z 偏移位置（单位：米）                                                          | 支持   | 支持                    |
| distance    | Number | 聚焦后摄像机的默认镜头距对象距离(单位:米)，如果无则根据对象大小自动计算                                                                       | 支持   | 支持                    |

#### 回调数据

```json
{
  "result": 1,
  "message": "成功。"
}
```

#### 回调数据参数描述

| 属性    | 类型   | 说明                     |
| ------- | ------ | ------------------------ |
| result  | Number | 1：代表成功；0：代表失败 |
| message | String | 成功或者失败原因         |

### 聚焦图层流渲染效果

<video 
    width=544 
    src='./contents/mediaFiles/video//camera/focusById.mp4' 
    frameborder=0 
    controls
    allowfullscreen>
</video>

### 聚焦图层端渲染效果

<video 
    width=544 
    src='./contents/mediaFiles/video/camera/focusByIdDuan.mp4' 
    frameborder=0 
    controls
    allowfullscreen>
</video>

[返回本章目录](#目录)

## 14.聚焦类别图层

### 功能描述

聚焦类别图层

### 调用方法

```js
appInstance.uniCall(
  'focusByType',
  {
    overlayType: 'landmark',
    ratio: 1,
  },
  (result) => {
    console.log(result);
  }
);
```

#### 参数描述

| 属性        | 类型   | 说明                                                                                                       | 端渲染        | 流渲染                  |
| ----------- | ------ | ---------------------------------------------------------------------------------------------------------- | ------------- | ----------------------- |
| overlayType | String | 图层类别 overlayType，详见 内置枚举                                                                        | 不支持 3DTile | 不支持 3DTile 和 gisMap |
| ratio       | Number | 聚焦镜头中所有元素占屏幕比例的系数，默认值为 1，值域范围 0-2，小于 1 为对象占屏幕的比例小，大于 1 为比例大 | 支持          | 支持                    |

#### 回调数据

```json
{
  "result": 1,
  "message": "成功。"
}
```

#### 回调数据参数描述

| 属性    | 类型   | 说明                     |
| ------- | ------ | ------------------------ |
| result  | Number | 1：代表成功；0：代表失败 |
| message | String | 成功或者失败原因         |

### 聚焦类别图层流渲染效果

<video 
    width=544 
    src='./contents/mediaFiles/video/camera/focusByType.mp4' 
    frameborder=0 
    controls
    allowfullscreen>
</video>

### 聚焦类别图层端渲染效果

<video 
    width=544 
    src='./contents/mediaFiles/video/camera/focusByTypeDuan.mp4' 
    frameborder=0 
    controls
    allowfullscreen>
</video>

[返回本章目录](#目录)

## 15.聚焦图层子对象

### 功能描述

聚焦图层子对象

### 调用方法

```js
let jsonData = {
  id: 'overlayId',
  idLayer: 'layerId',
  layerType: 'landmarkLayer',
  pitch: 30,
  heading: 0,
  distance: 100,
  relative: 'world',
};
appInstance.uniCall('focusByLayer', jsonData, (result) => {
  console.log(result);
});
```

#### 参数描述

| 属性      | 类型   | 说明                                                                                                                        |
| --------- | ------ | --------------------------------------------------------------------------------------------------------------------------- |
| id        | String | 图层中子对象 id                                                                                                             |
| idLayer   | String | 图层 （唯一标识）ID                                                                                                         |
| layerType | String | 含子对象图层类别 objLayerType，详见 内置枚举                                                                                |
| pitch     | Number | 聚焦后镜头俯仰角，摄像机和聚焦点同一水平面为 0 度，摄像机高于观察点为正方向，单位：度，值域范围：-89~89，如果无则是默认角度 |
| heading   | Number | 聚焦后镜头偏航角，摄像机在观察点正南为 0 度，摄像机绕观察点顺时针旋转为正，单位：度，值域范围：-360~360                     |
| distance  | Number | 聚焦后摄像机的默认镜头距对象距离(单位:米)，如果无则根据对象大小自动计算                                                     |
| relative  | String | 摄像机视角的相对位置，"self"，视角相对模型正方向为 0 度，"world"，视角相对世界正南为 0 度                                   |

### 聚焦图层子图层流渲染效果

<video 
    width=544 
    src='./contents/mediaFiles/video/camera/focusByLayer.mp4' 
    frameborder=0 
    controls
    allowfullscreen>
</video>

### 聚焦图层子图层端渲染效果

<video 
    width=544 
    src='./contents/mediaFiles/video/camera/focusByLayerDuan.mp4' 
    frameborder=0 
    controls
    allowfullscreen>
</video>

#### 回调数据

```json
{
  "result": 1,
  "message": "成功。"
}
```

#### 回调数据参数描述

| 属性    | 类型   | 说明                     |
| ------- | ------ | ------------------------ |
| result  | Number | 1：代表成功；0：代表失败 |
| message | String | 成功或者失败原因         |

[返回本章目录](#目录)

## 16.聚焦图例子图层

### 功能描述

聚焦图例子图层

### 调用方法

```js
let jsonData = {
  legend: 'legendName',
  idLayer: 'layerId',
  layerType: 'landmarkLayer',
};
appInstance.uniCall('focusByLegend', jsonData, (result) => {
  console.log(result);
});
```

#### 参数描述

| 属性      | 类型   | 说明                                           |
| --------- | ------ | ---------------------------------------------- |
| legend    | String | 图例名称                                       |
| idLayer   | String | 图层 （唯一标识）ID                            |
| layerType | String | 含图例图层类别 lengendLayerType，详见 内置枚举 |

### 聚焦图例子图层流渲染效果

<video 
    width=544 
    src='./contents/mediaFiles/video/camera/focusByLegend.mp4' 
    frameborder=0 
    controls
    allowfullscreen>
</video>

### 聚焦图例子图层端渲染效果

<video 
    width=544 
    src='./contents/mediaFiles/video/camera/focusByLegendDuan.mp4' 
    frameborder=0 
    controls
    allowfullscreen>
</video>

#### 回调数据

```json
{
  "result": 1,
  "message": "成功。"
}
```

#### 回调数据参数描述

| 属性    | 类型   | 说明                     |
| ------- | ------ | ------------------------ |
| result  | Number | 1：代表成功；0：代表失败 |
| message | String | 成功或者失败原因         |

[返回本章目录](#目录)

## 17.聚焦模型

### 功能描述

聚焦模型

### 调用方法

```js
let jsonData = {
  id: 'modelId',
  layerId: 'layerId',
  modelType: 'model',
  pitch: 30,
  heading: 0,
  distance: 100,
  focusType: 'auto',
  viewPoint: 'center',
  pointOffset: [0, 0, 2],
  relative: 'world',
};
appInstance.uniCall('focusModel', jsonData, (result) => {
  console.log(result);
});
```

#### 参数描述

| 属性        | 类型   | 说明                                                                                                                        | 端渲染                     | 流渲染 |
| ----------- | ------ | --------------------------------------------------------------------------------------------------------------------------- | -------------------------- | ------ |
| id          | String | 模型 ID                                                                                                                     | 支持                       | 支持   |
| layerId     | String | 模型所属的图层 Id，Id 可以通过 getModelsByType 接口获得。                                                                   | 支持                       | 不支持 |
| modelType   | String | model（模型），building（建筑物），connection（关系线），iconModel（模型型号），graphic（图形），analysis（分析）           | 不支持 graphic 和 analysis | 支持   |
| pitch       | Number | 聚焦后镜头俯仰角，摄像机和聚焦点同一水平面为 0 度，摄像机高于观察点为正方向，单位：度，值域范围：-89~89，如果无则是默认角度 | 支持                       | 支持   |
| heading     | Number | 聚焦后镜头偏航角，摄像机在观察点正南为 0 度，摄像机绕观察点顺时针旋转为正，单位：度，值域范围：-360~360                     | 支持                       | 支持   |
| distance    | Number | 聚焦后摄像机的默认镜头距对象距离(单位:米)，如果无则根据对象大小自动计算                                                     | 支持                       | 支持   |
| focusType   | String | 聚焦模式，"auto": 根据模型大小，自动计算 distance，"custom": 使用用户传入的 distance，默认:"auto"                           | 支持                       | 支持   |
| viewPoint   | String | 视点位置，"pivot"：轴点；"center"，对象中心。默认值："center"                                                               | 支持                       | 支持   |
| pointOffset | Array  | 视点的位置偏移，默认值是[0, 0, 0]，表示相对于对象中心或者轴点的相对自身坐标系的 x、y、z 偏移位置（单位：米）                | 支持                       | 支持   |
| relative    | String | 摄像机视角的相对位置，"self"，视角相对模型正方向为 0 度，"world"，视角相对世界正南为 0 度                                   | 支持                       | 支持   |

#### 回调数据

```json
{
  "result": 1,
  "message": "成功。"
}
```

#### 回调数据参数描述

| 属性    | 类型   | 说明                     |
| ------- | ------ | ------------------------ |
| result  | Number | 1：代表成功；0：代表失败 |
| message | String | 成功或者失败原因         |

<!-- ### 聚焦模型端渲染效果:

<video
    width=544
    src='./contents/mediaFiles/video/camera/focusModelDuan.mp4'
    frameborder=0
    controls
    allowfullscreen>
</video> -->

[返回本章目录](#目录)

## 18.聚焦类别模型

### 功能描述

聚焦类别模型

### 调用方法

```js
appInstance.uniCall('focusModelByType', { modelType: 'model' }, (result) => {
  console.log(result);
});
```

#### 参数描述

<table>
    <tr>
      <th>参数</th>
      <th>说明</th>
      <th>值</th>
      <th>类型</th>
      <th>备注</th>      
      <th>端渲染</th>
      <th>流渲染</th>
    </tr>
    <tr>
      <td rowspan="7" style="text-align:center;">modelType</td>
      <td rowspan="7" style="text-align:center;">模型类别</td>
      <td>model</td>
      <td>String</td>
      <td>模型</td>      
      <td>支持</td>
      <td>支持</td>
    </tr>
    <tr>
      <td>building</td>
      <td>String</td>
      <td>建筑物</td>      
      <td>支持</td>
      <td>支持</td>
    </tr>
    <tr>
      <td>connection</td>
      <td>String</td>
      <td>关系线</td>      
      <td>支持</td>
      <td>支持</td>
    </tr>
    <tr>
      <td>iconModel</td>
      <td>String</td>
      <td>模型型号</td>      
      <td>支持</td>
      <td>支持</td>
    </tr>
    <tr>
      <td>graphic</td>
      <td>String</td>
      <td>图形</td>      
      <td>不支持</td>
      <td>支持</td>
    </tr>
        <tr>
      <td>analysis</td>
      <td>String</td>
      <td>分析</td>
      <td>不支持</td>
      <td>支持</td>
    </tr>

</table>

#### 回调数据

```json
{
  "result": 1,
  "message": "成功。"
}
```

#### 回调数据参数描述

| 属性    | 类型   | 说明                     |
| ------- | ------ | ------------------------ |
| result  | Number | 1：代表成功；0：代表失败 |
| message | String | 成功或者失败原因         |

[返回本章目录](#目录)

## 19.聚焦建筑

### 功能描述

聚焦建筑

### 调用方法

```js
let jsonData = {
  buildingId: 'building0001',
  pitch: 30,
  heading: 0,
  distance: 100,
};
appInstance.uniCall('focusBuilding', jsonData, (result) => {
  console.log(result);
});
```

#### 参数描述

| 属性       | 类型   | 说明                                                                                                                        |
| ---------- | ------ | --------------------------------------------------------------------------------------------------------------------------- |
| buildingId | String | 建筑物 ID                                                                                                                   |
| pitch      | Number | 聚焦后镜头俯仰角，摄像机和聚焦点同一水平面为 0 度，摄像机高于观察点为正方向，单位：度，值域范围：-89~89，如果无则是默认角度 |
| heading    | Number | 聚焦后镜头偏航角，摄像机在观察点正南为 0 度，摄像机绕观察点顺时针旋转为正，单位：度，值域范围：-360~360                     |
| distance   | Number | 聚焦后摄像机的默认镜头距对象距离(单位:米)，如果无则根据对象大小自动计算                                                     |

#### 回调数据

```json
{
  "result": 1,
  "message": "成功。"
}
```

#### 回调数据参数描述

| 属性    | 类型   | 说明                     |
| ------- | ------ | ------------------------ |
| result  | Number | 1：代表成功；0：代表失败 |
| message | String | 成功或者失败原因         |

### 聚焦建筑流渲染效果

<video 
    width=544 
    src='./contents/mediaFiles/video/camera/focusBuilding.mp4' 
    frameborder=0 
    controls
    allowfullscreen>
</video>

### 聚焦建筑端渲染效果

<video 
    width=544 
    src='./contents/mediaFiles/video/camera/focusBuildingDuan.mp4' 
    frameborder=0 
    controls
    allowfullscreen>
</video>

[返回本章目录](#目录)

## 20.聚焦楼层

### 功能描述

聚焦楼层

### 调用方法

```js
let jsonData = {
  buildingId: 'building0001',
  floor: 3,
  pitch: 30,
  heading: 0,
  distance: 100,
};
appInstance.uniCall('focusFloor', jsonData, (result) => {
  console.log(result);
});
```

#### 参数描述

| 属性       | 类型   | 说明                                                                                                                        |
| ---------- | ------ | --------------------------------------------------------------------------------------------------------------------------- |
| buildingId | String | 建筑物 ID                                                                                                                   |
| floor      | Number | 楼层                                                                                                                        |
| pitch      | Number | 聚焦后镜头俯仰角，摄像机和聚焦点同一水平面为 0 度，摄像机高于观察点为正方向，单位：度，值域范围：-89~89，如果无则是默认角度 |
| heading    | Number | 聚焦后镜头偏航角，摄像机在观察点正南为 0 度，摄像机绕观察点顺时针旋转为正，单位：度，值域范围：-360~360                     |
| distance   | Number | 聚焦后摄像机的默认镜头距对象距离(单位:米)，如果无则根据对象大小自动计算                                                     |

#### 回调数据

```json
{
  "result": 1,
  "message": "成功。"
}
```

#### 回调数据参数描述

| 属性    | 类型   | 说明                     |
| ------- | ------ | ------------------------ |
| result  | Number | 1：代表成功；0：代表失败 |
| message | String | 成功或者失败原因         |

## 21.聚焦房间

### 功能描述

聚焦房间

### 调用方法:

```js
let jsonData = {
  buildingId: 'building0001',
  floor: 3,
  room: 'room0001',
  pitch: 30,
  heading: 0,
  distance: 100,
};
appInstance.uniCall('focusRoom', jsonData, (result) => {
  console.log(result);
});
```

#### 参数描述：

| 属性       | 类型   | 说明                                                                                                                        |
| ---------- | ------ | --------------------------------------------------------------------------------------------------------------------------- |
| buildingId | String | 建筑物 ID                                                                                                                   |
| floor      | Number | 楼层                                                                                                                        |
| room       | String | 房间                                                                                                                        |
| pitch      | Number | 聚焦后镜头俯仰角，摄像机和聚焦点同一水平面为 0 度，摄像机高于观察点为正方向，单位：度，值域范围：-89~89，如果无则是默认角度 |
| heading    | Number | 聚焦后镜头偏航角，摄像机在观察点正南为 0 度，摄像机绕观察点顺时针旋转为正，单位：度，值域范围：-360~360                     |
| distance   | Number | 聚焦后摄像机的默认镜头距对象距离(单位:米)，如果无则根据对象大小自动计算                                                     |

#### 回调数据：

```json
{
  "result": 1,
  "message": "成功。"
}
```

#### 回调数据参数描述：

| 属性    | 类型   | 说明                     |
| ------- | ------ | ------------------------ |
| result  | Number | 1：代表成功；0：代表失败 |
| message | String | 成功或者失败原因         |

[返回本章目录](#目录)

## 22.聚焦世界地图 <span style="width: 40px;height: 21px;display:inline-block;background: #0fcccc;margin-left: 5px;line-height: 19px;"><span style="width: 100%;height: 100%;background: url(./img/stream.png) no-repeat 4px 5px;background-size: 12px 10px;text-indent: 22px;font-size: 12px;color: #ffffff;line-height: 20px;display:inline-block;vertical-align: top;">流</span></span>

### 功能描述

聚焦世界地图

### 调用方法:

```js
let jsonData = {
  style: 'global01',
};

appInstance.uniCall('focusWorldMap', jsonData, (result) => {
  console.log(result);
});
```

#### 参数描述：

| 属性  | 类型   | 说明                                               |
| ----- | ------ | -------------------------------------------------- |
| style | String | 聚焦到全球视角，需要在可执行程序目录下有相应的资源 |

#### 回调数据：

```json
{
  "result": 1,
  "message": "成功。"
}
```

#### 回调数据参数描述：

| 属性    | 类型   | 说明                     |
| ------- | ------ | ------------------------ |
| result  | Number | 1：代表成功；0：代表失败 |
| message | String | 成功或者失败原因         |

[返回本章目录](#目录)

## 23.聚焦世界国家 <span style="width: 40px;height: 21px;display:inline-block;background: #0fcccc;margin-left: 5px;line-height: 19px;"><span style="width: 100%;height: 100%;background: url(./img/stream.png) no-repeat 4px 5px;background-size: 12px 10px;text-indent: 22px;font-size: 12px;color: #ffffff;line-height: 20px;display:inline-block;vertical-align: top;">流</span></span>

### 功能描述

聚焦世界国家

### 调用方法:

```js
let jsonData = {
  country: 'name',
  distance: 5000,
};

appInstance.uniCall('focusCountry', jsonData, (result) => {
  console.log(result);
});
```

#### 参数描述：

| 属性     | 类型   | 说明                   |
| -------- | ------ | ---------------------- |
| country  | String | 国家名称，中文或者英文 |
| distance | Number | 单位，米               |

#### 回调数据：

```json
{
  "result": 1,
  "message": "成功。"
}
```

#### 回调数据参数描述：

| 属性    | 类型   | 说明                     |
| ------- | ------ | ------------------------ |
| result  | Number | 1：代表成功；0：代表失败 |
| message | String | 成功或者失败原因         |

[返回本章目录](#目录)

## 24.聚焦中国地图 <span style="width: 40px;height: 21px;display:inline-block;background: #0fcccc;margin-left: 5px;line-height: 19px;"><span style="width: 100%;height: 100%;background: url(./img/stream.png) no-repeat 4px 5px;background-size: 12px 10px;text-indent: 22px;font-size: 12px;color: #ffffff;line-height: 20px;display:inline-block;vertical-align: top;">流</span></span>

### 功能描述

聚焦中国地图

### 调用方法:

```js
let jsonData = {
  style: 'global01',
};

appInstance.uniCall('focusChinaMap', jsonData, (result) => {
  console.log(result);
});
```

#### 参数描述：

| 属性  | 类型   | 说明                                               |
| ----- | ------ | -------------------------------------------------- |
| style | String | 聚焦到中国视角，需要在可执行程序目录下有相应的资源 |

#### 回调数据：

```json
{
  "result": 1,
  "message": "成功。"
}
```

#### 回调数据参数描述：

| 属性    | 类型   | 说明                     |
| ------- | ------ | ------------------------ |
| result  | Number | 1：代表成功；0：代表失败 |
| message | String | 成功或者失败原因         |

[返回本章目录](#目录)

## 25.聚焦中国省份 <span style="width: 40px;height: 21px;display:inline-block;background: #0fcccc;margin-left: 5px;line-height: 19px;"><span style="width: 100%;height: 100%;background: url(./img/stream.png) no-repeat 4px 5px;background-size: 12px 10px;text-indent: 22px;font-size: 12px;color: #ffffff;line-height: 20px;display:inline-block;vertical-align: top;">流</span></span>

### 功能描述

聚焦中国省份

### 调用方法:

```js
let jsonData = {
  province: 'name',
  distance: 5000,
};

appInstance.uniCall('focusProvince', jsonData, (result) => {
  console.log(result);
});
```

#### 参数描述：

| 属性     | 类型   | 说明             |
| -------- | ------ | ---------------- |
| country  | String | 中国省名称，中文 |
| distance | Number | 单位，米         |

#### 回调数据：

```json
{
  "result": 1,
  "message": "成功。"
}
```

#### 回调数据参数描述：

| 属性    | 类型   | 说明                     |
| ------- | ------ | ------------------------ |
| result  | Number | 1：代表成功；0：代表失败 |
| message | String | 成功或者失败原因         |

[返回本章目录](#目录)

# 应用构造操作

## 目录

- [1.构造应用](#1构造应用)
- [2.销毁应用](#2销毁应用)
- [3.获取应用状态信息](#3获取应用状态信息)

## 1.构造应用

### 功能描述

构造应用

### 调用方法

```js
let appInstance = new TGApp.App();
```

 

[返回本章目录](#目录)

## 2.销毁应用

### 功能描述

销毁应用

### 调用方法

```js
appInstance.uniCall('destroy', {}, (result) => {
  console.log(result);
});
```

#### 回调数据

```json
{
  "result": 1,
  "message": "成功。"
}
```

#### 回调数据参数描述

| 属性    | 类型   | 说明                     |
| ------- | ------ | ------------------------ |
| result  | Number | 1：代表成功；0：代表失败 |
| message | String | 成功或者失败原因         |


[返回本章目录](#目录)

## 3.获取应用状态信息

### 功能描述

获取应用状态信息

### 调用方法

```js
appInstance.uniCall('getAppInfo', {}, (result) => {
  console.log(result);
});
```

#### 回调数据

```json
{
  "result": 1,
  "message": "成功。",
  "tgApiSdkVer": "3.3",           // 图观API版本
  "tgApiDocUrl": "http://www.tuguan.net/doc/tg-api/", // 图观API文档在线地址
  "clientWidth": 1920,            // 当前客户端控件宽，端渲染对应canvas尺寸，流渲染对应串流画面实际分辨率
  "clientHeight": 1080,           // 当前客户端控件高，端渲染对应canvas尺寸，流渲染对应串流画面实际分辨率

  // 流渲染独有属性
  "streamingSdkVer": "3.3.1",     // 流渲染SDK小版本
  "streamingServerVer": "3.3",    // 流渲染服务器版本
  "streamingEngineVer": "3.2.1",  // 流渲染引擎版本
  "streamingWidthMax": 1920,      // 流渲染通道最大宽
  "streamingHeightMax": 1080,     // 流渲染通道最大高
  "streamingRateMax": 51200,      // 流渲染通道最大码率，单位kbps
  "streamingFpsMax": 60,          // 流渲染通道最大帧率

  // 端渲染独有属性
  "sceneSdkVer": "3.3"            // 端渲染SDK小版本
}
```

#### 回调数据参数描述

| 属性               | 类型   | 说明                                                                   |端渲染|流渲染|
| ------------------ | ------ | ---------------------------------------------------------------------- |------- |------- |
| result             | Number | 1：代表成功；0：代表失败                                               |支持|支持|
| message            | String | 成功或者失败原因                                                       |支持|支持|
| tgApiSdkVer        | String | 图观 API 版本                                                          |支持|支持|
| tgApiDocUrl        | String | 图观 API 文档在线地址                                                  |支持|支持|
| sceneSdkVer        | String | 端渲染 SDK 小版本                                      |支持|不支持|
| streamingSdkVer    | String | 流渲染 SDK 小版本                                      |不支持|支持|
| streamingServerVer | String | 流渲染服务器版本                                       |不支持|支持|
| streamingEngineVer | String | 流渲染引擎版本                                         |不支持|支持|
| streamingWidthMax  | Number | 流渲染通道最大宽                                       |不支持|支持|
| streamingHeightMax | Number | 流渲染通道最大高                                       |不支持|支持|
| streamingRateMax   | Number | 流渲染通道最大码率，单位 kbps                          |不支持|支持|
| streamingFpsMax    | Number | 流渲染通道最大帧率                                     |不支持|支持|
| clientWidth        | Number | 当前客户端控件宽，端渲染对应 canvas 尺寸，流渲染对应串流画面实际分辨率 |支持|支持|
| clientHeight       | Number | 当前客户端控件高，端渲染对应 canvas 尺寸，流渲染对应串流画面实际分辨率 |支持|支持|

[返回本章目录](#目录)

<!-- ### 切换场景

#### 功能描述：

切换场景

#### 调用方法：

```js
appInstance.uniCall('switchScene',{
   name: "sceneName"
 },(result) => {
    console.log(result);
});

```

##### 参数描述：

| 属性      | 类型   | 说明                                               |
| --------- | ------ | -------------------------------------------------- |
| name | String | 场景名称                                      |

##### 回调数据：

```json
{
  "result": 1,
  "message": "成功。"
}
```

##### 回调数据参数描述：

| 属性        | 类型   | 说明                                             |
| ----------- | ------ | -------------------------------------------- |
| result      | Number | 1：代表成功；0：代表失败                                      |
| message     | String | 成功或者失败原因                                             |

### 后台加载场景

#### 功能描述：

后台加载场景

#### 调用方法：

```js
appInstance.uniCall('loadScene',{
   name: "sceneName",
   url: "https://www.tuguan.net/scenes/abc",
   mode: "streaming",
   token: "ABCDEFG",
 },(result) => {
    console.log(result);
});

```
##### 参数描述：

| 属性      | 类型   | 说明                                               |
| --------- | ------ | -------------------------------------------------- |
| name  | String | 场景名称                                      |
| url   | String | 场景链接，流渲染为 ""                                     |
| mode  | String | scene 代表端渲染，streaming 代表流渲染                 |
| token | String | 流渲染加载 token 值，流渲染为 ""                                      |

##### 回调数据：

```json
{
  "result": 1,
  "message": "成功。"
}
```
##### 回调数据参数描述：

| 属性        | 类型   | 说明                                             |
| ----------- | ------ | -------------------------------------------- |
| result      | Number | 1：代表成功；0：代表失败                                      |
| message     | String | 成功或者失败原因                                             | -->

<!-- ### 设置场景效果参数

#### 功能描述：

设置场景效果参数

#### 调用方法：

```js
appInstance.uniCall('setSceneEffect',{
    lightPower: 1.0
 },(result) => {
    console.log(result);
});
```
##### 参数描述：

| 属性      | 类型   | 说明                                               |
| --------- | ------ | -------------------------------------------------- |
| lightPower  | Number | 图层对象中如果带有发光特性的光的亮度，值域范围0.0 - 10.0，默认1.0      |
##### 回调数据：

```json
{
  "result": 1,
  "message": "成功。"
}
```
##### 回调数据参数描述：

| 属性        | 类型   | 说明                                             |
| ----------- | ------ | -------------------------------------------- |
| result      | Number | 1：代表成功；0：代表失败                                      |
| message     | String | 成功或者失败原因                                             | -->

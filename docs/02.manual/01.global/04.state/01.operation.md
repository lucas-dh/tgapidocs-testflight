# 状态控制操作

## 目录

- [1.切换状态](#1切换状态)
- [2.获取状态信息](#2获取状态信息)

## 1.切换状态

### 功能描述

切换场景的状态

### 调用方法

```js
appInstance.uniCall(
  'switchState',
  {
    name: 'stateName',
    serviceName: 'service1',
    sceneName: 'scene1',
  },
  (result) => {
    console.log(result);
  }
);
```

#### 参数描述

| 属性        | 类型   | 说明                                                                              | 端渲染 | 流渲染 |
| ----------- | ------ | --------------------------------------------------------------------------------- | ------ | ------ |
| name        | String | 状态名称                                                                          | 支持   | 支持   |
| serviceName | String | 场景所属的服务，如果场景是当前服务的，可以不写。服务需要先通过 loadService 加载。 | 支持   | 支持   |
| sceneName   | String | 状态所属的场景，如果状态是当前场景的，可以不写                                    | 不涉及 | 支持   |

#### 回调数据

```json
{
  "result": 1,
  "message": "成功。"
}
```

#### 回调数据参数描述

| 属性    | 类型   | 说明                     |
| ------- | ------ | ------------------------ |
| result  | Number | 1：代表成功；0：代表失败 |
| message | String | 成功或者失败原因         |

[返回本章目录](#目录)

## 2.获取状态信息

### 功能描述

获取场景的状态信息

### 调用方法

```js
appInstance.uniCall('getStates', {}, (result) => {
  console.log(result);
});
```

#### 回调数据

```json
{
  "result": 1,
  "message": "成功。",
  "states": [
    {
      "name": "stateName1",
      "sceneName": "scene1",
      "default": true
    },
    {
      "name": "stateName2",
      "sceneName": "scene2",
      "default": false
    }
  ]
}
```

#### 回调数据参数描述

| 属性                | 类型    | 说明                                           | 端渲染 | 流渲染 |
| ------------------- | ------- | ---------------------------------------------- | ------ | ------ |
| result              | Number  | 1：代表成功；0：代表失败                       | 支持   | 支持   |
| message             | String  | 成功或者失败原因                               | 支持   | 支持   |
| states              | Arrary  | 获取状态的结果集                               | 支持   | 支持   |
| states[0].name      | String  | 状态名称                                       | 支持   | 支持   |
| states[0].sceneName | String  | 状态所属的场景，如果状态是当前场景的，可以不写 | 不涉及 | 支持   |
| states[0].default   | Boolean | 默认状态                                       | 支持   | 支持   |

[返回本章目录](#目录)

# WMS图层数据操作

## 目录

- [1.添加WMS图层](#1添加wms图层-流)
- [2.更新WMS图层样式](#2更新wms图层样式-流)
- [3.移除WMS图层样式](#3移除wms图层样式-流)


## 1.添加WMS图层 <span style="width: 40px;height: 21px;display:inline-block;background: #0fcccc;margin-left: 5px;line-height: 19px;"><span style="width: 100%;height: 100%;background: url(./img/stream.png) no-repeat 4px 5px;background-size: 12px 10px;text-indent: 22px;font-size: 12px;color: #ffffff;line-height: 20px;display:inline-block;vertical-align: top;">流</span></span>

### 功能描述:

添加WMS图层

### 调用方法:

```js
let jsonData = {   
    id: "idObj",
    wmsUrl: 'http://mapserver/beijing/wms',
    layerName: "layer",
    tokenName: 'accessToken',
    tokenValue: 'ABCDEFG',
    urlParams: 'filter="123"'
    visible: true,
    alpha: 0.5
}


appInstance.uniCall('addWMSLayer', jsonData, (result) => {
  console.log(result);
});
```

##### 参数描述：

| 属性         | 类型    | 说明                                                                |
| ------------ | ------- | ------------------------------------------------------------------- |
| id           | String  | 图层对象 id，必须是已经通过addGISMap接口添加的已有id，一个GISMap地图只能添加一个WMSLayer，第二个添加的会覆盖第一个 |
| wmsUrl         | String  | WMS数据根地址，不需要“？”后面的参数                                      |
| layerName       | String  |WMS数据中的某一个图层名称，必填                                            |
| tokenName      | String  | 预留字段，可以为空，在请求WMS地址的时候，会当作Url的Parameter的Key传入。                           |
| tokenValue     | String  | 预留字段，可以为空，在请求WMS地址的时候，会当作Url的Parameter的值传入。                                                            |
| urlParams     | String  | 这里的参数将会在向服务器请求的时候拼接进URL，参数前后不要有&符号，参数内可以有&符号。每个参数需要使用encodeURIComponent()函数进行转换。                                                            |
| visible     | Boolean  | 显隐控制，true：显示；false：隐藏                                                            |
| alpha     | Number  | 透明度，0：完全透明；1：完全不透明                                                            |

##### 回调数据：

```json
{
  "result": 1,
  "message": "成功。"
}
```

##### 回调数据参数描述：

| 属性    | 类型   | 说明                     |
| ------- | ------ | ------------------------ |
| result  | Number | 1：代表成功；0：代表失败 |
| message | String | 成功或者失败原因         |

[返回本章目录](#目录)

## 2.更新WMS图层样式 <span style="width: 40px;height: 21px;display:inline-block;background: #0fcccc;margin-left: 5px;line-height: 19px;"><span style="width: 100%;height: 100%;background: url(./img/stream.png) no-repeat 4px 5px;background-size: 12px 10px;text-indent: 22px;font-size: 12px;color: #ffffff;line-height: 20px;display:inline-block;vertical-align: top;">流</span></span>

### 功能描述:

更新WMS图层样式

### 调用方法:

```js
let jsonData = {   
    id: "idObj",
    visible: true,
    alpha: 0.1
}


appInstance.uniCall('updateWMSLayerStyle', jsonData, (result) => {
  console.log(result);
});
```

##### 参数描述：

| 属性         | 类型   | 说明                                                                |
| ------------ | ------ | ------------------------------------------------------------------- |
| id           | String | 图层对象 id，必须是通过addWMSLayer添加过的图层id |
| visible     | Boolean  | 显隐控制，true：显示；false：隐藏                                                            |
| alpha     | Number  | 透明度，0：完全透明；1：完全不透明                                                            |

##### 回调数据：

```json
{
  "result": 1,
  "message": "成功。"
}
```

##### 回调数据参数描述：

| 属性    | 类型   | 说明                     |
| ------- | ------ | ------------------------ |
| result  | Number | 1：代表成功；0：代表失败 |
| message | String | 成功或者失败原因         |

[返回本章目录](#目录)

## 3.移除WMS图层样式 <span style="width: 40px;height: 21px;display:inline-block;background: #0fcccc;margin-left: 5px;line-height: 19px;"><span style="width: 100%;height: 100%;background: url(./img/stream.png) no-repeat 4px 5px;background-size: 12px 10px;text-indent: 22px;font-size: 12px;color: #ffffff;line-height: 20px;display:inline-block;vertical-align: top;">流</span></span>

### 功能描述:

移除WMS图层样式

### 调用方法:

```js
let jsonData = {   
  id: "idObj",
}

appInstance.uniCall('removeWMSLayer', jsonData, (result) => {
  console.log(result);
});
```

##### 参数描述：

| 属性    | 类型    | 说明                                                                |
| ------- | ------- | ------------------------------------------------------------------- |
| id      | String  | 图层对象 id，必须是通过addWMSLayer添加过的图层id |

##### 回调数据：

```json
{
  "result": 1,
  "message": "成功。"
}
```

##### 回调数据参数描述：

| 属性    | 类型   | 说明                     |
| ------- | ------ | ------------------------ |
| result  | Number | 1：代表成功；0：代表失败 |
| message | String | 成功或者失败原因         |

[返回本章目录](#目录)